[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kazuharu Yanagimoto",
    "section": "",
    "text": "I am a PhD student at CEMFI. My research fields are labor, macro, and especially family economics.\n\nRead More ‚Üí"
  },
  {
    "objectID": "talks/index.html",
    "href": "talks/index.html",
    "title": "Talks that Last",
    "section": "",
    "text": "Copyright\n\n\n\nExcept where noted, all content is  Kazuharu Yanagimoto and licensed under Creative Commons."
  },
  {
    "objectID": "talks/index.html#section",
    "href": "talks/index.html#section",
    "title": "Talks that Last",
    "section": "2023",
    "text": "2023\n\n\n    \n        \n            \n        \n        \n            \n                Non-designer's Quarto Presentation \n            \n            \n                March 4, 2023 ‚àô \n                Tokyo.R (via zoom)\n            \n            Á¨¨104ÂõûTokyo.R„Å´„Å¶Quarto„Å´„Çà„ÇãRevealjs„Çπ„É©„Ç§„Éâ„ÅÆ„Éá„Ç∂„Ç§„É≥„Å´„Å§„ÅÑ„Å¶„ÅäË©±„Åó„Åæ„Åó„Åü.\n            \n                \n                    \n                         Slides\n                    \n                \n                \n                    \n                         Code\n                    \n                \n            \n        \n    \n    \n        \n            \n        \n        \n            \n                An Advanced Introdution to R \n            \n            \n                January 13, 2023 ‚àô \n                CEMFI, Madrid\n            \n            Here is a talk on practical techniques to write a paper with R\n            \n                \n                    \n                         Slides\n                    \n                \n                \n                    \n                         GitHub\n                    \n                \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "talks/index.html#section-1",
    "href": "talks/index.html#section-1",
    "title": "Talks that Last",
    "section": "2022",
    "text": "2022\n\n\n    \n        \n            \n        \n        \n            \n                Git & GitHub Workshop \n            \n            \n                September 23, 2022 ‚àô \n                CEMFI, Madrid\n            \n            Here is a talk I gave on managing codes and data by using GitHub and DVC for economists.\n            \n                \n                    \n                         Slides\n                    \n                \n                \n                    \n                         GitHub\n                    \n                \n            \n        \n    \n    \n        \n            \n        \n        \n            \n                El Camino del PhD \n            \n            \n                July 10, 2022 ‚àô \n                Êù±‰∫¨Â§ßÂ≠¶ (via Zoom)\n            \n            Á±≥ÂõΩÂ§ßÂ≠¶Èô¢Â≠¶Áîü‰ºö‰∏ªÂÇ¨„ÅÆÊµ∑Â§ñÂ§ßÂ≠¶Èô¢ÁïôÂ≠¶Ë™¨Êòé‰ºö@Êù±‰∫¨Â§ßÂ≠¶„ÅßÊâÄÂ±û„Åô„ÇãCEMFI„Åß„ÅÆÁîüÊ¥ª„Å´„Å§„ÅÑ„Å¶„ÅäË©±„Åó„Åæ„Åó„Åü.\n            \n                \n                    \n                         Video\n                    \n                \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "about/index.html",
    "href": "about/index.html",
    "title": "Hi There!",
    "section": "",
    "text": "I am a Ph.D.¬†student in Economics at CEMFI in Madrid, Spain.\nMy research field is family economics, broadly speaking, I am interested in questions like:\nMaster in Economics ‚àô CEMFI ‚àô 2021\nBachelor in Economics ‚àô University of Tokyo ‚àô 2019"
  },
  {
    "objectID": "about/index.html#a-blog-that-works",
    "href": "about/index.html#a-blog-that-works",
    "title": "Hi There!",
    "section": "A BLOG THAT WORKS",
    "text": "A BLOG THAT WORKS\n\n\n    \n            \n                \n            \n        \n            Scientific Communication with Quarto: Economic Model Case\n            \n                \n                    Julia\n                \n                \n                    Observable JS\n                \n                \n                    Quarto\n                \n            \n            \n        \n    \n\n\nNo matching items\n\n\n\nSee All ‚Üí"
  },
  {
    "objectID": "about/index.html#talks-that-last",
    "href": "about/index.html#talks-that-last",
    "title": "Hi There!",
    "section": "TALKS THAT LAST",
    "text": "TALKS THAT LAST\n\n\n            \n                \n                    \n                \n                \n                    \n                        An Advanced Introdution to R \n                    \n                    \n                        Jan 13, 2023 ‚àô \n                        CEMFI, Madrid\n                    \n                    Here is a talk on practical techniques to write a paper with R\n                    \n                        \n                            \n                                 Slides\n                            \n                        \n                        \n                            \n                                 GitHub\n                            \n                        \n                    \n                \n            \n\n\nNo matching items\n\n\n\nSee All ‚Üí"
  },
  {
    "objectID": "blog/2022/05/24/docker_template/index.html",
    "href": "blog/2022/05/24/docker_template/index.html",
    "title": "My Docker Template for R",
    "section": "",
    "text": "Docker is one of the best environments for reproductivity of the research. I use Docker for basically all my projects, but it took me about 2 years to get to a satisfactory environment setup. I would like to share it here as a template."
  },
  {
    "objectID": "blog/2022/05/24/docker_template/index.html#quick-start",
    "href": "blog/2022/05/24/docker_template/index.html#quick-start",
    "title": "My Docker Template for R",
    "section": "Quick Start",
    "text": "Quick Start\n\nClone this repository\nOpen it in VSCode and add Remote-Containers Extension\nFrom the command palette, choose ‚Äúopen folder in container‚Äù\nOpen localhost:8787 in a browser\nCreate a project for this project directory (by default, choose /home/rstudio/work)\nRUN renv::init() in the R console\nSet up a DVC environment\n\nPrepare a folder in Google Drive (and copy the folder code)\nInit DVC\ndvc init\ndvc remote add --default myremote gdrive://GDRIVE_FOLDER_CODE"
  },
  {
    "objectID": "blog/2022/05/24/docker_template/index.html#brief-explanations",
    "href": "blog/2022/05/24/docker_template/index.html#brief-explanations",
    "title": "My Docker Template for R",
    "section": "Brief Explanations",
    "text": "Brief Explanations\nIn this section, I briefly comment on each file. I assume you are familiar with\n\nR, Rstudio & renv\nDocker\nVSCode and its Remote-Containers extension\n\nI manage data files by DVC. But if you have another strategy for data management, ignore these parts.\n\nDockerfile\nFROM rocker/verse\n\nRUN apt update && apt install -y gnupg openssh-client libpoppler-cpp-dev\n\n# DVC\nRUN wget \\\n       https://dvc.org/deb/dvc.list \\\n       -O /etc/apt/sources.list.d/dvc.list && \\\n    wget -qO - https://dvc.org/deb/iterative.asc | apt-key add - && \\\n    apt update && \\\n    apt install -y dvc \n\n# R Packages\nRUN R -e \"install.packages(c('languageserver', 'renv'))\"\n\n# Rstudio Global Options\nCOPY --chown=rstudio:rstudio .config/rstudio/rstudio-prefs.json /home/rstudio/.config/rstudio/rstudio-prefs.json\n\nR image\nIf you don‚Äôt have any preferences, I recommend you use one of the rocker image series of rocker-org:\n\nrocker/rstudio\nrocker/tidyverse\nrocker/verse\nrocker/geospatial\n\nBecause I currently write a paper by Rmarkdown, I usually use rocker/verse and use rocker/geospatial for spatial analysis.\n\n\nDVC\nI just follow the official guide for Install from repository. If your environment includes python, it is easier to install it via pip.\n\n\nR packages\nI use renv for dependency management. languageserver allows us to run a code in VSCode, but I don‚Äôt usually use it.\n\n\nRstudio Global Options\nWhen Rstudio launches, it loads the ~/.config/rstudio/rstudio-prefs.json file for general settings. So I prepare /.config/rstudio/rstudio-prefs.json, and it allows me to use Rstudio with my favorite settings.\nIf you want to use your own settings, I recommend you\n\nOpen Rstudio\nSet up by GUI (Tools -&gt; Global Options)\nCopy ~/.config/rstudio/rstudio-prefs.json (in container)\nPaste it on /.config/rstudio/rstudio-prefs.json (in host)\n\n\n\n\ndocker-compose.yml\nversion: '3'\nservices:\n    rstudio:\n        build:\n            context: .\n        environment:\n            - TZ=Europe/Madrid\n            - DISABLE_AUTH=true\n            - RENV_PATHS_CACHE=/home/rstudio/.renv/cache\n        volumes:\n            - .:/home/rstudio/work\n            - $HOME/.renv:/home/rstudio/.renv/cache\n\nDISABLE_AUTH=true\nYou don‚Äôt need to type a password for each new session.\n\n\nCache for renv\nBy setting the RENV_PATH_CACHE and mounting the directory, you don‚Äôt need to re-install packages. In other words, you can share packages with other (docker) projects and don‚Äôt have to re-install all the packages when you rebuild a container.\nHave fun!"
  },
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "Blog",
    "section": "",
    "text": "June 10, 2023\n        \n        \n            Scientific Communication with Quarto: Economic Model Case\n            \n                \n                    Julia\n                \n                \n                    Observable JS\n                \n                \n                    Quarto\n                \n            \n            \n        \n        \n            \n        \n    \n    \n                  \n            April 30, 2023\n        \n        \n            Quarto Is Multi-lingual!\n            \n                \n                    Julia\n                \n                \n                    Python\n                \n                \n                    R\n                \n                \n                    Quarto\n                \n                \n                    Stata\n                \n            \n            \n        \n        \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html",
    "href": "blog/2022/12/27/quarto_tips/index.html",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "",
    "text": "The other day, I used slides made with Quarto in a presentation at a conference. In the Economics community, 98% of people use Beamer of \\(\\LaTeX\\), and about 2% use PowerPoint for their presentations. I personally don‚Äôt like Beamer‚Äôs design, and I think PowerPoint has a problem with maintainability (i.e., can it be easily changed) in case of ongoing projects. I like Quarto for the following reasons:\n\nReasonably good design. And highly customizable.\nTime saving. Slides are written in the markdown notation, so you can make it with the same amount of effort as Beamer (unless you care about the designüòâ)\nEasily maintainable. Variables can be used in the text, so the numbers are automatically updated even if the model or analysis is slightly changed.\n\nHere, I write some tips on Quarto for academic presentations. For the basic slide creation in Quarto, please refer to the official documentation or Tom Mock‚Äôs slides at the RStudio conference. The slides used at the conference presentation are not yet ready for public release, so I prepare these example slides\n\n Slides ¬†  PDF ¬†  Code"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#data",
    "href": "blog/2022/12/27/quarto_tips/index.html#data",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Data",
    "text": "Data\nI render tables and plots inside of slides. In other words, I am not using the image files for the article. This is because\n\nProper font sizes in the article are too small in presentation slides\nHighlighting is not easy. You need to create another figure/table or use complicated TikZ\nI want to unify the design of slides and figures&tables\n\nHence, I create and save a data frame in a separate file and load it just before plotting it.\nload(\"tb_hoge.rds\")\ntb_hoge |&gt;\n  ggplot(aes(x, y)) +\n  geom_point()\nYou can use this data frame to refer to its values in a slide text.\n\nIn 2021, `r tb_hoge$value[tb_hoge$year == 2021]`% of people‚Ä¶\n\nThis is convenient in case you change your analysis slightly and the values in tb_hoge.rds change.1 The values will be updated by re-rendering slides."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#theme",
    "href": "blog/2022/12/27/quarto_tips/index.html#theme",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Theme",
    "text": "Theme\nThere are 11 built-in themes provided for Reveal presentations. These are good designs, but to match them with figures&tables, I write custom.scss and make my own theme. Currently, it is like xaringanthemer‚Äôs style_mono_accent() theme. You can check about the customizable parts in the official document.\n\n\nCode\n/*-- scss:defaults --*/\n\n@import url(https://fonts.googleapis.com/css?family=Montserrat:300,300i&display=swap);\n@import url(https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap);\n@import url(https://fonts.googleapis.com/css?family=Fira+Mono&display=swap);\n\n// fonts\n$font-family-sans-serif: Montserrat, sans-serif !default;\n$font-family-monospace: \"Fira Mono\", monospace  !default;\n\n// colors\n$body-bg: #fff !default;\n$body-color: #272822 !default;\n$link-color: #055099 !default;\n\n// headings\n$presentation-heading-font: \"Josefin Sans\", sans-serif !default;\n$presentation-heading-color: #1C5253 !default;\n\n$h1-font-size: 1.6em !default;\n$h2-font-size: 1.3em !default;\n$h3-font-size: 1.15em !default;\n$h4-font-size: 1em !default;\n\n// code blocks\n$code-block-border-color: #93a1a1 !default;\n$code-color: $presentation-heading-color;\n\n//\n// Color system\n//\n\n// stylelint-disable\n$white:    #fff !default;\n$gray-100: #fdf6e3 !default;\n$gray-200: #eee8d5 !default;\n$gray-300: #dee2e6 !default;\n$gray-400: #ced4da !default;\n$gray-500: #adb5bd !default;\n$gray-600: #839496 !default;\n$gray-700: #495057 !default;\n$gray-800: #073642 !default;\n$gray-900: #002b36 !default;\n$black:    #000 !default;\n\n/*-- scss:rules --*/\n\n.title{\n    color: $white;\n    font-size: 2.5em;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    top: 20%\n}\n\n.subtitle{\n    color: $gray-100;\n    font-size: $h2-font-size;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    top: 33%\n}\n\n\n.author {\n    color: $white;\n    font-size: $h3-font-size;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    bottom: 10%;\n}\n\n.date {\n    color: $white;\n    font-size: $h4-font-size;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    bottom: 5%;\n}\n\n\n.message{\n    color: $presentation-heading-color;\n    font-size: $h2-font-size;\n    font-family: $presentation-heading-font;\n    text-align: center;\n}\n\n.space-left {\n    margin-left: 5%;\n}\n\n\n.center-xy {\n    margin: 0;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -ms-transform: translateY(-50%), translateX(-50%);\n    transform: translateY(-50%), translateX(-50%);\n}\n\n\n.small {\n    font-size: 0.8em\n}\n\n.Large {\n    font-size: 1.6em\n}\n\nsection.has-dark-background a {\n    color: $white;\n    border-style: dashed;\n    border-bottom-width: 1px;\n}\n\nsection.has-dark-background a:hover {\n    color: $white;\n    border-bottom: solid\n}\n\n\n\nAd-hoc CSS\nI write frequently used CSS settings in custom.css, but sometimes I want to use a CSS environment on an ad-hoc basis (for example, to change the font size slightly.)\nIn these cases, you can write them in style= environment:\n::: {style=\"font-size: 0.68\"}\n\nSentences you want to make smaller\n\n:::\n\n\nFragments\nQuarto (or Reveal.js) allows some complicated animation. If you are interested, you might want to see Tom Mock‚Äôs this part of the slides.\nApart from this, as discussed here, the original fragment separator . . . does not correctly work in environments like columns. From my experience, fragment environment solves them."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#plots",
    "href": "blog/2022/12/27/quarto_tips/index.html#plots",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Plots",
    "text": "Plots\n\nTheme\nMinimizing elements is a starting point of slide design. For that purpose, it is important to use the same fonts and colors for figures (and tables) as the slides. This is the reason why I used to use xaringanthemer, which automatically generates the ggplot2 theme corresponding to the slides‚Äô theme. Unfortunately, there have been no packages for Quarto slides (as far as I know), I declare this theme_quarto() function.\n\n\nCode\nblend_colors &lt;- function(x, y, alpha = 0.5) {\n  x &lt;- colorspace::hex2RGB(x)\n  y &lt;- colorspace::hex2RGB(y)\n  z &lt;- colorspace::mixcolor(alpha, x, y)\n  colorspace::hex(z)\n}\ncolor_blender &lt;- function(x, y) function(alpha = 0.5) blend_colors(x, y, alpha)\ntheme_quarto &lt;- function (\n    text_color = color_text,\n    background_color = color_bg,\n    text_font = font_text,\n    text_font_size = 30,\n    accent_color = color_base,\n    title_font = font_title,\n    title_font_size = 30\n){\n    blend &lt;- color_blender(text_color, background_color)\n    ggplot2::theme(\n        line = ggplot2::element_line(color = blend(0.2)),\n        rect = ggplot2::element_rect(fill = background_color),\n        title = ggplot2::element_text(\n            color = accent_color,\n            family = title_font,\n            size = title_font_size\n        ),\n        plot.background = ggplot2::element_rect(\n            fill = background_color,\n            color = background_color\n        ),\n        panel.background = ggplot2::element_rect(\n            fill = background_color,\n            color = background_color\n        ),\n        panel.grid.major = ggplot2::element_line(\n            color = blend(0.8),\n            inherit.blank = TRUE\n        ),\n        panel.grid.minor = ggplot2::element_line(\n            color = blend(0.9),\n            inherit.blank = TRUE\n        ),\n        axis.title = ggplot2::element_text(size = title_font_size * 0.8),\n        axis.ticks = ggplot2::element_line(color = blend(0.8)),\n        axis.text = ggplot2::element_text(color = blend(0.4), size = title_font_size * 0.7),\n        legend.key = ggplot2::element_rect(fill = \"transparent\", colour = NA),\n        legend.text = ggplot2::element_text(size = title_font_size * 0.8, family = title_font),\n        plot.caption = ggplot2::element_text(\n            size = text_font_size * 0.8,\n            color = blend(0.3)\n        )\n    )\n}\n\n\nWhile the original xaringanthemer::theme_xaringan() redefines the primary color of ggplot2::geom_* by ggplot2::update_geom_defaults, my function does not. I did not overwrite it because color palettes must be specified manually for 2+ color cases, anyway. You can use it like:\n\ncolor_base &lt;- \"#1C5253\"\ntb_hoge |&gt;\n  ggplot(aes(x, y)) +\n  geom_point(color = color_base) +\n  theme_quarto()\n\n\n\nHighlighting\nThe most famous way to highlight plots should be gghighlight. You can proceed with your stories smoothly and clearly by\n\n\n\nFirst Slide\n\np &lt;- tb_hoge |&gt;\n  ggplot(aes(x, y)) +\n  geom_col(color = color_base) +\n  theme_quarto()\n\np\n\n\n\n\n\nSecond Slide\n\np + gghighlight(x == \"Japan\")"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#tables",
    "href": "blog/2022/12/27/quarto_tips/index.html#tables",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Tables",
    "text": "Tables\n\nmarkdown vs.¬†kableExtra vs.¬†gt?\nI think they are three popular ways to create tables in HTML slides. while each of them has pros and cons, I am using gt because\nMarkdown Table\n\nNo highlighting\nNo multirow nor multicol from \\(\\LaTeX\\)\n\nkableExtra\n\nSyntax is a little more complicated than gt (e.g., need to mutate a string column for percentages.)\nHighlighting is slightly more complicated than gt\n\nNote that I use kableExtra for tables in an article due to the following problem.\n\n\nProblems with Mathematic Expressions\nUnfortunately, it is difficult to use mathematical expressions in a table in Quarto. gt does not support \\(\\LaTeX\\) notation.2 Also, mathematical expressions of kableExtra are not rendered in Quarto (GitHub Issue). You can solve it by\nkableExtra::kbl(data, format=\"markdown\")\nbut it contains the abovementioned disadvantages of markdown tables.\nThen, I compromise by using\n\nUnicode Greek letters (Œ∏, œÑ, Œ¥, etc.)\nHTML tags (&lt;sup&gt; and &lt;sub&gt;)\n\nand evaluating them by gt::fmt_markdown(). Mathematical expressions in tables are usually simple, so I don‚Äôt have any problems so far.\n\ntibble(a = c(\"Œ∏ = 0\", \"œÑ&lt;sup&gt;Œ¥-1&lt;/sup&gt;\")) |&gt;\n  gt() |&gt;\n  fmt_markdown(columns = everything())\n\n\n\nHighlighting\nThe gt package itself can also highlight cells in a table with the function tab_style(). However, this requires redundant writing, so gtExtras::gt_highlight_rows() and gtExtras::gt_highlight_cols() are useful if you want to highlight row/column-wise."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#export",
    "href": "blog/2022/12/27/quarto_tips/index.html#export",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Export",
    "text": "Export\n\nHTML or PDF?\nAlthough I think you use a prepared PC for your presentation, since it is difficult to imagine a PC without a browser, the HTML format is also acceptable. If you write the following in the YAML header, only one self-contained HTML file will be output. So you can easily carry it around like a PDF file.3\nformat:\n  revealjs:\n    standalone: true\n    embed-resources: true\nHowever, you will be asked to submit your slides in PDF format in various situations. And whether or not you actually present your presentation in PDF format, it is a good idea to have PDF slides on hand for insurance purposes.\n\nOpen the HTML file in your browser and press E\nClick ‚ÄúPrint‚Äù on the browser, then ‚ÄúSave as PDF‚Äù\n\nIf you want to separate fragments, specify pdf-separate-fragments: true in YAML.\n\n\nProblems with Hyperlink\nA hyperlink that jumps to each slide is essentially a reference to an &lt;h2&gt; tag, so the link can be written as:\n## A Slide {#sec-slide}\n\n&lt;a href=\"#/sec-detail\"&gt;detail‚Üó&lt;/a&gt;\n\n## A Detail Slide {#sec-detail}\n\n&lt;a href=\"#/sec-slide\"&gt;‚Ü©Ô∏é&lt;/a&gt;\nHowever, as far as I know, the link is not reflected in the above PDF output. If anyone knows a solution to this problem, I would appreciate it if you could let me know."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#fin.",
    "href": "blog/2022/12/27/quarto_tips/index.html#fin.",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Fin.",
    "text": "Fin.\nThese are some of my ideas for using Quarto for academic presentations. I think that Quarto‚Äôs slides are quite suitable for academic presentations, because of their simple syntax, high degree of freedom in design, and high maintainability in numbers. I hope this is useful for you."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#are-you-a-beamer-fan",
    "href": "blog/2022/12/27/quarto_tips/index.html#are-you-a-beamer-fan",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "",
    "text": "The other day, I used slides made with Quarto in a presentation at a conference. In the Economics community, 98% of people use Beamer of \\(\\LaTeX\\), and about 2% use PowerPoint for their presentations. I personally don‚Äôt like Beamer‚Äôs design, and I think PowerPoint has a problem with maintainability (i.e., can it be easily changed) in case of ongoing projects. I like Quarto for the following reasons:\n\nReasonably good design. And highly customizable.\nTime saving. Slides are written in the markdown notation, so you can make it with the same amount of effort as Beamer (unless you care about the designüòâ)\nEasily maintainable. Variables can be used in the text, so the numbers are automatically updated even if the model or analysis is slightly changed.\n\nHere, I write some tips on Quarto for academic presentations. For the basic slide creation in Quarto, please refer to the official documentation or Tom Mock‚Äôs slides at the RStudio conference. The slides used at the conference presentation are not yet ready for public release, so I prepare these example slides\n\n Slides ¬†  PDF ¬†  Code"
  },
  {
    "objectID": "talks/index.html#section-2",
    "href": "talks/index.html#section-2",
    "title": "Talks that Last",
    "section": "2021",
    "text": "2021\n\n\n    \n        \n            \n        \n        \n            \n                Git & GitHub Workshop \n            \n            \n                September 24, 2021 ‚àô \n                CEMFI\n            \n            Here is a talk I gave on managing codes and data by using GitHub and DVC for economists\n            \n                \n                    \n                         Slides\n                    \n                \n                \n                    \n                         GitHub\n                    \n                \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "research/working-papers/static-norm/index.html",
    "href": "research/working-papers/static-norm/index.html",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "",
    "text": "Paper (will be uploaded soon)\nSlides (SAEe2022)\nPDF Slides (SAEe2022)"
  },
  {
    "objectID": "research/working-papers/static-norm/index.html#abstract",
    "href": "research/working-papers/static-norm/index.html#abstract",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "Abstract",
    "text": "Abstract\nJapan ranks 116th out of 146 countries in the World Economic Forum‚Äôs Global Gender Gap Index 2022, well below many developing countries, and has one of the largest gender pay gaps among high-income countries. On the other hand, women‚Äôs labor force participation is high in Japan. However, women are much more likely to work in non-regular jobs, which are associated with lower wages and fewer hours. Men, in contrast, have regular, higher-paid jobs with long-hours requirements. In this paper, I build and estimate a model in which couples jointly decide their occupations and working hours. Occupations differ in their flexibility. Regular ones require long working hours, and hourly wages are convex functions of hours worked. Non-regular occupations have a linear mapping between hours worked and hourly wages. The model also allows for social norms that penalize women who earn more than their husbands. Given the inflexibility of regular jobs and social norms, women are more likely to choose non-regular jobs or not to work, and allocate a larger share of their hours for home production for their households. The model can account for all the observed gender gaps in labor force participation, 33% in occupational choices, 74% in labor hours, and 34% in wages. Through the lens of the model, the inflexibility of regular jobs explains almost all the gaps in occupational choices and wages, while social norms that penalize women who earn more than their husbands account for all the gap in the participation rate and half of the gap in hours worked."
  },
  {
    "objectID": "research/working-papers/static-norm/index.html#important-figure",
    "href": "research/working-papers/static-norm/index.html#important-figure",
    "title": "Time Allocations, Social Norms, and Gender Gaps",
    "section": "Important figure",
    "text": "Important figure\nFigure 5: Derogation decisions across pandemic violations and pandemic backsliding\n\n\n\nFigure 5: Derogation decisions across pandemic violations and pandemic backsliding"
  },
  {
    "objectID": "research/working-papers/static-norm/index.html#bibtex-citation",
    "href": "research/working-papers/static-norm/index.html#bibtex-citation",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@unpublished{Yanagimoto:2023,\n    Author = {Kazuharu Yanagimoto},\n    Note = {Working paper},\n    Title = {Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan},\n    Year = {2023}}"
  },
  {
    "objectID": "research/index.html",
    "href": "research/index.html",
    "title": "Research ",
    "section": "",
    "text": "Why not Choose a Better Job?\n                \n                \n                    Flexibility, Social Norms, and Gender Gaps in Japan\n                \n                \n                    \n                        Gender Gaps\n                    \n                    \n                        Social Norms\n                    \n                    \n                        Japan\n                    \n                \n                \n                        \n                            \n                                 Slides (SEHO2023)\n                            \n                        \n                        \n                            \n                                 Working Paper (will be available soon)\n                            \n                        \n                \n            \n        \n\n\nNo matching items"
  },
  {
    "objectID": "research/working-papers/static-norm/index.html#important-table-figure",
    "href": "research/working-papers/static-norm/index.html#important-table-figure",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "Important table & figure",
    "text": "Important table & figure"
  },
  {
    "objectID": "research/work-in-progress/hetero2wfe/index.html#abstract",
    "href": "research/work-in-progress/hetero2wfe/index.html#abstract",
    "title": "Heterogenous Child Penalties",
    "section": "Abstract",
    "text": "Abstract"
  },
  {
    "objectID": "research/work-in-progress/hetero2wfe/index.html#important-table-figure",
    "href": "research/work-in-progress/hetero2wfe/index.html#important-table-figure",
    "title": "Heterogenous Child Penalties",
    "section": "Important table & figure",
    "text": "Important table & figure"
  },
  {
    "objectID": "research/index.html#work-in-progress",
    "href": "research/index.html#work-in-progress",
    "title": "Research ",
    "section": "WORK IN PROGRESS",
    "text": "WORK IN PROGRESS\n\n\n        \n            \n                \n                        Estimating Individual-level Child-penalties for (Improved) Childcare Policy Evaluation\n                \n                \n                \n                \n                    \n                        Two-way Fixed Effects\n                    \n                    \n                        Child Penalty\n                    \n                    \n                        Gender Gaps\n                    \n                \n                \n                    with Dmitry Arkhangelsky and Tom Zohar\n                \n                \n                \n            \n        \n\n\nNo matching items"
  },
  {
    "objectID": "research/index.html#working-papers",
    "href": "research/index.html#working-papers",
    "title": "Research ",
    "section": "",
    "text": "Why not Choose a Better Job?\n                \n                \n                    Flexibility, Social Norms, and Gender Gaps in Japan\n                \n                \n                    \n                        Gender Gaps\n                    \n                    \n                        Social Norms\n                    \n                    \n                        Japan\n                    \n                \n                \n                        \n                            \n                                 Slides (SEHO2023)\n                            \n                        \n                        \n                            \n                                 Working Paper (will be available soon)\n                            \n                        \n                \n            \n        \n\n\nNo matching items"
  },
  {
    "objectID": "about/index.html#selected-papers",
    "href": "about/index.html#selected-papers",
    "title": "Hi There!",
    "section": "Selected Papers",
    "text": "Selected Papers"
  },
  {
    "objectID": "about/index.html#working-papers",
    "href": "about/index.html#working-papers",
    "title": "Hi There!",
    "section": "WORKING PAPERS",
    "text": "WORKING PAPERS\n\n\n            \n                \n                    \n                            Why not Choose a Better Job?\n                    \n                    \n                        Flexibility, Social Norms, and Gender Gaps in Japan\n                    \n                    \n                        \n                            Gender Gaps\n                        \n                        \n                            Social Norms\n                        \n                        \n                            Japan\n                        \n                    \n                    \n                            \n                                \n                                     Slides (SEHO2023)\n                                \n                            \n                            \n                                \n                                     Working Paper (will be available soon)\n                                \n                            \n                    \n                \n            \n\n\nNo matching items\n\n\n\nSee All ‚Üí"
  },
  {
    "objectID": "research/index.html#work-in-prgress",
    "href": "research/index.html#work-in-prgress",
    "title": "Research",
    "section": "WORK IN PRGRESS",
    "text": "WORK IN PRGRESS\n\n\n    \n        \n            \n                    Heterogenous Child Penalties\n            \n            \n                \n                    Two-way Fixed Effects\n                \n                \n                    Child Penalty\n                \n                \n                    Gender Gaps\n                \n            \n            \n                with Dmitry Arkhangelsky and Tom Zohar\n            \n            \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "research/index.html#work-in-progress-fa-regular-spinner",
    "href": "research/index.html#work-in-progress-fa-regular-spinner",
    "title": "Research",
    "section": "WORK IN PROGRESS ",
    "text": "WORK IN PROGRESS \n\n\n    \n        \n            \n                    Heterogenous Child Penalties\n            \n            \n                \n                    Two-way Fixed Effects\n                \n                \n                    Child Penalty\n                \n                \n                    Gender Gaps\n                \n            \n            \n                with Dmitry Arkhangelsky and Tom Zohar\n            \n            \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "research/index.html#work-in-progress-fa-regular-copyright",
    "href": "research/index.html#work-in-progress-fa-regular-copyright",
    "title": "Research",
    "section": "WORK IN PROGRESS ",
    "text": "WORK IN PROGRESS \n\n\n    \n        \n            \n                    Heterogenous Child Penalties\n            \n            \n                \n                    Two-way Fixed Effects\n                \n                \n                    Child Penalty\n                \n                \n                    Gender Gaps\n                \n            \n            \n                with Dmitry Arkhangelsky and Tom Zohar\n            \n            \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "research/index.html#work-in-progress-fas-spinner",
    "href": "research/index.html#work-in-progress-fas-spinner",
    "title": "Research",
    "section": "WORK IN PROGRESS ",
    "text": "WORK IN PROGRESS \n\n\n    \n        \n            \n                    Heterogenous Child Penalties\n            \n            \n                \n                    Two-way Fixed Effects\n                \n                \n                    Child Penalty\n                \n                \n                    Gender Gaps\n                \n            \n            \n                with Dmitry Arkhangelsky and Tom Zohar\n            \n            \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "research/index.html#work-in-progress-fa-spinner",
    "href": "research/index.html#work-in-progress-fa-spinner",
    "title": "Research",
    "section": "WORK IN PROGRESS ",
    "text": "WORK IN PROGRESS \n\n\n    \n        \n            \n                    Heterogenous Child Penalties\n            \n            \n                \n                    Two-way Fixed Effects\n                \n                \n                    Child Penalty\n                \n                \n                    Gender Gaps\n                \n            \n            \n                with Dmitry Arkhangelsky and Tom Zohar\n            \n            \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "research/index.html#fa-spinner-work-in-progress",
    "href": "research/index.html#fa-spinner-work-in-progress",
    "title": "Research",
    "section": " WORK IN PROGRESS",
    "text": "WORK IN PROGRESS\n\n\n    \n        \n            \n                    Heterogenous Child Penalties\n            \n            \n                \n                    Two-way Fixed Effects\n                \n                \n                    Child Penalty\n                \n                \n                    Gender Gaps\n                \n            \n            \n                with Dmitry Arkhangelsky and Tom Zohar\n            \n            \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#section",
    "href": "blog/index.html#section",
    "title": "Blog",
    "section": "",
    "text": "June 10, 2023\n        \n        \n            Scientific Communication with Quarto: Economic Model Case\n            \n                \n                    Julia\n                \n                \n                    Observable JS\n                \n                \n                    Quarto\n                \n            \n            \n        \n        \n            \n        \n    \n    \n                  \n            April 30, 2023\n        \n        \n            Quarto Is Multi-lingual!\n            \n                \n                    Julia\n                \n                \n                    Python\n                \n                \n                    R\n                \n                \n                    Quarto\n                \n                \n                    Stata\n                \n            \n            \n        \n        \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#section-1",
    "href": "blog/index.html#section-1",
    "title": "Blog",
    "section": "2022",
    "text": "2022\n\n\n    \n                  \n            December 28, 2022\n        \n        \n            Some Quarto Tips for Academic Presentation\n            \n                \n                    R\n                \n                \n                    Quarto\n                \n            \n            \n        \n        \n            \n        \n    \n    \n                  \n            May 24, 2022\n        \n        \n            My Docker Template for R\n            \n                \n                    R\n                \n                \n                    Docker\n                \n            \n            \n        \n        \n            \n        \n    \n\n\nNo matching items"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#footnotes",
    "href": "blog/2022/12/27/quarto_tips/index.html#footnotes",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Footnotes",
    "text": "Footnotes\n\n\n In economics, changing the age group of the sample or the parameters of the model sometimes lead to changes in the results. In addition, we sometimes found mistakes in cleaning the data.‚Ü©Ô∏é\n This issue has been raised in 2019, but it does not seem to be solved quickly.‚Ü©Ô∏é\n The option self-contained: true produces a deprecated warning.‚Ü©Ô∏é"
  },
  {
    "objectID": "blog/2023/04/30/quarto_multi_lang/index.html",
    "href": "blog/2023/04/30/quarto_multi_lang/index.html",
    "title": "Quarto Is Multi-lingual!",
    "section": "",
    "text": "A common misunderstanding about Quarto is that we cannot use multiple languages within a document. Indeed, Jupyter cannot use multiple languages within a document, and we usually use the jupyter engine for Python and Julia (and it is officially supported.)\nHowever, knitr has already been able to execute multiple languages tons of years ago, so why can‚Äôt we do it in Quarto?\nLet‚Äôs see the following example with palmerpenguins::penguins of Horst, Hill, and Gorman (2020)"
  },
  {
    "objectID": "blog/2023/04/30/quarto_multi_lang/index.html#tabset",
    "href": "blog/2023/04/30/quarto_multi_lang/index.html#tabset",
    "title": "Quarto Is Multi-lingual!",
    "section": "Tabset",
    "text": "Tabset\nI think, one of the most useful case is when you want to support multiple source codes in a textbook or lecture notes. Quato supports Tabset layout and it‚Äôs so smart!\n\nRPythonJuliaStata\n\n\n\npenguins |&gt;\n  ggplot(aes(x = flipper_length_mm, y = body_mass_g,\n             color = species, shape = species)) +\n  geom_point(size = 3) +\n  scale_color_manual(values = c(\"darkorange\",\"purple\",\"cyan4\")) +\n  labs(x = \"Flipper Length (mm)\", y = \"Body Mass (g)\", color = NULL, shape = NULL) +\n  theme_minimal() +\n  theme(legend.position = c(0.9, 0.1),\n        panel.grid.major = element_blank())\n\n\n\n\n\n\n\n\n\n\n\nplt.clf()\n\nsns.scatterplot(data=penguins, x='flipper_length_mm', y='body_mass_g',\n                hue='species', style=\"species\",\n                palette=['#FF8C00', '#159090', '#A034F0'])\n\nplt.xlabel('Flipper Length (mm)')\nplt.ylabel('Body Mass (g)')\nplt.legend(title = \"\")\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n@df penguins scatter(\n  :flipper_length_mm,\n  :body_mass_g,\n  group = :species,\n  markersize = 5,\n  markershape = [:circle :utriangle :rect ],\n  markerstrokecolor = :white,\n  palette = [\"#FF8C00\", \"#159090\", \"#A034F0\"],\n  xaxis = \"Flipper Length (mm)\",\n  yaxis = \"Body Mass (g)\",\n  size = (480, 320),\n  dpi = 300,\n  legendfontsize = 8,\n  tickfontsize = 6,\n  guidefontsize = 10,\n  margin=Plots.Measures.Length(:mm, 2.0)\n)\n\n\n\n\n\n\n\nuse data/palmerpenguins, clear\n\nseparate body_mass_g, by(species)\ntwoway scatter body_mass_g? flipper_length_mm, ///\n   mcolor(orange emerald purple) mlab(\"\") ///\n   msymbol(O T S) ///\n   xtitle(\"Flipper Length (mm)\") ytitle(\"Body Mass (g)\") ///\n   legend(order(1 \"Adelie\" 2 \"Chinstrap\" 3 \"Gentoo\") pos(11) ring(0) col(1)) ///\n   plotregion(fcolor(white)) graphregion(fcolor(white))\nqui graph export \"figure/stata/scatter.svg\", replace\n\n\n\n\n\n\n\n\n\nHave a happy Quarto life ü•Ç!"
  },
  {
    "objectID": "research/working-papers/static-norm/index.html#important-links",
    "href": "research/working-papers/static-norm/index.html#important-links",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "",
    "text": "Paper (will be uploaded soon)\nSlides (SAEe2022)\nPDF Slides (SAEe2022)"
  },
  {
    "objectID": "research/working-papers/common-cheetah/index.html",
    "href": "research/working-papers/common-cheetah/index.html",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "",
    "text": "Paper (will be uploaded soon)\nSlides (SAEe2022)\nPDF Slides (SAEe2022)"
  },
  {
    "objectID": "research/working-papers/common-cheetah/index.html#important-links",
    "href": "research/working-papers/common-cheetah/index.html#important-links",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "",
    "text": "Paper (will be uploaded soon)\nSlides (SAEe2022)\nPDF Slides (SAEe2022)"
  },
  {
    "objectID": "research/working-papers/common-cheetah/index.html#abstract",
    "href": "research/working-papers/common-cheetah/index.html#abstract",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "Abstract",
    "text": "Abstract\nJapan ranks 116th out of 146 countries in the World Economic Forum‚Äôs Global Gender Gap Index 2022, well below many developing countries, and has one of the largest gender pay gaps among high-income countries. On the other hand, women‚Äôs labor force participation is high in Japan. However, women are much more likely to work in non-regular jobs, which are associated with lower wages and fewer hours. Men, in contrast, have regular, higher-paid jobs with long-hours requirements. In this paper, I build and estimate a model in which couples jointly decide their occupations and working hours. Occupations differ in their flexibility. Regular ones require long working hours, and hourly wages are convex functions of hours worked. Non-regular occupations have a linear mapping between hours worked and hourly wages. The model also allows for social norms that penalize women who earn more than their husbands. Given the inflexibility of regular jobs and social norms, women are more likely to choose non-regular jobs or not to work, and allocate a larger share of their hours for home production for their households. The model can account for all the observed gender gaps in labor force participation, 33% in occupational choices, 74% in labor hours, and 34% in wages. Through the lens of the model, the inflexibility of regular jobs explains almost all the gaps in occupational choices and wages, while social norms that penalize women who earn more than their husbands account for all the gap in the participation rate and half of the gap in hours worked."
  },
  {
    "objectID": "research/working-papers/common-cheetah/index.html#bibtex-citation",
    "href": "research/working-papers/common-cheetah/index.html#bibtex-citation",
    "title": "Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@unpublished{Yanagimoto:2023,\n    Author = {Kazuharu Yanagimoto},\n    Note = {Working paper},\n    Title = {Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan},\n    Year = {2023}}"
  },
  {
    "objectID": "research/common-cheetah/index.html",
    "href": "research/common-cheetah/index.html",
    "title": "Why not Choose a Better Job?",
    "section": "",
    "text": "Slides (SEHO2023) ¬†  Working Paper (will be available soon)"
  },
  {
    "objectID": "research/common-cheetah/index.html#abstract",
    "href": "research/common-cheetah/index.html#abstract",
    "title": "Why not Choose a Better Job?",
    "section": "Abstract",
    "text": "Abstract\nJapan ranks 116th out of 146 countries in the World Economic Forum‚Äôs Global Gender Gap Index 2022, well below many developing countries, and has one of the largest gender pay gaps among high-income countries. On the other hand, women‚Äôs labor force participation is high in Japan. However, women are much more likely to work in non-regular jobs, which are associated with lower wages and fewer hours. Men, in contrast, have regular, higher-paid jobs with long-hours requirements. In this paper, I build and estimate a model in which couples jointly decide their occupations and working hours. Occupations differ in their flexibility. Regular ones require long working hours, and hourly wages are convex functions of hours worked. Non-regular occupations have a linear mapping between hours worked and hourly wages. The model also allows for social norms that penalize women who earn more than their husbands. Given the inflexibility of regular jobs and social norms, women are more likely to choose non-regular jobs or not to work, and allocate a larger share of their hours for home production for their households. The model can account for all the observed gender gaps in labor force participation, 33% in occupational choices, 74% in labor hours, and 34% in wages. Through the lens of the model, the inflexibility of regular jobs explains almost all the gaps in occupational choices and wages, while social norms that penalize women who earn more than their husbands account for all the gap in the participation rate and half of the gap in hours worked."
  },
  {
    "objectID": "research/common-cheetah/index.html#bibtex-citation",
    "href": "research/common-cheetah/index.html#bibtex-citation",
    "title": "Why not Choose a Better Job?",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@unpublished{Yanagimoto:2023,\n    Author = {Kazuharu Yanagimoto},\n    Note = {Working paper},\n    Title = {Why not Choose a Better Job? Flexibility, Social Norms, and Gender Gaps in Japan},\n    Year = {2023}}"
  },
  {
    "objectID": "research/hetero2wfe/index.html#abstract",
    "href": "research/hetero2wfe/index.html#abstract",
    "title": "Estimating Individual-level Child-penalties for (Improved) Childcare Policy Evaluation",
    "section": "Abstract",
    "text": "Abstract"
  },
  {
    "objectID": "research/hetero2wfe/index.html#important-table-figure",
    "href": "research/hetero2wfe/index.html#important-table-figure",
    "title": "Estimating Individual-level Child-penalties for (Improved) Childcare Policy Evaluation",
    "section": "Important table & figure",
    "text": "Important table & figure"
  },
  {
    "objectID": "research/common-cheetah/index.html#important-links",
    "href": "research/common-cheetah/index.html#important-links",
    "title": "Why not Choose a Better Job?",
    "section": "Important links",
    "text": "Important links\n\nPaper (will be uploaded soon)\nSlides (SAEe2022)\nPDF Slides (SAEe2022)"
  },
  {
    "objectID": "blog/2023/06/02/quarto_com_model/index.html",
    "href": "blog/2023/06/02/quarto_com_model/index.html",
    "title": "Quarto Communication for Economic Models",
    "section": "",
    "text": "For \\(t = 1, \\dots, T\\), households solve \\[\nV(t, e, x) = \\max_{c, x'} \\frac{c^{1 - \\sigma}}{1 - \\sigma} + \\beta \\mathbb{E}V(t + 1, e', x')\n\\] \\[\n\\begin{aligned}\nc + x' &\\le (1 + r)x + ew \\\\\n\\text{Pr}(e' | e) &= \\Gamma(e) \\\\\nc, x' &\\ge 0\n\\end{aligned}\n\\]\nusing Parameters\nusing QuantEcon\nusing Plots\nusing LaTeXStrings\nusing CSV\nusing DataFrames\n@with_kw struct Model\n    \n    # Grid for x\n    n‚Çì::Int = 30\n    xÃ≤::Float64 = 0.1\n    xÃÑ::Float64 = 4.0\n    x_grid::Vector{Float64} = range(start = xÃ≤, stop = xÃÑ, length = n‚Çì)\n    \n    # Grid for e: parameters for Tauchen\n    n‚Çë::Int = 10\n    œÉ_Œµ::Float64 = 0.02058\n    Œª_Œµ::Float64 = 0.99\n    m::Float64 = 1.5\n    mc::MarkovChain = tauchen(n‚Çë, Œª_Œµ, œÉ_Œµ, 0.0, m)\n    e_grid::Vector{Float64} = exp.(mc.state_values)\n    P::Matrix{Float64} = mc.p\n\n    # Utility function\n    œÉ::Float64 = 2.0\n    Œ≤::Float64 = 0.97\n    T::Int = 10\n\n    # Prices\n    r::Float64 = 0.07\n    w::Float64 = 5.0\n    \nend\n\nu(c, m::Model) = isone(m.œÉ) ? log(c) : c^(1 - m.œÉ) / (1 - m.œÉ);\nfunction solve(m::Model)\n\n    @unpack T, n‚Çì, n‚Çë, r, w, Œ≤, P, x_grid, e_grid = m\n\n    V = zeros(n‚Çì, n‚Çë, T)\n\n    for t = T:-1:1, i‚Çì= 1:n‚Çì, i‚Çë = 1:n‚Çë\n        \n        utility = -Inf\n        for i‚Çì‚Ä≤ = 1:n‚Çì\n            \n            expected = (t == T) ? 0.0 : \n                sum(P[i‚Çë, i‚Çë‚Ä≤] * V[i‚Çì‚Ä≤, i‚Çë‚Ä≤, t+1] for i‚Çë‚Ä≤ = 1:n‚Çë)\n            c = (1 + r) * x_grid[i‚Çì] + e_grid[i‚Çë] * w - x_grid[i‚Çì‚Ä≤]\n            \n            if c &gt; 0\n                utility = max(u(c, m) + Œ≤ * expected, utility)\n            end\n    \n        end\n    \n        V[i‚Çì, i‚Çë, t] = utility\n    end\n\n    return V\nend\n\nsolve (generic function with 1 method)\nm = Model()\nV = solve(m);\nps = []\n\nyÃ≤, yÃÑ = minimum(V) * 1.1, maximum(V) + 0.1\nfor (i, t) ‚àà enumerate([1, 4, 7, 10])\n    \n    p = plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\n    push!(ps, p)\nend\n\nplot(ps...)"
  },
  {
    "objectID": "blog/2023/06/02/quarto_com_model/test.html",
    "href": "blog/2023/06/02/quarto_com_model/test.html",
    "title": "Kazuharu Yanagimoto",
    "section": "",
    "text": "using Plots"
  },
  {
    "objectID": "blog/2023/06/02/quarto_com_model/index.html#gif",
    "href": "blog/2023/06/02/quarto_com_model/index.html#gif",
    "title": "Quarto Communication for Economic Models",
    "section": "GIF",
    "text": "GIF\n\nanim = @animate for t = 1:10\n    plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\nend\n\ngif(anim, tempname() * \".gif\", fps = 1)"
  },
  {
    "objectID": "blog/2023/06/02/quarto_com_model/index.html#observable-js",
    "href": "blog/2023/06/02/quarto_com_model/index.html#observable-js",
    "title": "Quarto Communication for Economic Models",
    "section": "Observable JS",
    "text": "Observable JS\n\nfunction solve_partial(r, w)\n    m = Model(r = r, w = w)\n    V = solve(m)\n    return [\n        (x = x, ie = i‚Çë, t = t, V = V[i‚Çì, i‚Çë, t], r = m.r, w = m.w)\n        for (i‚Çì, x) ‚àà enumerate(m.x_grid)\n        for (i‚Çë, e) ‚àà enumerate(m.e_grid) if i‚Çë ‚àà [1, 5, 10]\n        for t ‚àà 1:m.T\n    ]\nend\n\nsolve_partial (generic function with 1 method)\n\n\n\nres = Iterators.flatten([solve_partial(r, w) for r ‚àà 0.01:0.02:0.15 for w ‚àà 1.0:0.5:10.0])\ndf = DataFrame(res)\nd = Dict(1 =&gt; \"e‚ÇÅ\", 5 =&gt; \"e‚ÇÖ\", 10 =&gt; \"e‚ÇÅ‚ÇÄ\")\ndf.lbl = [d[i] for i in df.ie]\nCSV.write(\"data.csv\", df);\n\n\nviewof t = Inputs.range(\n  [1, 10], \n  {value: 1, step: 1, label: \"t\"}\n)\nviewof r = Inputs.range(\n  [0.01, 0.15], \n  {value: 0.07, step: 0.02, label: \"r\"}\n)\nviewof w = Inputs.range(\n  [1.0, 10.0], \n  {value: 5.0, step: 0.5, label: \"w\"}\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndata = FileAttachment(\"data.csv\").csv()\nfiltered = data.filter(function(sim) {\n    return sim.r == r && sim.w == w && sim.t == t\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlot.plot({\n    marginLeft: 50,\n    height: 400,\n    color: {domain: [\"e‚ÇÅ\", \"e‚ÇÖ\", \"e‚ÇÅ‚ÇÄ\"], legend: true},\n    x: {domain: [0.0, 4.0]},\n    y: {domain: [-2.2, 0.0]},\n    marks: [\n        Plot.lineY(filtered, {x: \"x\", y: \"V\", stroke: \"lbl\"}),\n    ]\n})"
  },
  {
    "objectID": "blog/2023/06/02/quarto_com_model/index.html#plotly-js",
    "href": "blog/2023/06/02/quarto_com_model/index.html#plotly-js",
    "title": "Quarto Communication for Economic Models",
    "section": "Plotly JS",
    "text": "Plotly JS\n\nplotlyjs()\n\n\nThe WebIO Jupyter extension was not detected. See the\n\n    WebIO Jupyter integration documentation\n\nfor more information.\n\n\n\nPlots.PlotlyJSBackend()"
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html",
    "href": "blog/2023/06/10/quarto_com_model/index.html",
    "title": "Scientific Communication with Quarto: Economic Model Case",
    "section": "",
    "text": "Notebook coding (Jupyter, Rmarkdown, and Quarto) has gotten popular in the last decade. It allows us to tell a story with code and data, and it makes scientific communication more transparent and reproducible. I use Quarto to share my current results with my supervisor and coauthors, especially when I am in a playground stage of the project.\nWhile it is naturally useful in that it is an easy tool for creating reports, exploiting its HTML feature, we can enrich communication even further. Here, I introduce my use case of GIF and Observable JS for economic models with Julia.\nImagine that you are working on a very simple life-cycle model:\nFor \\(t = 1, \\dots, T\\), households solve \\[\nV(t, e, x) = \\max_{c, x'} \\frac{c^{1 - \\sigma}}{1 - \\sigma} + \\beta \\mathbb{E}V(t + 1, e', x')\n\\] \\[\n\\begin{aligned}\nc + x' &\\le (1 + r)x + ew \\\\\n\\text{Pr}(e' | e) &= \\Gamma(e) \\\\\nc, x' &\\ge 0\n\\end{aligned}\n\\]\nSee the following code for the parameters and the solution algorithm.\n\n\nCode\nusing Parameters\nusing QuantEcon\nusing Plots\nusing LaTeXStrings\nusing CSV\nusing DataFrames\n\n@with_kw struct Model\n    \n    # Grid for x\n    n‚Çì::Int = 30\n    xÃ≤::Float64 = 0.1\n    xÃÑ::Float64 = 4.0\n    x_grid::Vector{Float64} = range(start = xÃ≤, stop = xÃÑ, length = n‚Çì)\n    \n    # Grid for e: parameters for Tauchen\n    n‚Çë::Int = 10\n    œÉ_Œµ::Float64 = 0.02058\n    Œª_Œµ::Float64 = 0.99\n    m::Float64 = 1.5\n    mc::MarkovChain = tauchen(n‚Çë, Œª_Œµ, œÉ_Œµ, 0.0, m)\n    e_grid::Vector{Float64} = exp.(mc.state_values)\n    P::Matrix{Float64} = mc.p\n\n    # Utility function\n    œÉ::Float64 = 2.0\n    Œ≤::Float64 = 0.97\n    T::Int = 10\n\n    # Prices\n    r::Float64 = 0.07\n    w::Float64 = 5.0\n    \nend\n\nu(c, m::Model) = isone(m.œÉ) ? log(c) : c^(1 - m.œÉ) / (1 - m.œÉ);\n\nfunction solve(m::Model)\n\n    @unpack T, n‚Çì, n‚Çë, r, w, Œ≤, P, x_grid, e_grid = m\n\n    V = zeros(n‚Çì, n‚Çë, T)\n\n    for t = T:-1:1, i‚Çì= 1:n‚Çì, i‚Çë = 1:n‚Çë\n        \n        utility = -Inf\n        for i‚Çì‚Ä≤ = 1:n‚Çì\n            \n            expected = (t == T) ? 0.0 : \n                sum(P[i‚Çë, i‚Çë‚Ä≤] * V[i‚Çì‚Ä≤, i‚Çë‚Ä≤, t+1] for i‚Çë‚Ä≤ = 1:n‚Çë)\n            c = (1 + r) * x_grid[i‚Çì] + e_grid[i‚Çë] * w - x_grid[i‚Çì‚Ä≤]\n            \n            if c &gt; 0\n                utility = max(u(c, m) + Œ≤ * expected, utility)\n            end\n    \n        end\n    \n        V[i‚Çì, i‚Çë, t] = utility\n    end\n\n    return V\nend\n\nm = Model()\nV = solve(m);\n\n\nA traditional way to show the value function is to plot for selected \\(e\\) and \\(t\\).\n\n\nCode\nps = []\n\nyÃ≤, yÃÑ = minimum(V) * 1.1, maximum(V) + 0.1\nfor (i, t) ‚àà enumerate([1, 4, 7, 10])\n    \n    p = plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\n    push!(ps, p)\nend\n\nplot(ps...)\n\n\n\n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis is not bad, however, we can add more information by using GIF."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#gif",
    "href": "blog/2023/06/10/quarto_com_model/index.html#gif",
    "title": "Scientific Communication with Quarto: Economic Model Case",
    "section": "GIF",
    "text": "GIF\nWhile this is not so famous, we can create a GIF animation just by adding @animate macro in Julia.\n\n\nCode\nanim = @animate for t = 1:10\n    plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\nend\n\ngif(anim, \"img/anim.gif\", fps = 1)\n\n\n\n\n\nSee? This is very intuitive and informative! But if you are interested in the changes with multiple parameters, you may want to try Observable JS."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#plotly-js",
    "href": "blog/2023/06/10/quarto_com_model/index.html#plotly-js",
    "title": "Quarto Communication for Economic Models",
    "section": "Plotly JS",
    "text": "Plotly JS\n\nusing PlotlyJS\n\nfunction frame_args(;duration=400, redraw=false) \n    #function to set frame attributes\n    #redraw must be set on true for any other trace type different from scatter\n    attr(\n         frame_duration= duration,\n         mode= \"immediate\",\n         fromcurrent=true,\n         redraw=redraw, \n         transition=attr(duration= duration, easing=\"linear\")\n        )\nend\n\ndf = DataFrame(\n    [(x = x, ie = i‚Çë, t = t, V = V[i‚Çì, i‚Çë, t])\n      for (i‚Çì, x) ‚àà enumerate(m.x_grid) for i‚Çë ‚àà 1:m.n‚Çë if i‚Çë ‚àà [1, 5, 10] for t ‚àà 1:m.T])\ndf1 = df[df.t .== 1, :]\nfig = Plot(df1, kind=\"scatter\", mode=\"lines\", x=:x, y=:V, group=:ie,\n    layout = Layout(title_text = \"t = 1\"))\n\nframes = Vector{PlotlyFrame}(undef, m.T)\nfor t ‚àà 1:m.T\n    dft = df[df.t .== t, :]\n    figt = Plot(dft, kind=\"scatter\", mode=\"lines\", x=:x, y=:V, group=:ie,)\n    frames[t] = PlotlyBase.frame(\n        data = [attr(x = figt.data[j].x, y = figt.data[j].y) for j ‚àà 1:length([1, 5, 10])],\n        layout = attr(title_text = \"t = $t\"),\n        name = \"frame$t\",\n        traces = [0, 1, 2, 3]\n    )\nend\nfig.frames = frames\nrelayout!(fig,\n    sliders = [\n        attr(active = 0, \n             len = 0.9,\n             pad = attr(b= 10, t= 60),\n             x = 0.1, y = 0,\n             xanchor = \"left\",\n             yanchor = \"top\",\n             steps = [attr(label = \"$t\",\n                            method = \"animate\",\n                            args = [[\"frame$t\"], frame_args(;)]) for t ‚àà 1:m.T])],\n    updatemenus = [\n        attr(type= \"buttons\",\n             buttons= [\n                attr(args= [nothing, frame_args(;)], label= \"‚ñ∂\", method= \"animate\"),\n                attr(args= [[nothing], frame_args(;duration=0)], label= \"‚óº\", method= \"animate\")],\n            pad = attr(r=10, t=70),\n            direction= \"left\",\n            x = 0.1, y = 0,\n            xanchor= \"right\",\n            yanchor= \"top\"\n        )]\n)\ndisplay(fig)"
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#observable-js",
    "href": "blog/2023/06/10/quarto_com_model/index.html#observable-js",
    "title": "Scientific Communication with Quarto: Economic Model Case",
    "section": "Observable JS",
    "text": "Observable JS\nObservable is a JavaScript notebook that allows us to create interactive visualizations. It is free and open-source, and we can embed it in our Quarto document. Since the Observable is JavaScript-based, we can put an interactive (dynamic) visualization in static HTML documents!\nFor example, you are now interested in the changes in the value function with \\(r\\) and \\(w\\). To implement it in Observable, we first need to create a CSV file1 that contains the results of the simulation.\n\n\nCode\nfunction solve_partial(r, w)\n    m = Model(r = r, w = w)\n    V = solve(m)\n    return [\n        (x = x, ie = i‚Çë, t = t, V = V[i‚Çì, i‚Çë, t], r = m.r, w = m.w)\n        for (i‚Çì, x) ‚àà enumerate(m.x_grid)\n        for (i‚Çë, e) ‚àà enumerate(m.e_grid) if i‚Çë ‚àà [1, 5, 10]\n        for t ‚àà 1:m.T\n    ]\nend\n\nres = Iterators.flatten([solve_partial(r, w) for r ‚àà 0.01:0.02:0.15 for w ‚àà 2.0:0.5:10.0])\ndf = DataFrame(res)\nd = Dict(1 =&gt; \"e‚ÇÅ\", 5 =&gt; \"e‚ÇÖ\", 10 =&gt; \"e‚ÇÅ‚ÇÄ\")\ndf.lbl = [d[i] for i in df.ie]\nCSV.write(\"data.csv\", df);\n\n\nThis CSV file is then loaded in Observable and filtered by the parameters.2\n\n\nCode\ndata = FileAttachment(\"data.csv\").csv()\nfiltered = data.filter(function(sim) {\n    return sim.r == r && sim.w == w && sim.t == t\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAdding sliders and a plot, we have a cool interactive visualization!\n\n\nCode\nviewof t = Inputs.range(\n  [1, 10], \n  {value: 1, step: 1, label: \"t\"}\n)\nviewof r = Inputs.range(\n  [0.01, 0.15], \n  {value: 0.07, step: 0.02, label: \"r\"}\n)\nviewof w = Inputs.range(\n  [2.0, 10.0], \n  {value: 5.0, step: 0.5, label: \"w\"}\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nPlot.plot({\n    marginLeft: 50,\n    height: 400,\n    color: {domain: [\"e‚ÇÅ\", \"e‚ÇÖ\", \"e‚ÇÅ‚ÇÄ\"], legend: true},\n    x: {domain: [0.0, 4.0]},\n    y: {domain: [-5.5, 0.0]},\n    marks: [\n        Plot.lineY(filtered, {x: \"x\", y: \"V\", stroke: \"lbl\"}),\n    ]\n})\n\n\n\n\n\n\n\nHappy Quarto life ü•Ç!"
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/test.html",
    "href": "blog/2023/06/10/quarto_com_model/test.html",
    "title": "\nPlotlyJS version of gapminder data animation\n",
    "section": "",
    "text": "using PlotlyJS, CSV, DataFrames\n\nfunction frame_args(;duration=400, redraw=false) \n    #function to set frame attributes\n    #redraw must be set on true for any other trace type different from scatter\n    attr(\n         frame_duration= duration,\n         mode= \"immediate\",\n         fromcurrent=true,\n         redraw=redraw, \n         transition=attr(duration= duration, easing=\"linear\")\n        )\n    end \n\ndf = dataset(DataFrame, \"gapminder\")\ndf_1952 = df[df.year .== 1952, :]\nfig =Plot(\n    df_1952,\n    x=:gdpPercap, y=:lifeExp, color=:continent , mode=\"markers\", hovertext=:country,\n    hovertemplate =\"&lt;b&gt;%{hovertext}&lt;/b&gt;&lt;br&gt;year: 1952\"*\n    \"&lt;br&gt;gdpPercap: %{x}&lt;br&gt;lifeExp: %{y}&lt;br&gt;pop: %{marker.size}&lt;extra&gt;&lt;/extra&gt;\",\n    marker=attr(size=:pop, sizeref=435928, sizemode=\"area\"),\n    Layout(\n        title_text =\"Life Expectancy vs Per Capita GDP (1952)\", title_x = 0.5,\n        xaxis=attr(\n            type=\"log\", range=[2, 5],\n            title_text=\"GDP per capita (2000 dollars)\"),\n        yaxis=attr(title_text=\"Life Expectancy (years)\", range=[25, 90]),\n          ));\ncontinents=[\"Africa\", \"Americas\", \"Asia\", \"Europe\", \"Oceania\"]\nyears = collect(1952:5:2007)\nn_frames= length(years)\nframes  = Vector{PlotlyFrame}(undef, n_frames)\n\nfor k in 1:length(years)\n    dfr= df[df.year .== years[k], :]\n    figaux=Plot(\n            dfr,\n            x=:gdpPercap, y=:lifeExp, color=:continent , mode=\"markers\", hovertext=:country,\n            marker=attr(size=:pop))  \n    frames[k] = frame(data=[attr(x=figaux.data[j].x,\n                                 y=figaux.data[j].y,\n                                 hovertext=figaux.data[j].hovertext,\n                                 hovertemplate =\"&lt;b&gt;%{hovertext}&lt;/b&gt;&lt;br&gt;year: $(years[k])\"*\n                                 \"&lt;br&gt;gdpPercap: %{x}&lt;br&gt;lifeExp: %{y}\"*\n                                 \"&lt;br&gt;pop: %{marker.size}&lt;extra&gt;&lt;/extra&gt;\",\n                                 marker_size=figaux.data[j].marker_size, \n                                 marker_color=figaux.data[j].marker_color,\n                                 ) for j in 1:length(continents)],\n                      layout=attr(title_text =\"Life Expectancy vs Per Capita GDP ($(years[k]))\"), #update title\n                      name=\"fr$k\", #frame name; it is passed to slider \n                      traces=[0, 1, 2, 3, 4] # the above 5-vector, data, is updating the traces fig.data[1], ....fig.data[5] \n                        ) \nend    \nfig.frames=frames \nrelayout!(fig, \n          sliders =[attr(active=0, \n                         len= 0.9,\n                         pad= attr(b= 10, t= 60),\n                         x= 0.1, y=0, #slider starting position\n                         xanchor= \"left\",\n                         yanchor= \"top\",\n                         steps=[attr(label=\"$(years[k])\",\n                                     method=\"animate\",\n                                     args=[[\"fr$k\"], # match the frame[:name]\n                                           frame_args(;)\n                                 ]) for k in 1:n_frames ]\n             )],\n           updatemenus=[\n            attr(type= \"buttons\",\n                 buttons= [\n                    attr(\n                        args= [nothing, frame_args(;)],\n                        label= \"&#9654;\",\n                        method= \"animate\",\n                    ),\n                    attr(\n                        args= [[nothing], frame_args(;duration=0)],\n                        label= \"&#9724;\",\n                        method= \"animate\",\n                    )\n                ],\n                pad = attr(r=10, t=70),\n                direction= \"left\",\n                x=0.1, y=0, #button position \n                xanchor= \"right\",\n                yanchor= \"top\"\n            )\n        ])\ndisplay(fig)                                            \n\n\nusing PlotlyJS, CSV, DataFrames\n\nfunction frame_args(;duration=400, redraw=false) \n    #function to set frame attributes\n    #redraw must be set on true for any other trace type different from scatter\n    attr(\n         frame_duration= duration,\n         mode= \"immediate\",\n         fromcurrent=true,\n         redraw=redraw, \n         transition=attr(duration= duration, easing=\"linear\")\n        )\n    end \n\ndf = dataset(DataFrame, \"gapminder\")\ndf_1952 = df[df.year .== 1952, :]\nfig =Plot(\n    df_1952,\n    x=:gdpPercap, y=:lifeExp, color=:continent , mode=\"markers\", hovertext=:country,\n    hovertemplate =\"%{hovertext}year: 1952\"*\n    \"gdpPercap: %{x}lifeExp: %{y}pop: %{marker.size}\",\n    marker=attr(size=:pop, sizeref=435928, sizemode=\"area\"),\n    Layout(\n        title_text =\"Life Expectancy vs Per Capita GDP (1952)\", title_x = 0.5,\n        xaxis=attr(\n            type=\"log\", range=[2, 5],\n            title_text=\"GDP per capita (2000 dollars)\"),\n        yaxis=attr(title_text=\"Life Expectancy (years)\", range=[25, 90]),\n          ));\ncontinents=[\"Africa\", \"Americas\", \"Asia\", \"Europe\", \"Oceania\"]\nyears = collect(1952:5:2007)\nn_frames= length(years)\nframes  = Vector{PlotlyFrame}(undef, n_frames)\n\nfor k in 1:length(years)\n    dfr= df[df.year .== years[k], :]\n    figaux=Plot(\n            dfr,\n            x=:gdpPercap, y=:lifeExp, color=:continent , mode=\"markers\", hovertext=:country,\n            marker=attr(size=:pop))  \n    frames[k] = frame(data=[attr(x=figaux.data[j].x,\n                                 y=figaux.data[j].y,\n                                 hovertext=figaux.data[j].hovertext,\n                                 hovertemplate =\"%{hovertext}year: $(years[k])\"*\n                                 \"gdpPercap: %{x}lifeExp: %{y}\"*\n                                 \"pop: %{marker.size}\",\n                                 marker_size=figaux.data[j].marker_size, \n                                 marker_color=figaux.data[j].marker_color,\n                                 ) for j in 1:length(continents)],\n                      layout=attr(title_text =\"Life Expectancy vs Per Capita GDP ($(years[k]))\"), #update title\n                      name=\"fr$k\", #frame name; it is passed to slider \n                      traces=[0, 1, 2, 3, 4] # the above 5-vector, data, is updating the traces fig.data[1], ....fig.data[5] \n                        ) \nend    \nfig.frames=frames \nrelayout!(fig, \n          sliders =[attr(active=0, \n                         len= 0.9,\n                         pad= attr(b= 10, t= 60),\n                         x= 0.1, y=0, #slider starting position\n                         xanchor= \"left\",\n                         yanchor= \"top\",\n                         steps=[attr(label=\"$(years[k])\",\n                                     method=\"animate\",\n                                     args=[[\"fr$k\"], # match the frame[:name]\n                                           frame_args(;)\n                                 ]) for k in 1:n_frames ]\n             )],\n           updatemenus=[\n            attr(type= \"buttons\",\n                 buttons= [\n                    attr(\n                        args= [nothing, frame_args(;)],\n                        label= \"‚ñ∂\",\n                        method= \"animate\",\n                    ),\n                    attr(\n                        args= [[nothing], frame_args(;duration=0)],\n                        label= \"‚óº\",\n                        method= \"animate\",\n                    )\n                ],\n                pad = attr(r=10, t=70),\n                direction= \"left\",\n                x=0.1, y=0, #button position \n                xanchor= \"right\",\n                yanchor= \"top\"\n            )\n        ])\ndisplay(fig)"
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#quarto-is-not-just-for-static-reports",
    "href": "blog/2023/06/10/quarto_com_model/index.html#quarto-is-not-just-for-static-reports",
    "title": "Scientific Communication with Quarto: Economic Model Case",
    "section": "",
    "text": "Notebook coding (Jupyter, Rmarkdown, and Quarto) has gotten popular in the last decade. It allows us to tell a story with code and data, and it makes scientific communication more transparent and reproducible. I use Quarto to share my current results with my supervisor and coauthors, especially when I am in a playground stage of the project.\nWhile it is naturally useful in that it is an easy tool for creating reports, exploiting its HTML feature, we can enrich communication even further. Here, I introduce my use case of GIF and Observable JS for economic models with Julia.\nImagine that you are working on a very simple life-cycle model:\nFor \\(t = 1, \\dots, T\\), households solve \\[\nV(t, e, x) = \\max_{c, x'} \\frac{c^{1 - \\sigma}}{1 - \\sigma} + \\beta \\mathbb{E}V(t + 1, e', x')\n\\] \\[\n\\begin{aligned}\nc + x' &\\le (1 + r)x + ew \\\\\n\\text{Pr}(e' | e) &= \\Gamma(e) \\\\\nc, x' &\\ge 0\n\\end{aligned}\n\\]\nSee the following code for the parameters and the solution algorithm.\n\n\nCode\nusing Parameters\nusing QuantEcon\nusing Plots\nusing LaTeXStrings\nusing CSV\nusing DataFrames\n\n@with_kw struct Model\n    \n    # Grid for x\n    n‚Çì::Int = 30\n    xÃ≤::Float64 = 0.1\n    xÃÑ::Float64 = 4.0\n    x_grid::Vector{Float64} = range(start = xÃ≤, stop = xÃÑ, length = n‚Çì)\n    \n    # Grid for e: parameters for Tauchen\n    n‚Çë::Int = 10\n    œÉ_Œµ::Float64 = 0.02058\n    Œª_Œµ::Float64 = 0.99\n    m::Float64 = 1.5\n    mc::MarkovChain = tauchen(n‚Çë, Œª_Œµ, œÉ_Œµ, 0.0, m)\n    e_grid::Vector{Float64} = exp.(mc.state_values)\n    P::Matrix{Float64} = mc.p\n\n    # Utility function\n    œÉ::Float64 = 2.0\n    Œ≤::Float64 = 0.97\n    T::Int = 10\n\n    # Prices\n    r::Float64 = 0.07\n    w::Float64 = 5.0\n    \nend\n\nu(c, m::Model) = isone(m.œÉ) ? log(c) : c^(1 - m.œÉ) / (1 - m.œÉ);\n\nfunction solve(m::Model)\n\n    @unpack T, n‚Çì, n‚Çë, r, w, Œ≤, P, x_grid, e_grid = m\n\n    V = zeros(n‚Çì, n‚Çë, T)\n\n    for t = T:-1:1, i‚Çì= 1:n‚Çì, i‚Çë = 1:n‚Çë\n        \n        utility = -Inf\n        for i‚Çì‚Ä≤ = 1:n‚Çì\n            \n            expected = (t == T) ? 0.0 : \n                sum(P[i‚Çë, i‚Çë‚Ä≤] * V[i‚Çì‚Ä≤, i‚Çë‚Ä≤, t+1] for i‚Çë‚Ä≤ = 1:n‚Çë)\n            c = (1 + r) * x_grid[i‚Çì] + e_grid[i‚Çë] * w - x_grid[i‚Çì‚Ä≤]\n            \n            if c &gt; 0\n                utility = max(u(c, m) + Œ≤ * expected, utility)\n            end\n    \n        end\n    \n        V[i‚Çì, i‚Çë, t] = utility\n    end\n\n    return V\nend\n\nm = Model()\nV = solve(m);\n\n\nA traditional way to show the value function is to plot for selected \\(e\\) and \\(t\\).\n\n\nCode\nps = []\n\nyÃ≤, yÃÑ = minimum(V) * 1.1, maximum(V) + 0.1\nfor (i, t) ‚àà enumerate([1, 4, 7, 10])\n    \n    p = plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\n    push!(ps, p)\nend\n\nplot(ps...)\n\n\n\n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis is not bad, however, we can add more information by using GIF."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#footnotes",
    "href": "blog/2023/06/10/quarto_com_model/index.html#footnotes",
    "title": "Scientific Communication with Quarto: Economic Model Case",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nYou can use CSV, TSV, JSON, Arrow (uncompressed), and SQLite as data input. See Data Sources‚Ü©Ô∏é\nWhile the parameters r, w, and t are defined in the next cell, the order of the Observable JS cells do not change the results.‚Ü©Ô∏é"
  }
]