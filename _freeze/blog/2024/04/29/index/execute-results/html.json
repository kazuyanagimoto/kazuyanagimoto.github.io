{
  "hash": "f7c7b3a6aea25b37e8c2101de81cd5a2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A Gamechanger of Creating Tables in R: tinytable\"\ndate: 2024-04-29\nauthor: Kazuharu Yanagimoto\ncategories: [R, Quarto, LaTeX]\nimage: img/table_reg.svg\ntoc: true\n---\n\n\n\n\n## `kableExtra` or `gt`? No, `tinytable`!\n\nIn recent years, `kableExtra` and `gt` have been popular packages for creating tables in R.\nI have used `kableExtra` for tables in a (LaTeX compiled) paper,\nand `gt` for tables in a (HTML compiled) slides,\nand I taught it in my [R workshop](https://github.com/kazuyanagimoto/workshop-r-2022).\nHowever, I found a new package called [tinytable](https://vincentarelbundock.github.io/tinytable/) that is more flexible and easier to use than the other two packages. \nIn this post, I will introduce how to use `tinytable` to create tables for LaTeX documents as an updated section of my workshop.\n\n### What is `tinytable`?\n\nThe `tinytable` is a small (zero-dependencies, only uses baseR!) but powerful package that provides a simple and flexible way to create tables in R.\nThis package is developed by [Vincent Arel-Bundock](https://github.com/vincentarelbundock), the maintainer of the `modelsummary` package,\nand is designed to work seamlessly with `modelsummary`.\n\n\n## An Example of Creating Tables with `tinytable`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(tinytable)\n```\n:::\n\n\n\n\nI use [the Madrid traffic accident dataset](https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b294f1a5a0/?vgnextoid=7c2943010d9c3610VgnVCM2000001f4a900aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default),\nwhich is from my workshop.\nYou can find the [downloading](https://github.com/kazuyanagimoto/kazuyanagimoto.github.io/blob/main/blog/2024/04/29/download_accident_bike.R) and [cleaning](https://github.com/kazuyanagimoto/kazuyanagimoto.github.io/blob/main/blog/2024/04/29/clean_accident_bike.R) codes in my blog repository.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndir_post <- here::here(\"blog/2024/04/29/\")\ndata <- nanoparquet::read_parquet(file.path(dir_post, \"data\", \"cleaned.parquet\")) |>\n  mutate(is_died = injury8 == \"Died within 24 hours\",\n         is_hospitalized = injury8 %in% c(\"Hospitalization after 24 hours\",\n                                          \"Hospitalization within 24 hours\",\n                                          \"Died within 24 hours\"))\n```\n:::\n\n\n\n\nI will create a table that shows the number of accidents.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntab_count <- data |>\n  filter(!is.na(weather), !is.na(gender)) |>\n  summarize(n = n(), .by = c(year, gender, weather)) |>  \n  pivot_wider(names_from = c(gender, year), values_from = n) |>\n  arrange(weather) |>\n  select(weather, starts_with(\"Men\"), starts_with(\"Women\"))\n\ntab_count\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 11\n  weather   Men_2019 Men_2020 Men_2021 Men_2022 Men_2023 Women_2019 Women_2020\n  <fct>        <int>    <int>    <int>    <int>    <int>      <int>      <int>\n1 sunny        24399    14969    19208    20679    22451      11971       6958\n2 cloud         1159     1190     1325     2082     2011        555        554\n3 soft rain     2126     1198     1281     1930     1224       1068        542\n4 hard rain      386      202      386      527      317        222         96\n5 snow             2        2      124        5       NA         NA         NA\n6 hail            11        5        6        4        3          3          3\n# ℹ 3 more variables: Women_2021 <int>, Women_2022 <int>, Women_2023 <int>\n```\n\n\n:::\n:::\n\n\n\n\nYou can create a table by using the `tt()` function.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntt_count <- tab_count |>\n  `colnames<-`(c(\"\", rep(2019:2023, 2))) |>\n  tt() |>\n  group_tt(i = list(\"Good Weather\" = 1, \"Bad Weather\" = 3),\n           j = list(\"Men\" = 2:6, \"Women\" = 7:11)) |>\n  style_tt(i = c(1, 4), bold = TRUE) |>\n  format_tt(replace = \"-\")\n\ntt_count |>\n  theme_tt(\"tabular\") |>\n  save_tt(file.path(dir_post, \"tex\", \"table_count.tex\"),\n          overwrite = TRUE)\n```\n:::\n\n\n\n\nTo format the table as an table in a paper,\n\n- `group_tt()` groups the rows and columns as `multirow` and `multicolumn` in $\\LaTeX$.\n- `style_tt()` styles the rows as bold, italic, etc.\n- `format_tt()` formats the cells as numeric, percentage, etc. `replace` argument replaces the `NA` cells with the specified character.\n- You cannot change the column names in the `tt()` function, so you need to use `colnames<-()`, related to the issue [#194](https://github.com/vincentarelbundock/tinytable/issues/194)\n- To save the table as a _plain_ table (without `\\begin{table}` and `\\end{table}`), use `theme_tt(\"tabular\")`.\n\n\n\n\n\n\n\n\n\n\n\n![Number of Persons Involved in Traffic Accidents](img/table_count.svg){fig-align=\"center\"}\n\n### A trick to insert a LaTeX table in a Quarto document\n\nIn the previous section, I inserted a $\\LaTeX$ table by SVG format.\nActually, I converted a `tinytable` object to a svg figure by the following two steps:\n\n**1. Save the `tinytable` object as a PDF file.**\n\n```{.r}\ntt_count |>\n  save_tt(file.path(dir_post, \"img\", \"table_count.pdf\"),\n          overwrite = TRUE)\n```\n\n`tinytable::save_tt()` is a powerful funtion that can save the `tinytable` object as a PDF file.\nIf the file extension is `.pdf`,\nthe function compile it as a single PDF file by `tinytex` package.\n\n**2. Convert the PDF file to a SVG file.**\n\n\n\n\n::: {.cell}\n\n````{.yaml .cell-code}\n```{bash}\n#!/bin/bash\npdf2svg img/table_count.pdf img/table_count.svg\n```\n````\n:::\n\n\n\n\n`pdf2svg` is a command line tool that converts a PDF file to a SVG file.\nAnd importantly, `knitr` can run the bash script in a code chunk.\n\n## Modelsummary\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(modelsummary)\nlibrary(fixest)\n```\n:::\n\n\n\n\nSince `tinytable` is designed to work seamlessly with `modelsummary`,\nyou can create a table of regression results by using `modelsummary` and `tinytable`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetFixest_fml(..ctrl = ~ type_person + positive_alcohol + positive_drug |\n                          age_c + gender)\nmodels <- list(\n    \"(1)\" = feglm(xpd(is_hospitalized ~ ..ctrl),\n                  family = binomial(logit), data = data),\n    \"(2)\" = feglm(xpd(is_hospitalized ~ ..ctrl + type_vehicle),\n                  family = binomial(logit), data = data),\n    \"(3)\" = feglm(xpd(is_hospitalized ~ ..ctrl + type_vehicle + weather),\n                  family = binomial(logit), data = data),\n    \"(4)\" = feglm(xpd(is_died ~ ..ctrl),\n                  family = binomial(logit), data = data),\n    \"(5)\" = feglm(xpd(is_died ~ ..ctrl + type_vehicle),\n                  family = binomial(logit), data = data),\n    \"(6)\" = feglm(xpd(is_died ~ ..ctrl + type_vehicle + weather),\n                  family = binomial(logit), data = data)\n)\n\nmodelsummary(models)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n      function styleCell_ac93ed52m703wapbgura(i, j, css_id) {\n        var table = document.getElementById(\"tinytable_ac93ed52m703wapbgura\");\n        table.rows[i].cells[j].classList.add(css_id);\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_ac93ed52m703wapbgura');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_ac93ed52m703wapbgura(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_ac93ed52m703wapbgura\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 0, 'tinytable_css_idbw0gg48n4mybkvjodnx2') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 1, 'tinytable_css_ida7ebyfk88sz56ujvr6nd') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 2, 'tinytable_css_ida7ebyfk88sz56ujvr6nd') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 3, 'tinytable_css_ida7ebyfk88sz56ujvr6nd') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 4, 'tinytable_css_ida7ebyfk88sz56ujvr6nd') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 5, 'tinytable_css_ida7ebyfk88sz56ujvr6nd') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(0, 6, 'tinytable_css_ida7ebyfk88sz56ujvr6nd') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(1, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(2, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(3, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(4, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(5, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 0, 'tinytable_css_iddtfaemk00c344sobrlsl') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 1, 'tinytable_css_id6jv9gdzjvpvjj9b6oy8m') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 2, 'tinytable_css_id6jv9gdzjvpvjj9b6oy8m') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 3, 'tinytable_css_id6jv9gdzjvpvjj9b6oy8m') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 4, 'tinytable_css_id6jv9gdzjvpvjj9b6oy8m') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 5, 'tinytable_css_id6jv9gdzjvpvjj9b6oy8m') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(6, 6, 'tinytable_css_id6jv9gdzjvpvjj9b6oy8m') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(7, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(8, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(9, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(10, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(11, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(12, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(13, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(14, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(15, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(16, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(17, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(18, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 0, 'tinytable_css_id23eb2qx8gfkkskr9rap8') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 1, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 2, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 3, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 4, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 5, 'tinytable_css_idste4cwdun3uihr56xoms') })\nwindow.addEventListener('load', function () { styleCell_ac93ed52m703wapbgura(19, 6, 'tinytable_css_idste4cwdun3uihr56xoms') })\n    </script>\n\n    <style>\n    .table td.tinytable_css_idbw0gg48n4mybkvjodnx2, .table th.tinytable_css_idbw0gg48n4mybkvjodnx2 {  text-align: left;  border-bottom: solid 0.1em #d3d8dc; }\n    .table td.tinytable_css_ida7ebyfk88sz56ujvr6nd, .table th.tinytable_css_ida7ebyfk88sz56ujvr6nd {  text-align: center;  border-bottom: solid 0.1em #d3d8dc; }\n    .table td.tinytable_css_id23eb2qx8gfkkskr9rap8, .table th.tinytable_css_id23eb2qx8gfkkskr9rap8 {  text-align: left; }\n    .table td.tinytable_css_idste4cwdun3uihr56xoms, .table th.tinytable_css_idste4cwdun3uihr56xoms {  text-align: center; }\n    .table td.tinytable_css_iddtfaemk00c344sobrlsl, .table th.tinytable_css_iddtfaemk00c344sobrlsl {  border-bottom: solid 0.05em black;  text-align: left; }\n    .table td.tinytable_css_id6jv9gdzjvpvjj9b6oy8m, .table th.tinytable_css_id6jv9gdzjvpvjj9b6oy8m {  border-bottom: solid 0.05em black;  text-align: center; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_ac93ed52m703wapbgura\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\"> </th>\n                <th scope=\"col\">(1)</th>\n                <th scope=\"col\">(2)</th>\n                <th scope=\"col\">(3)</th>\n                <th scope=\"col\">(4)</th>\n                <th scope=\"col\">(5)</th>\n                <th scope=\"col\">(6)</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td>type_personPassenger </td>\n                  <td>0.026    </td>\n                  <td>0.501    </td>\n                  <td>0.475    </td>\n                  <td>-1.697   </td>\n                  <td>-1.445   </td>\n                  <td>-1.440   </td>\n                </tr>\n                <tr>\n                  <td>                     </td>\n                  <td>(0.100)  </td>\n                  <td>(0.069)  </td>\n                  <td>(0.068)  </td>\n                  <td>(0.616)  </td>\n                  <td>(0.631)  </td>\n                  <td>(0.631)  </td>\n                </tr>\n                <tr>\n                  <td>type_personPedestrian</td>\n                  <td>2.117    </td>\n                  <td>2.381    </td>\n                  <td>2.298    </td>\n                  <td>2.190    </td>\n                  <td>2.326    </td>\n                  <td>2.327    </td>\n                </tr>\n                <tr>\n                  <td>                     </td>\n                  <td>(0.114)  </td>\n                  <td>(0.061)  </td>\n                  <td>(0.058)  </td>\n                  <td>(0.260)  </td>\n                  <td>(0.248)  </td>\n                  <td>(0.246)  </td>\n                </tr>\n                <tr>\n                  <td>positive_alcoholTRUE </td>\n                  <td>0.007    </td>\n                  <td>0.355    </td>\n                  <td>0.381    </td>\n                  <td>-13.685  </td>\n                  <td>-13.421  </td>\n                  <td>-13.460  </td>\n                </tr>\n                <tr>\n                  <td>                     </td>\n                  <td>(0.072)  </td>\n                  <td>(0.081)  </td>\n                  <td>(0.081)  </td>\n                  <td>(0.059)  </td>\n                  <td>(0.055)  </td>\n                  <td>(0.054)  </td>\n                </tr>\n                <tr>\n                  <td>Num.Obs.             </td>\n                  <td>197477   </td>\n                  <td>197369   </td>\n                  <td>176133   </td>\n                  <td>118462   </td>\n                  <td>116344   </td>\n                  <td>112659   </td>\n                </tr>\n                <tr>\n                  <td>R2                   </td>\n                  <td>0.056    </td>\n                  <td>0.170    </td>\n                  <td>0.163    </td>\n                  <td>0.103    </td>\n                  <td>0.142    </td>\n                  <td>0.145    </td>\n                </tr>\n                <tr>\n                  <td>R2 Adj.              </td>\n                  <td>0.056    </td>\n                  <td>0.169    </td>\n                  <td>0.162    </td>\n                  <td>0.087    </td>\n                  <td>0.116    </td>\n                  <td>0.116    </td>\n                </tr>\n                <tr>\n                  <td>R2 Within            </td>\n                  <td>0.048    </td>\n                  <td>0.055    </td>\n                  <td>0.053    </td>\n                  <td>0.070    </td>\n                  <td>0.070    </td>\n                  <td>0.071    </td>\n                </tr>\n                <tr>\n                  <td>R2 Within Adj.       </td>\n                  <td>0.048    </td>\n                  <td>0.055    </td>\n                  <td>0.052    </td>\n                  <td>0.067    </td>\n                  <td>0.067    </td>\n                  <td>0.068    </td>\n                </tr>\n                <tr>\n                  <td>AIC                  </td>\n                  <td>82581.4  </td>\n                  <td>72694.8  </td>\n                  <td>70519.4  </td>\n                  <td>2029.6   </td>\n                  <td>1960.3   </td>\n                  <td>1940.0   </td>\n                </tr>\n                <tr>\n                  <td>BIC                  </td>\n                  <td>82795.5  </td>\n                  <td>73204.5  </td>\n                  <td>71063.6  </td>\n                  <td>2213.6   </td>\n                  <td>2240.5   </td>\n                  <td>2248.2   </td>\n                </tr>\n                <tr>\n                  <td>RMSE                 </td>\n                  <td>0.23     </td>\n                  <td>0.22     </td>\n                  <td>0.24     </td>\n                  <td>0.03     </td>\n                  <td>0.04     </td>\n                  <td>0.04     </td>\n                </tr>\n                <tr>\n                  <td>Std.Errors           </td>\n                  <td>by: age_c</td>\n                  <td>by: age_c</td>\n                  <td>by: age_c</td>\n                  <td>by: age_c</td>\n                  <td>by: age_c</td>\n                  <td>by: age_c</td>\n                </tr>\n                <tr>\n                  <td>FE: age_c            </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                </tr>\n                <tr>\n                  <td>FE: gender           </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                </tr>\n                <tr>\n                  <td>FE: type_vehicle     </td>\n                  <td>         </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                  <td>         </td>\n                  <td>X        </td>\n                  <td>X        </td>\n                </tr>\n                <tr>\n                  <td>FE: weather          </td>\n                  <td>         </td>\n                  <td>         </td>\n                  <td>X        </td>\n                  <td>         </td>\n                  <td>         </td>\n                  <td>X        </td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n\nTo polish the table for a paper,\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncm  <-  c(\n    \"type_personPassenger\" = \"Passenger\",\n    \"type_personPedestrian\" = \"Pedestrian\",\n    \"positive_alcoholTRUE\" = \"Positive Alcohol\"\n)\n\ngm <- tibble(\n    raw = c(\"nobs\", \"FE: age_c\", \"FE: gender\",\n            \"FE: type_vehicle\", \"FE: weather\"),\n    clean = c(\"Observations\", \"FE: Age Group\", \"FE: Gender\",\n              \"FE: Type of Vehicle\", \"FE: Weather\"),\n    fmt = c(0, 0, 0, 0, 0)\n)\n\ntt_reg <- modelsummary(models,\n  stars = c(\"+\" = .1, \"*\" = .05, \"**\" = .01),\n  coef_map = cm,\n  gof_map = gm) |>\n  group_tt(j = list(\"Hospitalization\" = 2:4,\n                    \"Died within 24 hours\" = 5:7))\n\ntt_reg |>\n  theme_tt(\"tabular\") |>\n  save_tt(file.path(dir_post, \"tex\", \"table_reg.tex\"),\n          overwrite = TRUE)\n```\n:::\n\n\n\n\n- `coef_map` renames the coefficients\n- `gof_map` renames the goodness-of-fit statistics\n- Since the `modelsummary` function returns a `tinytable` object, you can use the `tinytable` functions to polish the table\n\n\n\n\n\n\n\n\n\n\n\n\n![Logit Regression of Hospitalization and Death within 24 Hours](img/table_reg.svg){fig-align=\"center\"}\n\n## Last Comments\n\nIn this post, I introduced the `tinytable` package, which is a gamechanger of creating tables in R.\nIn the wrangling process, I firmly believe that `tinytable` is more flexible and powerful than `kableExtra` and `gt` for the following reasons:\n\n- Covers almost all the features of `kableExtra` and `gt` & `gtExtras`. You can use `multirow` & `multicolumn`, highlight cells, format cells, and mathematical expressions\n- Allows to export tables not only in HTML and LaTeX but also in PDF (with `tinytex`) and Typst\n- Compiles faster than `kableExtra` and `gt`. I think this is because `tinytable` is a small package that only uses baseR\n\nHave a happy R life 🥂!",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}