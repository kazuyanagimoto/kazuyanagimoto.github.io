[
  {
    "objectID": "about/index.html",
    "href": "about/index.html",
    "title": "Hi There!",
    "section": "",
    "text": "I am an associate professor (tenure track) at Kobe University.\nMy research field is family economics, broadly speaking, I am interested in questions like:\nPh.D.¬†in Economics ‚àô CEMFI ‚àô 2025\nMaster in Economics and Finance ‚àô CEMFI ‚àô 2021\nBachelor in Economics ‚àô University of Tokyo ‚àô 2019"
  },
  {
    "objectID": "about/index.html#working-papers",
    "href": "about/index.html#working-papers",
    "title": "Hi There!",
    "section": "WORKING PAPERS",
    "text": "WORKING PAPERS\n\n\n    \n                \n            \n                \n                    \n                        \n                            A Quantitative Model of Non-Marriage and Fertility\n                        \n                    \n                    \n                        Bargaining over Leisure\n                    \n                    \n                    \n                    \n                        \n                        \n                            Marriage\n                        \n                        \n                        \n                            Fertility\n                        \n                        \n                        \n                            Japan\n                        \n                        \n                    \n                    \n                    \n                        \n                            \n                            \n                                \n                                \n                                \n                                     Latest WP\n                                \n                            \n                            \n                        \n                    \n                \n                \n                \n                \n                    \n                \n                \n            \n        \n    \n                \n            \n                \n                    \n                        \n                            Using Event Studies as an Outcome in Causal Analysis\n                        \n                    \n                    \n                        \n                    \n                    \n                        \n                        \n                        \n                            with\n                            \n                                \n                                    Dmitry Arkhangelsky\n                                \n                                \n                                    \n                                        and\n                                    \n                                \n                            \n                                \n                                    Tom Zohar\n                                \n                                \n                                    \n                                \n                            \n                        \n                    \n                    \n                    \n                        \n                        \n                            Two-way Fixed Effects\n                        \n                        \n                        \n                            Child Penalty\n                        \n                        \n                        \n                            Gender Gaps\n                        \n                        \n                        \n                            Netherlands\n                        \n                        \n                    \n                    \n                    \n                        \n                            \n                            \n                                \n                                \n                                \n                                     Latest WP\n                                \n                            \n                            \n                            \n                                \n                                \n                                \n                                     CEMFI WP\n                                \n                            \n                            \n                            \n                                \n                                \n                                \n                                     Package (unitdid)\n                                \n                            \n                            \n                        \n                    \n                \n                \n                \n                \n                    \n                \n                \n            \n        \n    \n\nNo matching items\n\n\nSee All ‚Üí"
  },
  {
    "objectID": "about/index.html#a-blog-that-works",
    "href": "about/index.html#a-blog-that-works",
    "title": "Hi There!",
    "section": "A BLOG THAT WORKS",
    "text": "A BLOG THAT WORKS\n\n\n    \n    \n        \n            \n                \n            \n        \n        \n            Research Workflow with Quarto + {targets}\n            \n            \n                \n                \n                    Quarto\n                \n                \n                \n                    R\n                \n                \n                \n                    Julia\n                \n                \n            \n            \n            \n        \n    \n    \n\nNo matching items\n\n\nSee All ‚Üí"
  },
  {
    "objectID": "about/index.html#talks-that-last",
    "href": "about/index.html#talks-that-last",
    "title": "Hi There!",
    "section": "TALKS THAT LAST",
    "text": "TALKS THAT LAST\n\n\n    \n    \n        \n    \n        \n    \n        \n            \n            \n                \n                    \n                    \n                    \n                \n                \n                    \n                        \n                        An Advanced Introdution to R \n                        \n                    \n                    \n                        Jan 13, 2023 ‚àô \n                        CEMFI, Madrid\n                        \n                    \n                    Here is a talk on practical techniques to write a paper with R\n\n                    \n                        \n                        \n                            \n                            \n                            \n                                 Slides\n                            \n                        \n                        \n                        \n                            \n                            \n                            \n                                 GitHub\n                            \n                        \n                        \n                    \n                \n            \n        \n    \n\nNo matching items\n\n\nSee All ‚Üí"
  },
  {
    "objectID": "blog/2022/05/24/docker_template/index.html",
    "href": "blog/2022/05/24/docker_template/index.html",
    "title": "My Docker Template for R",
    "section": "",
    "text": "Docker is one of the best environments for reproductivity of the research. I use Docker for basically all my projects, but it took me about 2 years to get to a satisfactory environment setup. I would like to share it here as a template."
  },
  {
    "objectID": "blog/2022/05/24/docker_template/index.html#quick-start",
    "href": "blog/2022/05/24/docker_template/index.html#quick-start",
    "title": "My Docker Template for R",
    "section": "Quick Start",
    "text": "Quick Start\n\nClone this repository\nOpen it in VSCode and add Remote-Containers Extension\nFrom the command palette, choose ‚Äúopen folder in container‚Äù\nOpen localhost:8787 in a browser\nCreate a project for this project directory (by default, choose /home/rstudio/work)\nRUN renv::init() in the R console\nSet up a DVC environment\n\nPrepare a folder in Google Drive (and copy the folder code)\nInit DVC\n\n\ndvc init\ndvc remote add --default myremote gdrive://GDRIVE_FOLDER_CODE"
  },
  {
    "objectID": "blog/2022/05/24/docker_template/index.html#brief-explanations",
    "href": "blog/2022/05/24/docker_template/index.html#brief-explanations",
    "title": "My Docker Template for R",
    "section": "Brief Explanations",
    "text": "Brief Explanations\nIn this section, I briefly comment on each file. I assume you are familiar with\n\nR, Rstudio & renv\nDocker\nVSCode and its Remote-Containers extension\n\nI manage data files by DVC. But if you have another strategy for data management, ignore these parts.\n\nDockerfile\nFROM rocker/verse\n\nRUN apt update && apt install -y gnupg openssh-client libpoppler-cpp-dev\n\n# DVC\nRUN wget \\\n       https://dvc.org/deb/dvc.list \\\n       -O /etc/apt/sources.list.d/dvc.list && \\\n    wget -qO - https://dvc.org/deb/iterative.asc | apt-key add - && \\\n    apt update && \\\n    apt install -y dvc \n\n# R Packages\nRUN R -e \"install.packages(c('languageserver', 'renv'))\"\n\n# Rstudio Global Options\nCOPY --chown=rstudio:rstudio .config/rstudio/rstudio-prefs.json /home/rstudio/.config/rstudio/rstudio-prefs.json\n\nR image\nIf you don‚Äôt have any preferences, I recommend you use one of the rocker image series of rocker-org:\n\nrocker/rstudio\nrocker/tidyverse\nrocker/verse\nrocker/geospatial\n\nBecause I currently write a paper by Rmarkdown, I usually use rocker/verse and use rocker/geospatial for spatial analysis.\n\n\nDVC\nI just follow the official guide for Install from repository. If your environment includes python, it is easier to install it via pip.\n\n\nR packages\nI use renv for dependency management. languageserver allows us to run a code in VSCode, but I don‚Äôt usually use it.\n\n\nRstudio Global Options\nWhen Rstudio launches, it loads the ~/.config/rstudio/rstudio-prefs.json file for general settings. So I prepare /.config/rstudio/rstudio-prefs.json, and it allows me to use Rstudio with my favorite settings.\nIf you want to use your own settings, I recommend you\n\nOpen Rstudio\nSet up by GUI (Tools -&gt; Global Options)\nCopy ~/.config/rstudio/rstudio-prefs.json (in container)\nPaste it on /.config/rstudio/rstudio-prefs.json (in host)\n\n\n\n\ndocker-compose.yml\nversion: '3'\nservices:\n    rstudio:\n        build:\n            context: .\n        environment:\n            - TZ=Europe/Madrid\n            - DISABLE_AUTH=true\n            - RENV_PATHS_CACHE=/home/rstudio/.renv/cache\n        volumes:\n            - .:/home/rstudio/work\n            - $HOME/.renv:/home/rstudio/.renv/cache\n\nDISABLE_AUTH=true\nYou don‚Äôt need to type a password for each new session.\n\n\nCache for renv\nBy setting the RENV_PATH_CACHE and mounting the directory, you don‚Äôt need to re-install packages. In other words, you can share packages with other (docker) projects and don‚Äôt have to re-install all the packages when you rebuild a container.\nHave fun!"
  },
  {
    "objectID": "blog/2024/04/29/index.html",
    "href": "blog/2024/04/29/index.html",
    "title": "A Gamechanger of Creating Tables in R: tinytable",
    "section": "",
    "text": "In recent years, kableExtra and gt have been popular packages for creating tables in R. I have used kableExtra for tables in a (LaTeX compiled) paper, and gt for tables in a (HTML compiled) slides, and I taught it in my R workshop. However, I found a new package called tinytable that is more flexible and easier to use than the other two packages. In this post, I will introduce how to use tinytable to create tables for LaTeX documents as an updated section of my workshop.\n\n\nThe tinytable is a small (zero-dependencies, only uses baseR!) but powerful package that provides a simple and flexible way to create tables in R. This package is developed by Vincent Arel-Bundock, the maintainer of the modelsummary package, and is designed to work seamlessly with modelsummary."
  },
  {
    "objectID": "blog/2024/04/29/index.html#kableextra-or-gt-no-tinytable",
    "href": "blog/2024/04/29/index.html#kableextra-or-gt-no-tinytable",
    "title": "A Gamechanger of Creating Tables in R: tinytable",
    "section": "",
    "text": "In recent years, kableExtra and gt have been popular packages for creating tables in R. I have used kableExtra for tables in a (LaTeX compiled) paper, and gt for tables in a (HTML compiled) slides, and I taught it in my R workshop. However, I found a new package called tinytable that is more flexible and easier to use than the other two packages. In this post, I will introduce how to use tinytable to create tables for LaTeX documents as an updated section of my workshop.\n\n\nThe tinytable is a small (zero-dependencies, only uses baseR!) but powerful package that provides a simple and flexible way to create tables in R. This package is developed by Vincent Arel-Bundock, the maintainer of the modelsummary package, and is designed to work seamlessly with modelsummary."
  },
  {
    "objectID": "blog/2024/04/29/index.html#an-example-of-creating-tables-with-tinytable",
    "href": "blog/2024/04/29/index.html#an-example-of-creating-tables-with-tinytable",
    "title": "A Gamechanger of Creating Tables in R: tinytable",
    "section": "An Example of Creating Tables with tinytable",
    "text": "An Example of Creating Tables with tinytable\n\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(tinytable)\n\nI use the Madrid traffic accident dataset, which is from my workshop. You can find the downloading and cleaning codes in my blog repository.\n\ndir_post &lt;- here::here(\"blog/2024/04/29/\")\ndata &lt;- nanoparquet::read_parquet(file.path(dir_post, \"data\", \"cleaned.parquet\")) |&gt;\n  mutate(is_died = injury8 == \"Died within 24 hours\",\n         is_hospitalized = injury8 %in% c(\"Hospitalization after 24 hours\",\n                                          \"Hospitalization within 24 hours\",\n                                          \"Died within 24 hours\"))\n\nI will create a table that shows the number of accidents.\n\ntab_count &lt;- data |&gt;\n  filter(!is.na(weather), !is.na(gender)) |&gt;\n  summarize(n = n(), .by = c(year, gender, weather)) |&gt;  \n  pivot_wider(names_from = c(gender, year), values_from = n) |&gt;\n  arrange(weather) |&gt;\n  select(weather, starts_with(\"Men\"), starts_with(\"Women\"))\n\ntab_count\n\n# A tibble: 6 √ó 11\n  weather   Men_2019 Men_2020 Men_2021 Men_2022 Men_2023 Women_2019 Women_2020\n  &lt;fct&gt;        &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;      &lt;int&gt;      &lt;int&gt;\n1 sunny        24399    14969    19208    20679    22451      11971       6958\n2 cloud         1159     1190     1325     2082     2011        555        554\n3 soft rain     2126     1198     1281     1930     1224       1068        542\n4 hard rain      386      202      386      527      317        222         96\n5 snow             2        2      124        5       NA         NA         NA\n6 hail            11        5        6        4        3          3          3\n# ‚Ñπ 3 more variables: Women_2021 &lt;int&gt;, Women_2022 &lt;int&gt;, Women_2023 &lt;int&gt;\n\n\nYou can create a table by using the tt() function.\n\ntt_count &lt;- tab_count |&gt;\n  `colnames&lt;-`(c(\"\", rep(2019:2023, 2))) |&gt;\n  tt() |&gt;\n  group_tt(i = list(\"Good Weather\" = 1, \"Bad Weather\" = 3),\n           j = list(\"Men\" = 2:6, \"Women\" = 7:11)) |&gt;\n  style_tt(i = c(1, 4), bold = TRUE) |&gt;\n  format_tt(replace = \"-\")\n\ntt_count |&gt;\n  theme_tt(\"tabular\") |&gt;\n  save_tt(file.path(dir_post, \"tex\", \"table_count.tex\"),\n          overwrite = TRUE)\n\nTo format the table as an table in a paper,\n\ngroup_tt() groups the rows and columns as multirow and multicolumn in \\(\\LaTeX\\).\nstyle_tt() styles the rows as bold, italic, etc.\nformat_tt() formats the cells as numeric, percentage, etc. replace argument replaces the NA cells with the specified character.\nYou cannot change the column names in the tt() function, so you need to use colnames&lt;-(), related to the issue #194\nTo save the table as a plain table (without \\begin{table} and \\end{table}), use theme_tt(\"tabular\").\n\n\n\n\nNumber of Persons Involved in Traffic Accidents\n\n\n\nA trick to insert a LaTeX table in a Quarto document\nIn the previous section, I inserted a \\(\\LaTeX\\) table by SVG format. Actually, I converted a tinytable object to a svg figure by the following two steps:\n1. Save the tinytable object as a PDF file.\ntt_count |&gt;\n  save_tt(file.path(dir_post, \"img\", \"table_count.pdf\"),\n          overwrite = TRUE)\ntinytable::save_tt() is a powerful funtion that can save the tinytable object as a PDF file. If the file extension is .pdf, the function compile it as a single PDF file by tinytex package.\n2. Convert the PDF file to a SVG file.\n\n```{bash}\n#!/bin/bash\npdf2svg img/table_count.pdf img/table_count.svg\n```\n\npdf2svg is a command line tool that converts a PDF file to a SVG file. And importantly, knitr can run the bash script in a code chunk."
  },
  {
    "objectID": "blog/2024/04/29/index.html#modelsummary",
    "href": "blog/2024/04/29/index.html#modelsummary",
    "title": "A Gamechanger of Creating Tables in R: tinytable",
    "section": "Modelsummary",
    "text": "Modelsummary\n\nlibrary(modelsummary)\nlibrary(fixest)\n\nSince tinytable is designed to work seamlessly with modelsummary, you can create a table of regression results by using modelsummary and tinytable.\n\nsetFixest_fml(..ctrl = ~ type_person + positive_alcohol + positive_drug |\n                          age_c + gender)\nmodels &lt;- list(\n    \"(1)\" = feglm(xpd(is_hospitalized ~ ..ctrl),\n                  family = binomial(logit), data = data),\n    \"(2)\" = feglm(xpd(is_hospitalized ~ ..ctrl + type_vehicle),\n                  family = binomial(logit), data = data),\n    \"(3)\" = feglm(xpd(is_hospitalized ~ ..ctrl + type_vehicle + weather),\n                  family = binomial(logit), data = data),\n    \"(4)\" = feglm(xpd(is_died ~ ..ctrl),\n                  family = binomial(logit), data = data),\n    \"(5)\" = feglm(xpd(is_died ~ ..ctrl + type_vehicle),\n                  family = binomial(logit), data = data),\n    \"(6)\" = feglm(xpd(is_died ~ ..ctrl + type_vehicle + weather),\n                  family = binomial(logit), data = data)\n)\n\nmodelsummary(models)\n\n\n\n    \n\n    \n    \n      \n        \n        \n              \n                 \n                (1)\n                (2)\n                (3)\n                (4)\n                (5)\n                (6)\n              \n        \n        \n        \n                \n                  type_personPassenger \n                  0.026    \n                  0.501    \n                  0.475    \n                  -1.697   \n                  -1.445   \n                  -1.440   \n                \n                \n                                       \n                  (0.100)  \n                  (0.069)  \n                  (0.068)  \n                  (0.616)  \n                  (0.631)  \n                  (0.631)  \n                \n                \n                  type_personPedestrian\n                  2.117    \n                  2.381    \n                  2.298    \n                  2.190    \n                  2.326    \n                  2.327    \n                \n                \n                                       \n                  (0.114)  \n                  (0.061)  \n                  (0.058)  \n                  (0.260)  \n                  (0.248)  \n                  (0.246)  \n                \n                \n                  positive_alcoholTRUE \n                  0.007    \n                  0.355    \n                  0.381    \n                  -13.685  \n                  -13.421  \n                  -13.460  \n                \n                \n                                       \n                  (0.072)  \n                  (0.081)  \n                  (0.081)  \n                  (0.059)  \n                  (0.055)  \n                  (0.054)  \n                \n                \n                  Num.Obs.             \n                  197477   \n                  197369   \n                  176133   \n                  118462   \n                  116344   \n                  112659   \n                \n                \n                  R2                   \n                  0.056    \n                  0.170    \n                  0.163    \n                  0.103    \n                  0.142    \n                  0.145    \n                \n                \n                  R2 Adj.              \n                  0.056    \n                  0.169    \n                  0.162    \n                  0.087    \n                  0.116    \n                  0.116    \n                \n                \n                  R2 Within            \n                  0.048    \n                  0.055    \n                  0.053    \n                  0.070    \n                  0.070    \n                  0.071    \n                \n                \n                  R2 Within Adj.       \n                  0.048    \n                  0.055    \n                  0.052    \n                  0.067    \n                  0.067    \n                  0.068    \n                \n                \n                  AIC                  \n                  82581.4  \n                  72694.8  \n                  70519.4  \n                  2029.6   \n                  1960.3   \n                  1940.0   \n                \n                \n                  BIC                  \n                  82795.5  \n                  73204.5  \n                  71063.6  \n                  2213.6   \n                  2240.5   \n                  2248.2   \n                \n                \n                  RMSE                 \n                  0.23     \n                  0.22     \n                  0.24     \n                  0.03     \n                  0.04     \n                  0.04     \n                \n                \n                  Std.Errors           \n                  by: age_c\n                  by: age_c\n                  by: age_c\n                  by: age_c\n                  by: age_c\n                  by: age_c\n                \n                \n                  FE: age_c            \n                  X        \n                  X        \n                  X        \n                  X        \n                  X        \n                  X        \n                \n                \n                  FE: gender           \n                  X        \n                  X        \n                  X        \n                  X        \n                  X        \n                  X        \n                \n                \n                  FE: type_vehicle     \n                           \n                  X        \n                  X        \n                           \n                  X        \n                  X        \n                \n                \n                  FE: weather          \n                           \n                           \n                  X        \n                           \n                           \n                  X        \n                \n        \n      \n    \n\n\n\nTo polish the table for a paper,\n\ncm  &lt;-  c(\n    \"type_personPassenger\" = \"Passenger\",\n    \"type_personPedestrian\" = \"Pedestrian\",\n    \"positive_alcoholTRUE\" = \"Positive Alcohol\"\n)\n\ngm &lt;- tibble(\n    raw = c(\"nobs\", \"FE: age_c\", \"FE: gender\",\n            \"FE: type_vehicle\", \"FE: weather\"),\n    clean = c(\"Observations\", \"FE: Age Group\", \"FE: Gender\",\n              \"FE: Type of Vehicle\", \"FE: Weather\"),\n    fmt = c(0, 0, 0, 0, 0)\n)\n\ntt_reg &lt;- modelsummary(models,\n  stars = c(\"+\" = .1, \"*\" = .05, \"**\" = .01),\n  coef_map = cm,\n  gof_map = gm) |&gt;\n  group_tt(j = list(\"Hospitalization\" = 2:4,\n                    \"Died within 24 hours\" = 5:7))\n\ntt_reg |&gt;\n  theme_tt(\"tabular\") |&gt;\n  save_tt(file.path(dir_post, \"tex\", \"table_reg.tex\"),\n          overwrite = TRUE)\n\n\ncoef_map renames the coefficients\ngof_map renames the goodness-of-fit statistics\nSince the modelsummary function returns a tinytable object, you can use the tinytable functions to polish the table\n\n\n\n\nLogit Regression of Hospitalization and Death within 24 Hours"
  },
  {
    "objectID": "blog/2024/04/29/index.html#last-comments",
    "href": "blog/2024/04/29/index.html#last-comments",
    "title": "A Gamechanger of Creating Tables in R: tinytable",
    "section": "Last Comments",
    "text": "Last Comments\nIn this post, I introduced the tinytable package, which is a gamechanger of creating tables in R. In the wrangling process, I firmly believe that tinytable is more flexible and powerful than kableExtra and gt for the following reasons:\n\nCovers almost all the features of kableExtra and gt & gtExtras. You can use multirow & multicolumn, highlight cells, format cells, and mathematical expressions\nAllows to export tables not only in HTML and LaTeX but also in PDF (with tinytex) and Typst\nCompiles faster than kableExtra and gt. I think this is because tinytable is a small package that only uses baseR\n\nHave a happy R life ü•Ç!"
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html",
    "href": "blog/2025/0426_research_workflow/index.html",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "",
    "text": "{targets} is an R package for building research workflows. Its primary feature is managing R objects (data, functions, and results) and their dependencies, automatically recalculating downstream objects when upstream objects change. This allows you to maintain reproducibility throughout your research process.\nWhen combined with Quarto, you can manage all aspects of your research workflow in a single pipeline‚Äîfrom interim reports and slides to writing the final manuscript. This article explains a Quarto + {targets} research workflow I actively use in my own research. While the final pipeline is a clean and simple workflow, I also add flexibility for experimentation and iteration.\nThe code is available here. Please refer to it for code examples and directory structure.\n\n\n\nSet up initial configuration in _targets.R\nDefine data cleaning in R/tar_data.R\nConfigure the website in _quarto.yml\nExperiment with data analysis and models in playground/yymmdd_*/index.qmd\nSummarize interim results in slides slide/yymmdd_*/index.qmd\nRepeat steps 3-5. Incorporate key results into the pipeline via R/tar_fact.R, R/tar_model.R\nWrite the manuscript with final results in manuscript/*.qmd\n\nBy the time you finish writing your manuscript, you should have a pipeline like the one below. This was generated using targets::tar_mermaid().\n\n\n\n\n\ngraph LR\n  style Graph fill:#FFFFFF00,stroke:#000000;\n  subgraph Graph\n    direction LR\n    xa60862c4ab4296bb([\"raw_accident_bike\"]):::skipped --&gt; x034caa8952fea0bc([\"accident_bike\"]):::skipped\n    x6d55c198484f4a32([\"demand_supply_file\"]):::skipped --&gt; xce43a680ab7f20d8([\"demand_supply\"]):::skipped\n    x6b88c7f0a7cfeae2([\"res_model\"]):::skipped --&gt; x6d55c198484f4a32([\"demand_supply_file\"]):::skipped\n    xae87dc67ba338d4f([\"equilibrium_file\"]):::skipped --&gt; xa24c4be63b494044([\"equilibrium\"]):::skipped\n    x6b88c7f0a7cfeae2([\"res_model\"]):::skipped --&gt; xae87dc67ba338d4f([\"equilibrium_file\"]):::skipped\n    x02d319b13cb530b9([\"jl_file_main\"]):::skipped --&gt; xad77b747e8ecd697([\"jl_main\"]):::skipped\n    x693460ba53a4c0cd([\"jl_file_model\"]):::skipped --&gt; x25bf76549192ec22([\"jl_model\"]):::skipped\n    x034caa8952fea0bc([\"accident_bike\"]):::skipped --&gt; x9470f51581cb7d73([\"logit_hospital_death\"]):::skipped\n    xce43a680ab7f20d8([\"demand_supply\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    xb033ae8b49095a26([\"num_accident\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    xa24c4be63b494044([\"equilibrium\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    x9470f51581cb7d73([\"logit_hospital_death\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    x5b3deba9281c9212([\"fns_graphics\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    x41180a2d7b7b3c28([\"parameters\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    xb033ae8b49095a26([\"num_accident\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    xce43a680ab7f20d8([\"demand_supply\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    xa24c4be63b494044([\"equilibrium\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x9470f51581cb7d73([\"logit_hospital_death\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x5b3deba9281c9212([\"fns_graphics\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x41180a2d7b7b3c28([\"parameters\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x034caa8952fea0bc([\"accident_bike\"]):::skipped --&gt; xb033ae8b49095a26([\"num_accident\"]):::skipped\n    xfeeaf8513320133e([\"parameters_file\"]):::skipped --&gt; x41180a2d7b7b3c28([\"parameters\"]):::skipped\n    x6b88c7f0a7cfeae2([\"res_model\"]):::skipped --&gt; xfeeaf8513320133e([\"parameters_file\"]):::skipped\n    xee0a5a7de02f740f([\"dir_raw_accident_bike\"]):::skipped --&gt; xa60862c4ab4296bb([\"raw_accident_bike\"]):::skipped\n    x02d319b13cb530b9([\"jl_file_main\"]):::skipped --&gt; x6b88c7f0a7cfeae2([\"res_model\"]):::skipped\n    xad77b747e8ecd697([\"jl_main\"]):::skipped --&gt; x6b88c7f0a7cfeae2([\"res_model\"]):::skipped\n    x25bf76549192ec22([\"jl_model\"]):::skipped --&gt; x6b88c7f0a7cfeae2([\"res_model\"]):::skipped\n    x034caa8952fea0bc([\"accident_bike\"]):::skipped --&gt; x5a3744590d99f661([\"website\"]):::skipped\n    x5b3deba9281c9212([\"fns_graphics\"]):::skipped --&gt; x5a3744590d99f661([\"website\"]):::skipped\n  end\n\n\n\n\n\n\nBefore explaining each part of the workflow, let‚Äôs cover the basics of {targets}.\n\n\n\nThe official tutorial is the best way to learn {targets} basics, but in practice, we often use the extended syntax from {tarchetypes}. Here, I‚Äôll explain a minimal usage based on {tarchetypes} syntax. This tutorial was helpful for transitioning from {targets} to {tarchetypes}.\n\n\nThe philosophy of {targets} divides research workflows into three elements: files, functions, and objects.\n\nFiles: Objects defined with tar_file() that hold file paths. They also store file size and timestamp, so even if the path hasn‚Äôt changed, if the content changes, dependent parts of the pipeline will be recalculated.\nObjects: Variables, data frames, and other R objects.\nFunctions: R functions. All inputs that the function depends on must be specified, and the output must be a file or object. This makes dependencies explicit.\n\nConceptually, you start with files, read them to create objects, and then use those objects to run functions that create new objects. These elements are defined within tar_plan().\nclean_data1 &lt;- function(data1_raw) {\n  data1_raw |&gt;\n    filter(!is.na(col1))\n}\n\ntar_plan(\n  tar_file(data1_raw_file, \"path/to/file/data1.csv\"),\n  data1_raw = readr::read_csv(data1_raw_file),\n  data1_cleaned = clean_data1(data1_raw),\n)\nIn the example above, data1_raw_file is a file, data1_raw and data1_cleaned are objects, and readr::read_csv and clean_data1() are functions.\n\n\n\nYou can visualize your defined pipeline with targets::tar_visnetwork().\n\n\n\n\n\nHere, triangles represent functions, and circles represent files and objects. The light blue color indicates parts of the pipeline that haven‚Äôt been executed yet. When you run targets::tar_make():\n\n\n\n\n\nSuccessfully executed parts turn gray. If you change the contents of data1.csv (data1_raw_file):\n\n\n\n\n\nParts with dependencies return to the unexecuted state. Of course, running targets::tar_make() again will recalculate the dependent parts:\n\n\n\n\n\nSimilarly, if you change the contents of the clean_data1() function:\n\n\n\n\n\nThis is the basic workflow of {targets}: define pipelines in tar_plan(), then execute them with tar_make()."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#workflow",
    "href": "blog/2025/0426_research_workflow/index.html#workflow",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "",
    "text": "Set up initial configuration in _targets.R\nDefine data cleaning in R/tar_data.R\nConfigure the website in _quarto.yml\nExperiment with data analysis and models in playground/yymmdd_*/index.qmd\nSummarize interim results in slides slide/yymmdd_*/index.qmd\nRepeat steps 3-5. Incorporate key results into the pipeline via R/tar_fact.R, R/tar_model.R\nWrite the manuscript with final results in manuscript/*.qmd\n\nBy the time you finish writing your manuscript, you should have a pipeline like the one below. This was generated using targets::tar_mermaid().\n\n\n\n\n\ngraph LR\n  style Graph fill:#FFFFFF00,stroke:#000000;\n  subgraph Graph\n    direction LR\n    xa60862c4ab4296bb([\"raw_accident_bike\"]):::skipped --&gt; x034caa8952fea0bc([\"accident_bike\"]):::skipped\n    x6d55c198484f4a32([\"demand_supply_file\"]):::skipped --&gt; xce43a680ab7f20d8([\"demand_supply\"]):::skipped\n    x6b88c7f0a7cfeae2([\"res_model\"]):::skipped --&gt; x6d55c198484f4a32([\"demand_supply_file\"]):::skipped\n    xae87dc67ba338d4f([\"equilibrium_file\"]):::skipped --&gt; xa24c4be63b494044([\"equilibrium\"]):::skipped\n    x6b88c7f0a7cfeae2([\"res_model\"]):::skipped --&gt; xae87dc67ba338d4f([\"equilibrium_file\"]):::skipped\n    x02d319b13cb530b9([\"jl_file_main\"]):::skipped --&gt; xad77b747e8ecd697([\"jl_main\"]):::skipped\n    x693460ba53a4c0cd([\"jl_file_model\"]):::skipped --&gt; x25bf76549192ec22([\"jl_model\"]):::skipped\n    x034caa8952fea0bc([\"accident_bike\"]):::skipped --&gt; x9470f51581cb7d73([\"logit_hospital_death\"]):::skipped\n    xce43a680ab7f20d8([\"demand_supply\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    xb033ae8b49095a26([\"num_accident\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    xa24c4be63b494044([\"equilibrium\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    x9470f51581cb7d73([\"logit_hospital_death\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    x5b3deba9281c9212([\"fns_graphics\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    x41180a2d7b7b3c28([\"parameters\"]):::skipped --&gt; x24abe6175c545e8a([\"manuscript\"]):::skipped\n    xb033ae8b49095a26([\"num_accident\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    xce43a680ab7f20d8([\"demand_supply\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    xa24c4be63b494044([\"equilibrium\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x9470f51581cb7d73([\"logit_hospital_death\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x5b3deba9281c9212([\"fns_graphics\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x41180a2d7b7b3c28([\"parameters\"]):::skipped --&gt; xb7f5b6c7e9273aa9([\"manuscript_book\"]):::skipped\n    x034caa8952fea0bc([\"accident_bike\"]):::skipped --&gt; xb033ae8b49095a26([\"num_accident\"]):::skipped\n    xfeeaf8513320133e([\"parameters_file\"]):::skipped --&gt; x41180a2d7b7b3c28([\"parameters\"]):::skipped\n    x6b88c7f0a7cfeae2([\"res_model\"]):::skipped --&gt; xfeeaf8513320133e([\"parameters_file\"]):::skipped\n    xee0a5a7de02f740f([\"dir_raw_accident_bike\"]):::skipped --&gt; xa60862c4ab4296bb([\"raw_accident_bike\"]):::skipped\n    x02d319b13cb530b9([\"jl_file_main\"]):::skipped --&gt; x6b88c7f0a7cfeae2([\"res_model\"]):::skipped\n    xad77b747e8ecd697([\"jl_main\"]):::skipped --&gt; x6b88c7f0a7cfeae2([\"res_model\"]):::skipped\n    x25bf76549192ec22([\"jl_model\"]):::skipped --&gt; x6b88c7f0a7cfeae2([\"res_model\"]):::skipped\n    x034caa8952fea0bc([\"accident_bike\"]):::skipped --&gt; x5a3744590d99f661([\"website\"]):::skipped\n    x5b3deba9281c9212([\"fns_graphics\"]):::skipped --&gt; x5a3744590d99f661([\"website\"]):::skipped\n  end\n\n\n\n\n\n\nBefore explaining each part of the workflow, let‚Äôs cover the basics of {targets}."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#targets-basics",
    "href": "blog/2025/0426_research_workflow/index.html#targets-basics",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "",
    "text": "The official tutorial is the best way to learn {targets} basics, but in practice, we often use the extended syntax from {tarchetypes}. Here, I‚Äôll explain a minimal usage based on {tarchetypes} syntax. This tutorial was helpful for transitioning from {targets} to {tarchetypes}.\n\n\nThe philosophy of {targets} divides research workflows into three elements: files, functions, and objects.\n\nFiles: Objects defined with tar_file() that hold file paths. They also store file size and timestamp, so even if the path hasn‚Äôt changed, if the content changes, dependent parts of the pipeline will be recalculated.\nObjects: Variables, data frames, and other R objects.\nFunctions: R functions. All inputs that the function depends on must be specified, and the output must be a file or object. This makes dependencies explicit.\n\nConceptually, you start with files, read them to create objects, and then use those objects to run functions that create new objects. These elements are defined within tar_plan().\nclean_data1 &lt;- function(data1_raw) {\n  data1_raw |&gt;\n    filter(!is.na(col1))\n}\n\ntar_plan(\n  tar_file(data1_raw_file, \"path/to/file/data1.csv\"),\n  data1_raw = readr::read_csv(data1_raw_file),\n  data1_cleaned = clean_data1(data1_raw),\n)\nIn the example above, data1_raw_file is a file, data1_raw and data1_cleaned are objects, and readr::read_csv and clean_data1() are functions.\n\n\n\nYou can visualize your defined pipeline with targets::tar_visnetwork().\n\n\n\n\n\nHere, triangles represent functions, and circles represent files and objects. The light blue color indicates parts of the pipeline that haven‚Äôt been executed yet. When you run targets::tar_make():\n\n\n\n\n\nSuccessfully executed parts turn gray. If you change the contents of data1.csv (data1_raw_file):\n\n\n\n\n\nParts with dependencies return to the unexecuted state. Of course, running targets::tar_make() again will recalculate the dependent parts:\n\n\n\n\n\nSimilarly, if you change the contents of the clean_data1() function:\n\n\n\n\n\nThis is the basic workflow of {targets}: define pipelines in tar_plan(), then execute them with tar_make()."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#initial-configuration-in-_targets.r",
    "href": "blog/2025/0426_research_workflow/index.html#initial-configuration-in-_targets.r",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "1. Initial Configuration in _targets.R",
    "text": "1. Initial Configuration in _targets.R\n\n\n_targets.R\n\nlibrary(targets)\nlibrary(tarchetypes)\nsuppressPackageStartupMessages(library(dplyr))\n\noptions(\n  tidyverse.quiet = TRUE,\n  dplyr.summarise.inform = FALSE,\n  readr.show_col_types = FALSE\n)\n\n# here::here() returns an absolute path, which then gets stored in tar_meta and\n# becomes computer-specific (i.e. /Users/andrew/Research/blah/thing.Rmd).\n# There's no way to get a relative path directly out of here::here(), but\n# fs::path_rel() works fine with it (see\n# https://github.com/r-lib/here/issues/36#issuecomment-530894167)\nhere_rel &lt;- function(...) {\n  fs::path_rel(here::here(...))\n}\n\ntar_source()\n\n#-------------------------------------------------------------------------------\n# Main Pipeline\n#-------------------------------------------------------------------------------\n\ntar_plan(\n  # Data Preparation ----------\n  data,\n  # Analysis ------------------\n  fact,\n  model,\n  # Graphics ------------------\n  fns_graphics = lst(theme_proj, color_base, color_accent, scale_fill_gender),\n  # Manuscript ----------------\n  tar_quarto(manuscript_book, path = \"manuscript\", quiet = FALSE),\n  tar_quarto(manuscript, path = \"manuscript/main.qmd\", quiet = FALSE),\n  # Website -------------------\n  tar_quarto(\n    website,\n    path = \".\",\n    quiet = FALSE,\n    extra_files = here_rel(\"manuscript\", \"main.pdf\")\n  )\n)\n\nThe three crucial parts are:\n\ntar_source()\nSpecifies the directory containing source code for functions used in your pipeline. By default, the R/ directory is specified.\n\n\ntar_plan()\nDefines the pipeline. You don‚Äôt need to include every pipeline element here‚Äîyou can define pipelines in files loaded via tar_source() and call them. For example, the data pipeline is defined in R/tar_data.R:\n\n\n\nR/tar_data.R\n\nR/tar_data.R\n\ndata &lt;- tar_plan(\n  dir_raw_accident_bike = download_accident_bike(here_rel(\n    \"data\",\n    \"accident_bike\"\n  )),\n  raw_accident_bike = load_accident_bike(dir_raw_accident_bike),\n  accident_bike = clean_accident_bike(raw_accident_bike)\n)\n\ndownload_accident_bike &lt;- function(dir_file) {\n  url_base &lt;- \"https://datos.madrid.es/egob/catalogo/300228-%s-accidentes-trafico-detalle.csv\"\n\n  years &lt;- 2019:2023\n  keys &lt;- c(19, 21, 22, 24, 26) #URL becomes caos since 2020\n\n  if (!dir.exists(dir_file)) {\n    dir.create(dir_file)\n  }\n\n  tibble(\n    year = 2019:2023,\n    key = c(19, 21, 22, 24, 26)\n  ) |&gt;\n    purrr::pwalk(\\(year, key) {\n      url &lt;- sprintf(url_base, key)\n      download.file(url, destfile = file.path(dir_file, paste0(year, \".txt\")))\n    })\n  return(dir_file)\n}\n\nload_accident_bike &lt;- function(dir_raw_accident_bike) {\n  purrr::map(\n    2019:2023,\n    ~ readr::read_delim(\n      file.path(dir_raw_accident_bike, paste0(.x, \".txt\")),\n      delim = \";\"\n    )\n  ) |&gt;\n    bind_rows()\n}\n\nclean_accident_bike &lt;- function(raw_accident_bike) {\n  raw_accident_bike |&gt;\n    rename(\n      id = num_expediente,\n      date = fecha,\n      hms = hora,\n      street = localizacion,\n      num_street = numero,\n      code_district = cod_distrito,\n      district = distrito,\n      type_accident = tipo_accidente,\n      weather = estado_meteorol√≥gico,\n      type_vehicle = tipo_vehiculo,\n      type_person = tipo_persona,\n      age_c = rango_edad,\n      gender = sexo,\n      code_injury8 = cod_lesividad,\n      injury8 = lesividad,\n      coord_x = coordenada_x_utm,\n      coord_y = coordenada_y_utm,\n      positive_alcohol = positiva_alcohol,\n      positive_drug = positiva_droga\n    ) |&gt;\n    mutate(\n      time = lubridate::dmy_hms(paste0(date, hms), tz = \"Europe/Madrid\"),\n      district = na_if(district, \"NULL\"),\n      district = stringr::str_to_title(district),\n      weather = recode_factor(\n        weather,\n        \"Despejado\" = \"sunny\",\n        \"Nublado\" = \"cloud\",\n        \"Lluvia d√©bil\" = \"soft rain\",\n        \"Lluvia intensa\" = \"hard rain\",\n        \"LLuvia intensa\" = \"hard rain\",\n        \"Nevando\" = \"snow\",\n        \"Granizando\" = \"hail\",\n        \"Se desconoce\" = NULL,\n        \"NULL\" = NULL\n      ),\n      type_person = recode_factor(\n        type_person,\n        \"Conductor\" = \"Driver\",\n        \"Pasajero\" = \"Passenger\",\n        \"Peat√≥n\" = \"Pedestrian\",\n        \"NULL\" = NULL\n      ),\n      age_c = recode_factor(\n        age_c,\n        \"Menor de 5 a√±os\" = \"&lt;5\",\n        \"De 6 a 9 a√±os\" = \"6-9\",\n        \"De 10 a 14 a√±os\" = \"10-14\",\n        \"De 15 a 17 a√±os\" = \"15-17\",\n        \"De 18 a 20 a√±os\" = \"18-20\",\n        \"De 21 a 24 a√±os\" = \"21-24\",\n        \"De 25 a 29 a√±os\" = \"25-29\",\n        \"De 30 a 34 a√±os\" = \"30-34\",\n        \"De 35 a 39 a√±os\" = \"35-39\",\n        \"De 40 a 44 a√±os\" = \"40-44\",\n        \"De 45 a 49 a√±os\" = \"45-49\",\n        \"De 50 a 54 a√±os\" = \"50-54\",\n        \"De 55 a 59 a√±os\" = \"55-59\",\n        \"De 60 a 64 a√±os\" = \"60-64\",\n        \"De 65 a 69 a√±os\" = \"65-69\",\n        \"De 70 a 74 a√±os\" = \"70-74\",\n        \"M√°s de 74 a√±os\" = \"&gt;74\",\n        \"Desconocido\" = NULL\n      ),\n      gender = recode_factor(\n        gender,\n        \"Hombre\" = \"Men\",\n        \"Mujer\" = \"Women\",\n        \"Desconocido\" = NULL\n      ),\n      injury8 = recode_factor(\n        injury8,\n        \"Sin asistencia sanitaria\" = \"No health care\",\n        \"Asistencia sanitaria s√≥lo en el lugar del accidente\" = \"Healthcare only at the place of the accident\",\n        \"Asistencia sanitaria ambulatoria con posterioridad\" = \"Subsequent outpatient health care\",\n        \"Asistencia sanitaria inmediata en centro de salud o mutua\" = \"Immediate health care at a health center\",\n        \"Atenci√≥n en urgencias sin posterior ingreso\" = \"Emergency care without subsequent hospitalization\",\n        \"Ingreso superior a 24 horas\" = \"Hospitalization after 24 hours\",\n        \"Ingreso inferior o igual a 24 horas\" = \"Hospitalization within 24 hours\",\n        \"Fallecido 24 horas\" = \"Died within 24 hours\",\n        \"Se desconoce\" = NULL,\n        \"NULL\" = NULL\n      ),\n      positive_alcohol = positive_alcohol == \"S\",\n      positive_drug = positive_drug == \"S\",\n      is_died = injury8 == \"Died within 24 hours\",\n      is_hospitalized = injury8 %in%\n        c(\n          \"Hospitalization after 24 hours\",\n          \"Hospitalization within 24 hours\",\n          \"Died within 24 hours\"\n        )\n    ) |&gt;\n    filter(!is.na(type_person), !is.na(gender))\n}\n\n\n\n\n\nhere_rel()\nhere::here() is a function for specifying relative paths based on the project root directory. This ensures you don‚Äôt need to change paths if the project root directory changes. However, using here::here() within _targets.R saves absolute paths, which causes problems when sharing with others. Therefore, we use a function that maintains the convenience of here::here() while saving relative paths. This part is based on Dr.¬†Andrew Heiss‚Äôs code."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#define-data-cleaning",
    "href": "blog/2025/0426_research_workflow/index.html#define-data-cleaning",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "2. Define Data Cleaning",
    "text": "2. Define Data Cleaning\nDefine your data cleaning pipeline. See the code here for details:\n\n\n\nR/tar_data.R\n\nR/tar_data.R\n\ndata &lt;- tar_plan(\n  dir_raw_accident_bike = download_accident_bike(here_rel(\n    \"data\",\n    \"accident_bike\"\n  )),\n  raw_accident_bike = load_accident_bike(dir_raw_accident_bike),\n  accident_bike = clean_accident_bike(raw_accident_bike)\n)\n\ndownload_accident_bike &lt;- function(dir_file) {\n  url_base &lt;- \"https://datos.madrid.es/egob/catalogo/300228-%s-accidentes-trafico-detalle.csv\"\n\n  years &lt;- 2019:2023\n  keys &lt;- c(19, 21, 22, 24, 26) #URL becomes caos since 2020\n\n  if (!dir.exists(dir_file)) {\n    dir.create(dir_file)\n  }\n\n  tibble(\n    year = 2019:2023,\n    key = c(19, 21, 22, 24, 26)\n  ) |&gt;\n    purrr::pwalk(\\(year, key) {\n      url &lt;- sprintf(url_base, key)\n      download.file(url, destfile = file.path(dir_file, paste0(year, \".txt\")))\n    })\n  return(dir_file)\n}\n\nload_accident_bike &lt;- function(dir_raw_accident_bike) {\n  purrr::map(\n    2019:2023,\n    ~ readr::read_delim(\n      file.path(dir_raw_accident_bike, paste0(.x, \".txt\")),\n      delim = \";\"\n    )\n  ) |&gt;\n    bind_rows()\n}\n\nclean_accident_bike &lt;- function(raw_accident_bike) {\n  raw_accident_bike |&gt;\n    rename(\n      id = num_expediente,\n      date = fecha,\n      hms = hora,\n      street = localizacion,\n      num_street = numero,\n      code_district = cod_distrito,\n      district = distrito,\n      type_accident = tipo_accidente,\n      weather = estado_meteorol√≥gico,\n      type_vehicle = tipo_vehiculo,\n      type_person = tipo_persona,\n      age_c = rango_edad,\n      gender = sexo,\n      code_injury8 = cod_lesividad,\n      injury8 = lesividad,\n      coord_x = coordenada_x_utm,\n      coord_y = coordenada_y_utm,\n      positive_alcohol = positiva_alcohol,\n      positive_drug = positiva_droga\n    ) |&gt;\n    mutate(\n      time = lubridate::dmy_hms(paste0(date, hms), tz = \"Europe/Madrid\"),\n      district = na_if(district, \"NULL\"),\n      district = stringr::str_to_title(district),\n      weather = recode_factor(\n        weather,\n        \"Despejado\" = \"sunny\",\n        \"Nublado\" = \"cloud\",\n        \"Lluvia d√©bil\" = \"soft rain\",\n        \"Lluvia intensa\" = \"hard rain\",\n        \"LLuvia intensa\" = \"hard rain\",\n        \"Nevando\" = \"snow\",\n        \"Granizando\" = \"hail\",\n        \"Se desconoce\" = NULL,\n        \"NULL\" = NULL\n      ),\n      type_person = recode_factor(\n        type_person,\n        \"Conductor\" = \"Driver\",\n        \"Pasajero\" = \"Passenger\",\n        \"Peat√≥n\" = \"Pedestrian\",\n        \"NULL\" = NULL\n      ),\n      age_c = recode_factor(\n        age_c,\n        \"Menor de 5 a√±os\" = \"&lt;5\",\n        \"De 6 a 9 a√±os\" = \"6-9\",\n        \"De 10 a 14 a√±os\" = \"10-14\",\n        \"De 15 a 17 a√±os\" = \"15-17\",\n        \"De 18 a 20 a√±os\" = \"18-20\",\n        \"De 21 a 24 a√±os\" = \"21-24\",\n        \"De 25 a 29 a√±os\" = \"25-29\",\n        \"De 30 a 34 a√±os\" = \"30-34\",\n        \"De 35 a 39 a√±os\" = \"35-39\",\n        \"De 40 a 44 a√±os\" = \"40-44\",\n        \"De 45 a 49 a√±os\" = \"45-49\",\n        \"De 50 a 54 a√±os\" = \"50-54\",\n        \"De 55 a 59 a√±os\" = \"55-59\",\n        \"De 60 a 64 a√±os\" = \"60-64\",\n        \"De 65 a 69 a√±os\" = \"65-69\",\n        \"De 70 a 74 a√±os\" = \"70-74\",\n        \"M√°s de 74 a√±os\" = \"&gt;74\",\n        \"Desconocido\" = NULL\n      ),\n      gender = recode_factor(\n        gender,\n        \"Hombre\" = \"Men\",\n        \"Mujer\" = \"Women\",\n        \"Desconocido\" = NULL\n      ),\n      injury8 = recode_factor(\n        injury8,\n        \"Sin asistencia sanitaria\" = \"No health care\",\n        \"Asistencia sanitaria s√≥lo en el lugar del accidente\" = \"Healthcare only at the place of the accident\",\n        \"Asistencia sanitaria ambulatoria con posterioridad\" = \"Subsequent outpatient health care\",\n        \"Asistencia sanitaria inmediata en centro de salud o mutua\" = \"Immediate health care at a health center\",\n        \"Atenci√≥n en urgencias sin posterior ingreso\" = \"Emergency care without subsequent hospitalization\",\n        \"Ingreso superior a 24 horas\" = \"Hospitalization after 24 hours\",\n        \"Ingreso inferior o igual a 24 horas\" = \"Hospitalization within 24 hours\",\n        \"Fallecido 24 horas\" = \"Died within 24 hours\",\n        \"Se desconoce\" = NULL,\n        \"NULL\" = NULL\n      ),\n      positive_alcohol = positive_alcohol == \"S\",\n      positive_drug = positive_drug == \"S\",\n      is_died = injury8 == \"Died within 24 hours\",\n      is_hospitalized = injury8 %in%\n        c(\n          \"Hospitalization after 24 hours\",\n          \"Hospitalization within 24 hours\",\n          \"Died within 24 hours\"\n        )\n    ) |&gt;\n    filter(!is.na(type_person), !is.na(gender))\n}\n\n\n\nThe key points are:\n\nDefine raw data files with tar_file()\nRead raw data using functions like readr::read_csv()\nCreate cleaning functions that take raw data as arguments and return cleaned data\n\nYou can also combine the first two steps by tar_file_read():\ntar_plan(\n  tar_file_read(\n    data1_raw,\n    here_rel(\"path\", \"to\", \"file\", \"data1.csv\"),\n    readr::read_csv(!!.x),\n  ),\n  data1_cleaned = clean_data1(data1_raw)\n)\nTo download online files and define them with tar_file:\ndownload_file &lt;- function(url, destfile) {\n  if (!file.exists(destfile)) {\n    download.file(url, destfile)\n  }\n  return(destfile)\n}\nDefine this function and call it within tar_file(). The key is to return the path to the saved file.\nFor your information, I have outlined my approach to data cleaning in this workshop."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#configure-the-website",
    "href": "blog/2025/0426_research_workflow/index.html#configure-the-website",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "3. Configure the Website",
    "text": "3. Configure the Website\nUse tar_quarto() to build a website within your pipeline. For the purpose of websites and specific configurations, see my blog post on ‚ÄúResearching as if to Blog‚Äù."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#experiment-with-data-analysis-and-models",
    "href": "blog/2025/0426_research_workflow/index.html#experiment-with-data-analysis-and-models",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "4. Experiment with Data Analysis and Models",
    "text": "4. Experiment with Data Analysis and Models\nCreate notebook-style posts in the playground directory of your website to experiment with data analysis and models.\nYou can load cleaned data with tar_load(). I define figure settings in R/fns_graphics.R and import them when needed:\n\n\nposts/240324_accident_bike/index.qmd\n\n```{r}\n#| label: setup\n#| include: false\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(fixest)\nlibrary(tinytable)\nlibrary(modelsummary)\n\ntargets::tar_config_set(\n  store = here::here(\"_targets\"),\n  script = here::here(\"_targets.R\")\n)\n\ntargets::tar_load(c(accident_bike))\ninvisible(list2env(targets::tar_read(fns_graphics), .GlobalEnv))\n\ntheme_set(theme_proj())\n```\n\nThe key is to avoid over-incorporating experiments into your pipeline. Most analyses in the experimental stage won‚Äôt make it into the final paper. Including them in the pipeline makes dependency management unnecessarily complex. Instead, experiment in the playground directory and only incorporate essential elements into the pipeline.\nBy combining tar_quarto() with Quarto‚Äôs freeze: auto setting, results are not recomputed unless you manually compile them. While this means that dependent parts won‚Äôt recalculate when upstream changes occur, it has the benefit of minimal management for unnecessary parts. If upstream changes do occur, you can manually recompile only the necessary parts of the project."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#summarize-interim-results-in-slides",
    "href": "blog/2025/0426_research_workflow/index.html#summarize-interim-results-in-slides",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "5. Summarize Interim Results in Slides",
    "text": "5. Summarize Interim Results in Slides\nDuring research, you‚Äôll often present interim results. It‚Äôs good practice to compile important findings from your experiments into slides. Like the experimental phase, this doesn‚Äôt need to be incorporated into the pipeline. In this project, the slide directory is compiled as part of the website.\nI create slides using Quarto Clean Theme. Since they‚Äôre created with Quarto, they integrate naturally into this workflow. Additionally, using Typst allows for faster compilation than Beamer. You can see the demo for details."
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#repeat-steps-3-5-and-incorporate-key-results-into-the-pipeline",
    "href": "blog/2025/0426_research_workflow/index.html#repeat-steps-3-5-and-incorporate-key-results-into-the-pipeline",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "6. Repeat Steps 3-5 and Incorporate Key Results into the Pipeline",
    "text": "6. Repeat Steps 3-5 and Incorporate Key Results into the Pipeline\nContinue your research, getting feedback from presentations. When you have sufficient results for your manuscript, proceed to the next step. This is where you define pipelines in files like R/tar_fact.R and R/tar_model.R.\n\nIncorporate Key Results into the Pipeline\n\n\n\nR/tar_fact.R\n\nR/tar_fact.R\n\nfact &lt;- tar_plan(\n  num_accident = compute_num_accident(accident_bike),\n  logit_hospital_death = compute_logit_hospital_death(accident_bike)\n)\n\ncompute_num_accident &lt;- function(accident_bike) {\n  accident_bike |&gt;\n    summarize(n = n(), .by = c(type_person, gender))\n}\n\ncompute_logit_hospital_death &lt;- function(accident_bike) {\n  list(\n    \"(1)\" = fixest::feglm(\n      is_hospitalized ~\n        type_person + positive_alcohol + positive_drug | age_c + gender,\n      family = binomial(logit),\n      data = accident_bike\n    ),\n    \"(2)\" = fixest::feglm(\n      is_hospitalized ~\n        type_person +\n          positive_alcohol +\n          positive_drug |\n          age_c + gender + type_vehicle,\n      family = binomial(logit),\n      data = accident_bike\n    ),\n    \"(3)\" = fixest::feglm(\n      is_hospitalized ~\n        type_person +\n          positive_alcohol +\n          positive_drug |\n          age_c + gender + type_vehicle + weather,\n      family = binomial(logit),\n      data = accident_bike\n    ),\n    \"(4)\" = fixest::feglm(\n      is_died ~ type_person + positive_alcohol + positive_drug | age_c + gender,\n      family = binomial(logit),\n      data = accident_bike\n    ),\n    \"(5)\" = fixest::feglm(\n      is_died ~\n        type_person +\n          positive_alcohol +\n          positive_drug |\n          age_c + gender + type_vehicle,\n      family = binomial(logit),\n      data = accident_bike\n    ),\n    \"(6)\" = fixest::feglm(\n      is_died ~\n        type_person +\n          positive_alcohol +\n          positive_drug |\n          age_c + gender + type_vehicle + weather,\n      family = binomial(logit),\n      data = accident_bike\n    )\n  )\n}\n\n\n\nIncorporate figures needed for your paper into the pipeline. I define functions like compute_*() that take cleaned data as arguments and return calculated results as numbers or data frames. I don‚Äôt create figures here‚ÄîI do that within the manuscript.\nFor LaTeX users, you might want to save figures at this stage. For example:\ntar_plan(\n  tar_file(\n    fig1_file,\n    plot_fig1(data1, here_rel(\"path\", \"to\", \"file\", \"fig1.pdf\"))\n  )\n)\n\nplot_fig1 &lt;- function(data1, path_fig1) {\n  ggplot(data1, aes(x = col1, y = col2)) +\n    geom_point()\n  \n  ggsave(path_fig1)\n  return(path_fig1)\n}\n\n\nIncorporate Julia Code into the Pipeline\nWhile R analyses can be directly incorporated into the pipeline, Julia code requires some extra steps. Here‚Äôs my approach:\n\nLoad Julia source code files with tar_file_read() and incorporate them as jl_file_*\nExecute Julia code from R using system2() via the run_model() function\nSave Julia execution results as CSV or YAML files for loading in R with tar_file_read()\n\n\n\n\nR/tar_model.R\n\nR/tar_model.R\n\nmodel &lt;- tar_plan(\n  tar_map(\n    values = list(name = c(\"main\", \"model\")),\n    names = name,\n    tar_file_read(\n      jl,\n      here_rel(\"Julia\", paste0(name, \".jl\")),\n      readLines(!!.x)\n    )\n  ),\n  res_model = run_model(jl_file_main, jl_main, jl_model),\n  tar_file_read(\n    parameters,\n    res_model[[1]],\n    yaml::read_yaml(!!.x)\n  ),\n  tar_file_read(\n    demand_supply,\n    res_model[[2]],\n    read.csv(!!.x)\n  ),\n  tar_file_read(\n    equilibrium,\n    res_model[[3]],\n    yaml::read_yaml(!!.x)\n  )\n)\n\nrun_model &lt;- function(jl_file_main, ...) {\n  system2(command = \"julia\", args = c(\"--project=.\", jl_file_main))\n\n  return(file.path(\n    here_rel(\"output\", \"Julia\"),\n    c(\"parameters.yaml\", \"demand_supply.csv\", \"equilibrium.yaml\")\n  ))\n}\n\n\n\nThe key points are:\n\nSpecify all dependencies in run_model() arguments to include Julia dependencies\nGroup saved result files into a list and load them one by one from R\n\nWhen executing with system2(), Julia‚Äôs path might not be accessible (due to differences between your PC‚Äôs default shell and R‚Äôs shell). In that case, define Julia‚Äôs path in .Renviron:\n\n\n.Renviron\n\nPATH_JULIA=/path/to/julia/\n\nAnd load it in .Rprofile:\n\n\n.Rprofile\n\nsource(\"renv/activate.R\")\nSys.setenv(\n  PATH = paste(Sys.getenv(\"PATH_JULIA\"), Sys.getenv(\"PATH\"), sep = \":\")\n)"
  },
  {
    "objectID": "blog/2025/0426_research_workflow/index.html#write-the-manuscript-with-final-results",
    "href": "blog/2025/0426_research_workflow/index.html#write-the-manuscript-with-final-results",
    "title": "Research Workflow with Quarto + {targets}",
    "section": "7. Write the Manuscript with Final Results",
    "text": "7. Write the Manuscript with Final Results\nWrite your manuscript in the manuscript directory. Here, load the pipeline execution results with tar_load(). I use these three steps:\n\nConfigure the directory as a Quarto Book in manuscript/_quarto.yml\nWrite the Quarto Book as 01-intro.qmd, etc.\nCombine 01-intro.qmd, 02-methods.qmd, etc. in manuscript/main.qmd (using {{&lt; include **-**.qmd &gt;}}) and compile\n\n\nWhy Write as a Quarto Book?\nWriting as a Quarto Book enables cross-references across multiple files. This is very convenient‚Äîdividing your manuscript into files by section makes the structure easier to grasp, and cross-reference auto-completion makes writing smoother.\nHowever, the Quarto Book output format isn‚Äôt ideal for papers, so I combine these files and compile them in manuscript/main.qmd:\n\n\nmanuscript/main.qmd\n\n{{&lt; include 01-intro.qmd &gt;}}\n{{&lt; include 02-fact.qmd &gt;}}\n{{&lt; include 03-model.qmd &gt;}}\n{{&lt; include 04-result.qmd &gt;}}\n{{&lt; include 05-conclusion.qmd &gt;}}\n\n{{&lt; appendix &gt;}}\n\n{{&lt; include 11-data.qmd &gt;}}\n\n{{&lt; pagebreak &gt;}}\n\n:::{#refs}\n:::\n\nI use Typst as the backend for fast compilation and the quarto-academic-typst template. If you need LaTeX source code, you can generate it with quarto::quarto_render() (I used this for my doctoral thesis to match the LaTeX template).\n\n\nFor LaTeX Users\nIf you‚Äôre writing in LaTeX and compiling with TinyTeX, you can incorporate it into the pipeline. For example:\ntar_plan(\n  tar_file_read(\n    manuscript,\n    here_rel(\"manuscript\", \"main.tex\"),\n    readLines(!!.x)\n  ),\n  tar_file(\n    manuscript_pdf,\n    compile_latex(manuscript, here_rel(\"manuscript\", \"main.pdf\"))\n  )\n)\n\ncompile_latex &lt;- function(manuscript_file, path_pdf) {\n  tinytex::xelatex(\n    manuscript_file,\n    output = path_pdf\n    pdf_file = path_pdf\n  )\n  return(path_pdf)\n}\nNote that you may need to include all figure and table dependencies."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html",
    "href": "blog/2023/06/10/quarto_com_model/index.html",
    "title": "Scientific Communication with Quarto: Economic Models",
    "section": "",
    "text": "Notebook coding (Jupyter, Rmarkdown, and Quarto) has gotten popular in the last decade. It allows us to tell a story with code and data, and it makes scientific communication more transparent and reproducible. I use Quarto to share my current results with my supervisor and coauthors, especially when I am in the playground stage of the project.\nWhile it is naturally useful in that it is an easy tool for creating reports, exploiting its HTML feature, we can enrich communication even further. Here, I introduce my use case of GIF and Observable JS for economic models with Julia.\nImagine that you are working on a very simple life-cycle model:\nFor \\(t = 1, \\dots, T\\), households solve \\[\nV(t, e, x) = \\max_{c, x'} \\frac{c^{1 - \\sigma}}{1 - \\sigma} + \\beta \\mathbb{E}V(t + 1, e', x')\n\\] \\[\n\\begin{aligned}\nc + x' &\\le (1 + r)x + ew \\\\\n\\text{Pr}(e' | e) &= \\Gamma(e) \\\\\nc, x' &\\ge 0\n\\end{aligned}\n\\]\nSee the following code for the parameters and the solution algorithm.\n\n\nCode\nusing QuantEcon\nusing Plots\nusing LaTeXStrings\nusing CSV\nusing DataFrames\n\n@kwdef struct Model\n    \n    # Grid for x\n    n‚Çì::Int = 30\n    xÃ≤::Float64 = 0.1\n    xÃÑ::Float64 = 4.0\n    x_grid::Vector{Float64} = range(start = xÃ≤, stop = xÃÑ, length = n‚Çì)\n    \n    # Grid for e: parameters for Tauchen\n    n‚Çë::Int = 10\n    œÉ_Œµ::Float64 = 0.02058\n    Œª_Œµ::Float64 = 0.99\n    m::Float64 = 1.5\n    mc::MarkovChain = tauchen(n‚Çë, Œª_Œµ, œÉ_Œµ, 0.0, m)\n    e_grid::Vector{Float64} = exp.(mc.state_values)\n    P::Matrix{Float64} = mc.p\n\n    # Utility function\n    œÉ::Float64 = 2.0\n    Œ≤::Float64 = 0.97\n    T::Int = 10\n\n    # Prices\n    r::Float64 = 0.07\n    w::Float64 = 5.0\n    \nend\n\nu(c, m::Model) = isone(m.œÉ) ? log(c) : c^(1 - m.œÉ) / (1 - m.œÉ);\n\nfunction solve(m::Model)\n\n    (; T, n‚Çì, n‚Çë, r, w, Œ≤, P, x_grid, e_grid) = m\n\n    V = zeros(n‚Çì, n‚Çë, T)\n\n    for t = T:-1:1, i‚Çì= 1:n‚Çì, i‚Çë = 1:n‚Çë\n        \n        utility = -Inf\n        for i‚Çì‚Ä≤ = 1:n‚Çì\n            \n            expected = (t == T) ? 0.0 : \n                sum(P[i‚Çë, i‚Çë‚Ä≤] * V[i‚Çì‚Ä≤, i‚Çë‚Ä≤, t+1] for i‚Çë‚Ä≤ = 1:n‚Çë)\n            c = (1 + r) * x_grid[i‚Çì] + e_grid[i‚Çë] * w - x_grid[i‚Çì‚Ä≤]\n            \n            if c &gt; 0\n                utility = max(u(c, m) + Œ≤ * expected, utility)\n            end\n    \n        end\n    \n        V[i‚Çì, i‚Çë, t] = utility\n    end\n\n    return V\nend\n\nm = Model()\nV = solve(m);\n\n\nA traditional way to show the value function is to plot for selected \\(e\\) and \\(t\\).\n\n\nCode\nps = []\n\nyÃ≤, yÃÑ = minimum(V) * 1.1, maximum(V) + 0.1\nfor (i, t) ‚àà enumerate([1, 4, 7, 10])\n    \n    p = plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\n    push!(ps, p)\nend\n\nplot(ps...)\n\n\n\n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis is not bad, however, we can add more information by using GIF."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#quarto-is-not-just-for-static-reports",
    "href": "blog/2023/06/10/quarto_com_model/index.html#quarto-is-not-just-for-static-reports",
    "title": "Scientific Communication with Quarto: Economic Models",
    "section": "",
    "text": "Notebook coding (Jupyter, Rmarkdown, and Quarto) has gotten popular in the last decade. It allows us to tell a story with code and data, and it makes scientific communication more transparent and reproducible. I use Quarto to share my current results with my supervisor and coauthors, especially when I am in the playground stage of the project.\nWhile it is naturally useful in that it is an easy tool for creating reports, exploiting its HTML feature, we can enrich communication even further. Here, I introduce my use case of GIF and Observable JS for economic models with Julia.\nImagine that you are working on a very simple life-cycle model:\nFor \\(t = 1, \\dots, T\\), households solve \\[\nV(t, e, x) = \\max_{c, x'} \\frac{c^{1 - \\sigma}}{1 - \\sigma} + \\beta \\mathbb{E}V(t + 1, e', x')\n\\] \\[\n\\begin{aligned}\nc + x' &\\le (1 + r)x + ew \\\\\n\\text{Pr}(e' | e) &= \\Gamma(e) \\\\\nc, x' &\\ge 0\n\\end{aligned}\n\\]\nSee the following code for the parameters and the solution algorithm.\n\n\nCode\nusing QuantEcon\nusing Plots\nusing LaTeXStrings\nusing CSV\nusing DataFrames\n\n@kwdef struct Model\n    \n    # Grid for x\n    n‚Çì::Int = 30\n    xÃ≤::Float64 = 0.1\n    xÃÑ::Float64 = 4.0\n    x_grid::Vector{Float64} = range(start = xÃ≤, stop = xÃÑ, length = n‚Çì)\n    \n    # Grid for e: parameters for Tauchen\n    n‚Çë::Int = 10\n    œÉ_Œµ::Float64 = 0.02058\n    Œª_Œµ::Float64 = 0.99\n    m::Float64 = 1.5\n    mc::MarkovChain = tauchen(n‚Çë, Œª_Œµ, œÉ_Œµ, 0.0, m)\n    e_grid::Vector{Float64} = exp.(mc.state_values)\n    P::Matrix{Float64} = mc.p\n\n    # Utility function\n    œÉ::Float64 = 2.0\n    Œ≤::Float64 = 0.97\n    T::Int = 10\n\n    # Prices\n    r::Float64 = 0.07\n    w::Float64 = 5.0\n    \nend\n\nu(c, m::Model) = isone(m.œÉ) ? log(c) : c^(1 - m.œÉ) / (1 - m.œÉ);\n\nfunction solve(m::Model)\n\n    (; T, n‚Çì, n‚Çë, r, w, Œ≤, P, x_grid, e_grid) = m\n\n    V = zeros(n‚Çì, n‚Çë, T)\n\n    for t = T:-1:1, i‚Çì= 1:n‚Çì, i‚Çë = 1:n‚Çë\n        \n        utility = -Inf\n        for i‚Çì‚Ä≤ = 1:n‚Çì\n            \n            expected = (t == T) ? 0.0 : \n                sum(P[i‚Çë, i‚Çë‚Ä≤] * V[i‚Çì‚Ä≤, i‚Çë‚Ä≤, t+1] for i‚Çë‚Ä≤ = 1:n‚Çë)\n            c = (1 + r) * x_grid[i‚Çì] + e_grid[i‚Çë] * w - x_grid[i‚Çì‚Ä≤]\n            \n            if c &gt; 0\n                utility = max(u(c, m) + Œ≤ * expected, utility)\n            end\n    \n        end\n    \n        V[i‚Çì, i‚Çë, t] = utility\n    end\n\n    return V\nend\n\nm = Model()\nV = solve(m);\n\n\nA traditional way to show the value function is to plot for selected \\(e\\) and \\(t\\).\n\n\nCode\nps = []\n\nyÃ≤, yÃÑ = minimum(V) * 1.1, maximum(V) + 0.1\nfor (i, t) ‚àà enumerate([1, 4, 7, 10])\n    \n    p = plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\n    push!(ps, p)\nend\n\nplot(ps...)\n\n\n\n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis is not bad, however, we can add more information by using GIF."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#gif",
    "href": "blog/2023/06/10/quarto_com_model/index.html#gif",
    "title": "Scientific Communication with Quarto: Economic Models",
    "section": "GIF",
    "text": "GIF\nWhile this is not so famous, we can create a GIF animation just by adding @animate macro in Julia.\n\n\nCode\nanim = @animate for t = 1:10\n    plot(m.x_grid, V[:, 1, t], \n        xlabel = \"x\",\n        ylims = (yÃ≤, yÃÑ),\n        label = L\"e_1\", \n        legend = :bottomright, \n        title = \"t = $t\")\n    plot!(m.x_grid, V[:, 5, t], label = L\"e_5\")\n    plot!(m.x_grid, V[:, 10, t], label = L\"e_{10}\")\nend\n\ngif(anim, \"img/anim.gif\", fps = 1)\n\n\n[ Info: Saved animation to C:\\Users\\kazuh\\GitHub\\kazuyanagimoto.github.io\\blog\\2023\\06\\10\\quarto_com_model\\img\\anim.gif\n\n\n\n\n\nSee? This is very intuitive and informative! But if you are interested in the changes with multiple parameters, you may want to try Observable JS."
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#observable-js",
    "href": "blog/2023/06/10/quarto_com_model/index.html#observable-js",
    "title": "Scientific Communication with Quarto: Economic Models",
    "section": "Observable JS",
    "text": "Observable JS\nObservable is a JavaScript notebook that allows us to create interactive visualizations. It is free and open-source, and we can embed it in our Quarto document. Since the Observable is JavaScript-based, we can put an interactive (dynamic) visualization in static HTML documents!\nFor example, you are now interested in the changes in the value function with \\(r\\) and \\(w\\). To implement it in Observable, we first need to create a CSV file1 that contains the results of the simulation.\n\n\nCode\nfunction solve_partial(r, w)\n    m = Model(r = r, w = w)\n    V = solve(m)\n    return [\n        (x = x, ie = i‚Çë, t = t, V = V[i‚Çì, i‚Çë, t], r = m.r, w = m.w)\n        for (i‚Çì, x) ‚àà enumerate(m.x_grid)\n        for (i‚Çë, e) ‚àà enumerate(m.e_grid) if i‚Çë ‚àà [1, 5, 10]\n        for t ‚àà 1:m.T\n    ]\nend\n\nres = Iterators.flatten([solve_partial(r, w) for r ‚àà 0.01:0.02:0.15 for w ‚àà 2.0:0.5:10.0])\ndf = DataFrame(res)\nd = Dict(1 =&gt; \"e‚ÇÅ\", 5 =&gt; \"e‚ÇÖ\", 10 =&gt; \"e‚ÇÅ‚ÇÄ\")\ndf.lbl = [d[i] for i in df.ie]\nCSV.write(\"data.csv\", df);\n\n\nThis CSV file is then loaded in Observable and filtered by the parameters.2\n\n\nCode\ndata = FileAttachment(\"data.csv\").csv()\nfiltered = data.filter(function(sim) {\n    return sim.r == r && sim.w == w && sim.t == t\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAdding sliders and a plot, we have a cool interactive visualization!\n\n\nCode\nviewof t = Inputs.range(\n  [1, 10], \n  {value: 1, step: 1, label: \"t\"}\n)\nviewof r = Inputs.range(\n  [0.01, 0.15], \n  {value: 0.07, step: 0.02, label: \"r\"}\n)\nviewof w = Inputs.range(\n  [2.0, 10.0], \n  {value: 5.0, step: 0.5, label: \"w\"}\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nPlot.plot({\n    marginLeft: 50,\n    height: 400,\n    color: {domain: [\"e‚ÇÅ\", \"e‚ÇÖ\", \"e‚ÇÅ‚ÇÄ\"], legend: true},\n    x: {domain: [0.0, 4.0]},\n    y: {domain: [-5.5, 0.0]},\n    marks: [\n        Plot.lineY(filtered, {x: \"x\", y: \"V\", stroke: \"lbl\"}),\n    ]\n})\n\n\n\n\n\n\n\nHappy Quarto life ü•Ç!"
  },
  {
    "objectID": "blog/2023/06/10/quarto_com_model/index.html#footnotes",
    "href": "blog/2023/06/10/quarto_com_model/index.html#footnotes",
    "title": "Scientific Communication with Quarto: Economic Models",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nYou can use CSV, TSV, JSON, Arrow (uncompressed), and SQLite as data input. See Data Sources‚Ü©Ô∏é\nWhile the parameters r, w, and t are defined in the next cell, the order of the Observable JS cells do not change the results.‚Ü©Ô∏é"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kazuharu Yanagimoto",
    "section": "",
    "text": "I am an associate professor (tenure track) at Kobe University. My research fields are labor, macro, and especially family economics.\n\nRead More ‚Üí"
  },
  {
    "objectID": "research/icky-impala/index.html",
    "href": "research/icky-impala/index.html",
    "title": "A Quantitative Model of Non-Marriage and Fertility",
    "section": "",
    "text": "This paper introduces a new factor contributing to the decline in marriage and fertility: the growth of leisure technology. Over recent decades, high-income countries have experienced two notable shifts in household and family dynamics. First, there has been a significant decline in marriage rates and fertility. Second, time has increasingly been allocated to leisure activities. This paper presents a unified model of marriage and fertility, incorporating intra-household bargaining dynamics. The model, calibrated using data from Japan between 2018 and 2022, is employed to assess the impact of leisure technology growth on marriage and fertility during 2005-2009. The findings highlight that leisure technology growth makes single life relatively more appealing compared to marriage and parenthood. The model explains 22.0% of the decline in marriage and 65.8% of the decrease in fertility."
  },
  {
    "objectID": "research/icky-impala/index.html#abstract",
    "href": "research/icky-impala/index.html#abstract",
    "title": "A Quantitative Model of Non-Marriage and Fertility",
    "section": "",
    "text": "This paper introduces a new factor contributing to the decline in marriage and fertility: the growth of leisure technology. Over recent decades, high-income countries have experienced two notable shifts in household and family dynamics. First, there has been a significant decline in marriage rates and fertility. Second, time has increasingly been allocated to leisure activities. This paper presents a unified model of marriage and fertility, incorporating intra-household bargaining dynamics. The model, calibrated using data from Japan between 2018 and 2022, is employed to assess the impact of leisure technology growth on marriage and fertility during 2005-2009. The findings highlight that leisure technology growth makes single life relatively more appealing compared to marriage and parenthood. The model explains 22.0% of the decline in marriage and 65.8% of the decrease in fertility."
  },
  {
    "objectID": "research/icky-impala/index.html#bibtex-citation",
    "href": "research/icky-impala/index.html#bibtex-citation",
    "title": "A Quantitative Model of Non-Marriage and Fertility",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@unpublished{yanagimoto2024,\n    Title = {A Quantitative Model of Non-Marriage and Fertility:\n             Bargaining over Leisure},\n    Author = {Kazuharu Yanagimoto},\n    Note = {Working paper},\n    Year = {2024},\n    month = aug,\n}"
  },
  {
    "objectID": "research/hetero2wfe/index.html",
    "href": "research/hetero2wfe/index.html",
    "title": "Using Event Studies as an Outcome in Causal Analysis",
    "section": "",
    "text": "We study a causal inference problem with group-level outcomes, which are themselves parameters identified from microdata. We formalize these outcomes using population moment conditions and demonstrate that one-step Generalized Method of Moments (GMM) estimators are generally inconsistent due to an endogenous weighting bias, where policy affects the implicit GMM weights. In contrast, two-stage Minimum Distance (MD) estimators perform well when group sizes are sufficiently large. While MD estimators can still be inconsistent in small groups due to a policy-induced sample selection, we demonstrate that this can be addressed by incorporating auxiliary population information. An empirical application illustrates the practical importance of these findings."
  },
  {
    "objectID": "research/hetero2wfe/index.html#abstract",
    "href": "research/hetero2wfe/index.html#abstract",
    "title": "Using Event Studies as an Outcome in Causal Analysis",
    "section": "",
    "text": "We study a causal inference problem with group-level outcomes, which are themselves parameters identified from microdata. We formalize these outcomes using population moment conditions and demonstrate that one-step Generalized Method of Moments (GMM) estimators are generally inconsistent due to an endogenous weighting bias, where policy affects the implicit GMM weights. In contrast, two-stage Minimum Distance (MD) estimators perform well when group sizes are sufficiently large. While MD estimators can still be inconsistent in small groups due to a policy-induced sample selection, we demonstrate that this can be addressed by incorporating auxiliary population information. An empirical application illustrates the practical importance of these findings."
  },
  {
    "objectID": "research/hetero2wfe/index.html#important-table-figure",
    "href": "research/hetero2wfe/index.html#important-table-figure",
    "title": "Using Event Studies as an Outcome in Causal Analysis",
    "section": "Important table & figure",
    "text": "Important table & figure\n\n\n\n\n\n\nFigure B.2 (a): Child penalties by age at first childbirth\n\n\n\n\n\n\n\nFigure II (b): Effect of the childcare provision expansion on CP (MD)"
  },
  {
    "objectID": "research/hetero2wfe/index.html#bibtex-citation",
    "href": "research/hetero2wfe/index.html#bibtex-citation",
    "title": "Using Event Studies as an Outcome in Causal Analysis",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@online{arkhangelsky2025,\n  title = {Using Event Studies as an Outcome in Causal Analysis},\n  author = {Arkhangelsky, Dmitry and Yanagimoto, Kazuharu and Zohar, Tom},\n  date = {2025-01-29},\n  eprint = {2403.19563},\n  eprinttype = {arXiv},\n  eprintclass = {econ},\n  doi = {10.48550/arXiv.2403.19563},\n  url = {http://arxiv.org/abs/2403.19563},\n  langid = {english},\n  pubstate = {prepublished},\n  keywords = {Economics - General Economics,Quantitative Finance - Economics}\n}"
  },
  {
    "objectID": "research/bayan-bayanihan/index.html",
    "href": "research/bayan-bayanihan/index.html",
    "title": "COVID-19, Food Relief, and Social Distancing",
    "section": "",
    "text": "At the onset of the coronavirus disease (COVID-19) lockdown in the Philippines in April 2020, the Asian Development Bank, in partnership with the Philippine government and the private sector, implemented the Bayan Bayanihan (BB) food relief program which served approximately 162,000 households in the National Capital Region and nearby provinces. This study evaluates the impact of in-kind transfers on social distancing by examining the effectiveness of the BB program in restricting mobility by enabling households to stay at home. We leverage plausibly random variations in the timing of the rollout of the program by employing recent developments in estimating staggered difference-in-differences strategies to more accurately identify the effect of the program. We find supportive evidence that the program could generally discourage mobility. Our findings suggest that in addition to mitigating food insecurity, food transfer programs can also generate multiple dividends by helping families stay home and reducing the spread of COVID-19."
  },
  {
    "objectID": "research/bayan-bayanihan/index.html#abstract",
    "href": "research/bayan-bayanihan/index.html#abstract",
    "title": "COVID-19, Food Relief, and Social Distancing",
    "section": "",
    "text": "At the onset of the coronavirus disease (COVID-19) lockdown in the Philippines in April 2020, the Asian Development Bank, in partnership with the Philippine government and the private sector, implemented the Bayan Bayanihan (BB) food relief program which served approximately 162,000 households in the National Capital Region and nearby provinces. This study evaluates the impact of in-kind transfers on social distancing by examining the effectiveness of the BB program in restricting mobility by enabling households to stay at home. We leverage plausibly random variations in the timing of the rollout of the program by employing recent developments in estimating staggered difference-in-differences strategies to more accurately identify the effect of the program. We find supportive evidence that the program could generally discourage mobility. Our findings suggest that in addition to mitigating food insecurity, food transfer programs can also generate multiple dividends by helping families stay home and reducing the spread of COVID-19."
  },
  {
    "objectID": "research/bayan-bayanihan/index.html#bibtex-citation",
    "href": "research/bayan-bayanihan/index.html#bibtex-citation",
    "title": "COVID-19, Food Relief, and Social Distancing",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@misc{\n  title = {COVID-19, Food Relief, and Social Distancing: Evidence from the Bayan Bayanihan Program in the Philippines},\n  author = {Cabuay, Christopher James and Sawada, Yasuyuki and Tan, Elaine and Martinez, Jr and Boller, Daniel and Bulan, Joseph and Durante, Ron Lester and Okamura, Soyoka and Yanagimoto, Kazuharu},\n  year = {2025},\n  month = may,\n  publisher = {Social Science Research Network},\n  doi = {10.2139/ssrn.5256485},\n}"
  },
  {
    "objectID": "research/common-cheetah/index.html",
    "href": "research/common-cheetah/index.html",
    "title": "Why not Choose a Better Job?",
    "section": "",
    "text": "Japan ranks 125th out of 146 countries in the World Economic Forum‚Äôs Global Gender Gap Index 2023, well below many developed countries, and has one of the largest gender pay gaps among high-income countries. On the other hand, women‚Äôs labor force participation is high in Japan. However, women are much more likely to work in non-regular jobs, which are associated with lower wages and fewer hours. Men, in contrast, have regular, higher-paid jobs with long-hours requirements. In this paper, I build and estimate a model where couples jointly decide their occupations and working hours. Occupations differ in their flexibility. Regular jobs require long working hours, and hourly wages are a convex function of hours worked. Non-regular occupations have a linear mapping between hours worked and hourly wages. The model also allows for social norms that penalize women who earn more than their husbands.Given the inflexibility of regular jobs and social norms, women are more likely to choose non-regular jobs or not to work, and allocate a larger share of their hours for home production. The model can account for nearly all gaps in participation rates, occupational choices, and labor hours, along with 22.4% of the wage gap. Through the lens of the model, the inflexibility of regular jobs explains almost all the gaps in occupational choices and wages, while social norms that penalize women who earn more than their husbands account for all of the gap in the participation rate and half of the gap in hours worked."
  },
  {
    "objectID": "research/common-cheetah/index.html#abstract",
    "href": "research/common-cheetah/index.html#abstract",
    "title": "Why not Choose a Better Job?",
    "section": "",
    "text": "Japan ranks 125th out of 146 countries in the World Economic Forum‚Äôs Global Gender Gap Index 2023, well below many developed countries, and has one of the largest gender pay gaps among high-income countries. On the other hand, women‚Äôs labor force participation is high in Japan. However, women are much more likely to work in non-regular jobs, which are associated with lower wages and fewer hours. Men, in contrast, have regular, higher-paid jobs with long-hours requirements. In this paper, I build and estimate a model where couples jointly decide their occupations and working hours. Occupations differ in their flexibility. Regular jobs require long working hours, and hourly wages are a convex function of hours worked. Non-regular occupations have a linear mapping between hours worked and hourly wages. The model also allows for social norms that penalize women who earn more than their husbands.Given the inflexibility of regular jobs and social norms, women are more likely to choose non-regular jobs or not to work, and allocate a larger share of their hours for home production. The model can account for nearly all gaps in participation rates, occupational choices, and labor hours, along with 22.4% of the wage gap. Through the lens of the model, the inflexibility of regular jobs explains almost all the gaps in occupational choices and wages, while social norms that penalize women who earn more than their husbands account for all of the gap in the participation rate and half of the gap in hours worked."
  },
  {
    "objectID": "research/common-cheetah/index.html#slides",
    "href": "research/common-cheetah/index.html#slides",
    "title": "Why not Choose a Better Job?",
    "section": "Slides",
    "text": "Slides"
  },
  {
    "objectID": "research/common-cheetah/index.html#bibtex-citation",
    "href": "research/common-cheetah/index.html#bibtex-citation",
    "title": "Why not Choose a Better Job?",
    "section": "BibTeX citation",
    "text": "BibTeX citation\n@unpublished{yanagimoto2024,\n    Title = {Why not Choose a Better Job?\n             Flexibility, Social Norms, and Gender Gaps in Japan},\n    Author = {Kazuharu Yanagimoto},\n    Note = {Working paper},\n    Year = {2024},\n    month = mar,\n    series = {CEMFI Working Paper},\n    number = {2405},\n}"
  },
  {
    "objectID": "research/index.html",
    "href": "research/index.html",
    "title": "Research",
    "section": "",
    "text": "WORKING PAPERS\n            \n            \n                \n                    \n                        \n                            \n                                A Quantitative Model of Non-Marriage and Fertility\n                            \n                        \n                        \n                            Bargaining over Leisure\n                        \n                        \n                        \n                            \n                                \n                                \n                                    Marriage\n                                \n                                \n                                \n                                    Fertility\n                                \n                                \n                                \n                                    Japan\n                                \n                                \n                            \n                        \n                        \n                            \n                                \n                                \n                                    \n                                    \n                                    \n                                         Latest WP\n                                    \n                                \n                                \n                            \n                        \n                    \n                    \n                        \n                            \n                        \n                    \n                \n            \n                \n                    \n                        \n                            \n                                Using Event Studies as an Outcome in Causal Analysis\n                            \n                        \n                        \n                            \n                        \n                        \n                            \n                            \n                            \n                                with\n                                \n                                    \n                                        Dmitry Arkhangelsky\n                                    \n                                    \n                                        \n                                            and\n                                        \n                                    \n                                \n                                    \n                                        Tom Zohar\n                                    \n                                    \n                                        \n                                    \n                                \n                            \n                        \n                        \n                            \n                                \n                                \n                                    Two-way Fixed Effects\n                                \n                                \n                                \n                                    Child Penalty\n                                \n                                \n                                \n                                    Gender Gaps\n                                \n                                \n                                \n                                    Netherlands\n                                \n                                \n                            \n                        \n                        \n                            \n                                \n                                \n                                    \n                                    \n                                    \n                                         Latest WP\n                                    \n                                \n                                \n                                \n                                    \n                                    \n                                    \n                                         CEMFI WP\n                                    \n                                \n                                \n                                \n                                    \n                                    \n                                    \n                                         Package (unitdid)\n                                    \n                                \n                                \n                            \n                        \n                    \n                    \n                        \n                            \n                        \n                    \n                \n            \n                \n                    \n                        \n                            \n                                Why not Choose a Better Job?\n                            \n                        \n                        \n                            Flexibility, Social Norms, and Gender Gaps in Japan\n                        \n                        \n                        \n                            \n                                \n                                \n                                    Gender Gaps\n                                \n                                \n                                \n                                    Social Norms\n                                \n                                \n                                \n                                    Japan\n                                \n                                \n                            \n                        \n                        \n                            \n                                \n                                \n                                    \n                                    \n                                    \n                                         Latest WP\n                                    \n                                \n                                \n                                \n                                    \n                                    \n                                    \n                                         CEMFI WP\n                                    \n                                \n                                \n                                \n                                    \n                                    \n                                    \n                                         Slides (SEHO2023)\n                                    \n                                \n                                \n                            \n                        \n                    \n                    \n                        \n                            \n                        \n                    \n                \n            \n                \n                    \n                        \n                            \n                                COVID-19, Food Relief, and Social Distancing\n                            \n                        \n                        \n                            Evidence from the Bayan Bayanihan Program in the Philippines\n                        \n                        \n                            \n                            \n                            \n                                with\n                                \n                                    \n                                        Christopher James Cabuay\n                                    \n                                    \n                                        \n                                            , \n                                        \n                                    \n                                \n                                    \n                                        Yasuyuki Sawada\n                                    \n                                    \n                                        \n                                            , \n                                        \n                                    \n                                \n                                    \n                                        Elaine Tan\n                                    \n                                    \n                                        \n                                            , \n                                        \n                                    \n                                \n                                    \n                                        Arturo Martinez, Jr.\n                                    \n                                    \n                                        \n                                            , \n                                        \n                                    \n                                \n                                    \n                                        Daniel Boller\n                                    \n                                    \n                                        \n                                            , \n                                        \n                                    \n                                \n                                    \n                                        Joseph Albert Nino Bulan\n                                    \n                                    \n                                        \n                                            , \n                                        \n                                    \n                                \n                                    \n                                        Ron Lester Durante\n                                    \n                                    \n                                        \n                                            , and \n                                        \n                                    \n                                \n                                    \n                                        Soyoka Okumura\n                                    \n                                    \n                                        \n                                    \n                                \n                            \n                        \n                        \n                            \n                                \n                                \n                                    COVID-19\n                                \n                                \n                                \n                                    Phillipines\n                                \n                                \n                            \n                        \n                        \n                            \n                                \n                                \n                                    \n                                    \n                                    \n                                         SSRN WP\n                                    \n                                \n                                \n                            \n                        \n                    \n                    \n                \n            \n                    \n    \n                    \n    \n\nNo matching items"
  },
  {
    "objectID": "talks/index.html",
    "href": "talks/index.html",
    "title": "Talks that Last",
    "section": "",
    "text": "Copyright\n\n\n\nExcept where noted, all content is  Kazuharu Yanagimoto and licensed under Creative Commons."
  },
  {
    "objectID": "talks/index.html#section",
    "href": "talks/index.html#section",
    "title": "Talks that Last",
    "section": "2023",
    "text": "2023\n\n\n    \n    \n        \n            \n            \n            \n        \n        \n            \n                \n                Á§æ‰ºöÁßëÂ≠¶„ÅÆ„Åü„ÇÅ„ÅÆDockerÂÖ•ÈñÄ \n                \n            \n            \n                August 31, 2023 ‚àô \n                RA Bootcamp, ÊπòÂçóÂõΩÈöõÊùë\n                \n            \n            VSCode„ÇíÁî®„ÅÑ„ÅüDocker„Å´„Çà„ÇãÁí∞Â¢ÉÊßãÁØâ„ÅÆÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„É¨„ÇØ„ÉÅ„É£„Éº„Åó„Åæ„Åó„Åü\n\n            \n                \n                \n                    \n                    \n                    \n                         Slides\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n    \n    \n    \n        \n            \n            \n            \n        \n        \n            \n                \n                Non-designer's Quarto Presentation \n                \n            \n            \n                March 4, 2023 ‚àô \n                Tokyo.R (via zoom)\n                \n            \n            Á¨¨104ÂõûTokyo.R„Å´„Å¶Quarto„Å´„Çà„ÇãRevealjs„Çπ„É©„Ç§„Éâ„ÅÆ„Éá„Ç∂„Ç§„É≥„Å´„Å§„ÅÑ„Å¶„ÅäË©±„Åó„Åæ„Åó„Åü\n\n            \n                \n                \n                    \n                    \n                    \n                         Slides\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Code\n                    \n                \n                \n            \n        \n    \n    \n    \n        \n            \n            \n            \n        \n        \n            \n                \n                An Advanced Introdution to R \n                \n            \n            \n                January 13, 2023 ‚àô \n                CEMFI, Madrid\n                \n            \n            Here is a talk on practical techniques to write a paper with R\n\n            \n                \n                \n                    \n                    \n                    \n                         Slides\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "talks/index.html#section-1",
    "href": "talks/index.html#section-1",
    "title": "Talks that Last",
    "section": "2022",
    "text": "2022\n\n\n    \n    \n        \n            \n            \n            \n        \n        \n            \n                \n                Git & GitHub Workshop \n                \n            \n            \n                September 23, 2022 ‚àô \n                CEMFI, Madrid\n                \n            \n            Here is a talk I gave on managing codes and data by using GitHub and DVC for economists\n\n            \n                \n                \n                    \n                    \n                    \n                         Slides\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n    \n    \n    \n        \n            \n            \n            \n        \n        \n            \n                \n                El Camino del PhD \n                \n            \n            \n                July 10, 2022 ‚àô \n                Êù±‰∫¨Â§ßÂ≠¶ (via Zoom)\n                \n            \n            Á±≥ÂõΩÂ§ßÂ≠¶Èô¢Â≠¶Áîü‰ºö‰∏ªÂÇ¨„ÅÆÊµ∑Â§ñÂ§ßÂ≠¶Èô¢ÁïôÂ≠¶Ë™¨Êòé‰ºö@Êù±‰∫¨Â§ßÂ≠¶„ÅßÊâÄÂ±û„Åô„ÇãCEMFI„Åß„ÅÆÁîüÊ¥ª„Å´„Å§„ÅÑ„Å¶„ÅäË©±„Åó„Åæ„Åó„Åü\n\n            \n                \n                \n                    \n                    \n                    \n                         Video\n                    \n                \n                \n            \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "talks/index.html#section-2",
    "href": "talks/index.html#section-2",
    "title": "Talks that Last",
    "section": "2021",
    "text": "2021\n\n\n    \n    \n        \n            \n            \n            \n        \n        \n            \n                \n                Git & GitHub Workshop \n                \n            \n            \n                September 24, 2021 ‚àô \n                CEMFI\n                \n            \n            Here is a talk I gave on managing codes and data by using GitHub and DVC for economists\n\n            \n                \n                \n                    \n                    \n                    \n                         Slides\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "software/index.html",
    "href": "software/index.html",
    "title": "Software",
    "section": "",
    "text": "unitdid \n                \n            \n            Providing functions for Unit-level Difference-in-Differences (Arkhangelsky, Yanagimot, and Zohar, 2024)\n            \n                \n                \n                    \n                    \n                    \n                         Documentation\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n        \n    \n    \n    \n        \n            \n                \n                quartomonothemer \n                \n            \n            Makes a Monotone Theme for Quarto Revealjs, {ggplot2}, and {gt}.\n            \n                \n                \n                    \n                    \n                    \n                         Documentation\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n        \n    \n    \n    \n        \n            \n                \n                typstcv \n                \n            \n            Provides supporting functions for Quarto + Typst CV\n            \n                \n                \n                    \n                    \n                    \n                         Documentation\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "software/index.html#r",
    "href": "software/index.html#r",
    "title": "Software",
    "section": "",
    "text": "unitdid \n                \n            \n            Providing functions for Unit-level Difference-in-Differences (Arkhangelsky, Yanagimot, and Zohar, 2024)\n            \n                \n                \n                    \n                    \n                    \n                         Documentation\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n        \n    \n    \n    \n        \n            \n                \n                quartomonothemer \n                \n            \n            Makes a Monotone Theme for Quarto Revealjs, {ggplot2}, and {gt}.\n            \n                \n                \n                    \n                    \n                    \n                         Documentation\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n        \n    \n    \n    \n        \n            \n                \n                typstcv \n                \n            \n            Provides supporting functions for Quarto + Typst CV\n            \n                \n                \n                    \n                    \n                    \n                         Documentation\n                    \n                \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "software/index.html#quarto",
    "href": "software/index.html#quarto",
    "title": "Software",
    "section": "Quarto",
    "text": "Quarto\n\n\n    \n    \n        \n            \n                \n                academic-typst \n                \n            \n            A Quarto + Typst Template for Academic Manuscripts\n            \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Demo Manuscript\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Demo Code\n                    \n                \n                \n            \n        \n        \n            \n                \n                    \n                        \n                    \n                \n            \n        \n    \n    \n    \n        \n            \n                \n                awesomecv-typst \n                \n            \n            A Quarto + Typst Template for Awesome CV\n            \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Demo CV\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Demo Code\n                    \n                \n                \n            \n        \n        \n            \n                \n                    \n                        \n                    \n                \n            \n        \n    \n    \n    \n        \n            \n                \n                clean-typst \n                \n            \n            A Minimalistic Presentation Theme for Quarto + Typst by Touying\n            \n                \n                \n                    \n                    \n                    \n                         GitHub\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Demo Slides\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Demo Code\n                    \n                \n                \n                \n                    \n                    \n                    \n                         Typst Universe\n                    \n                \n                \n            \n        \n        \n            \n                \n                    \n                        \n                    \n                \n            \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html",
    "href": "blog/2023/09/06/docker_template/index.html",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "",
    "text": "Since Docker is a simple and clean method to guarantee the replicablity of the research, I have been using Docker environments for my research since 2020. During these three years, I have been trying to make my environment more minimal and portable so that I can set up, modify, and deliver (to AWS, GCP, etc.) my environment as easily as possible.\nHere is the GitHub template  for this environment. I usually use this template to start a new project. A project made on this template can be replicated by only the 4 steps below.1\n\ngit clone\nIn VSCode, ‚ÄúOpen in Remote Containers‚Äù\nrenv::restore() (pip install -r requirements.txt, Pkg.instantiate())\ndvc pull\n\n\n\nI use R, Julia, \\(\\LaTeX\\), and sometimes Python for my research. Also, I use Git & GitHub for version control and DVC for data management. If you are not familiar with DVC, you may want to read the materials of my previous workshop .\nGiven these conditions, I have concluded that the following setup is the most minimal and portable.\n\nEverything is done in VSCode. Use Dev Containers Extension\nAn rocker-based image since R is always required\nPython is required because DVC is a Python package\nJulia is optional, depending on the project\nTinyTeX is enough for \\(\\LaTeX\\)\nR, Python, Julia, TinyTeX packages are cached in Docker Volumes\n\n\n\n\n\n\n\nWhy R is required? Why rocker-based?\n\n\n\nI think R is required in all the fields of data analysis for writing papers. This is not only because various estimation methods are provided in R in my field, economics, but also because there are no packages that can make graphs as beautiful as ggplot2 and tables as functional as kableExtra in other languages. If you are interested in how I make graphs and tables, please refer to my previous workshop \nAlso, why not Ubuntu or other images? This is because installing R and Rstudio on Linux is more complicated than installing Python or Julia. If you look at the Dockerfile in my template, you will see that installing Python and Julia is quite easy. Hence, I think it is best to use the rocker image since R is required anyway."
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#more-minimal-and-portable-environment",
    "href": "blog/2023/09/06/docker_template/index.html#more-minimal-and-portable-environment",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "",
    "text": "Since Docker is a simple and clean method to guarantee the replicablity of the research, I have been using Docker environments for my research since 2020. During these three years, I have been trying to make my environment more minimal and portable so that I can set up, modify, and deliver (to AWS, GCP, etc.) my environment as easily as possible.\nHere is the GitHub template  for this environment. I usually use this template to start a new project. A project made on this template can be replicated by only the 4 steps below.1\n\ngit clone\nIn VSCode, ‚ÄúOpen in Remote Containers‚Äù\nrenv::restore() (pip install -r requirements.txt, Pkg.instantiate())\ndvc pull\n\n\n\nI use R, Julia, \\(\\LaTeX\\), and sometimes Python for my research. Also, I use Git & GitHub for version control and DVC for data management. If you are not familiar with DVC, you may want to read the materials of my previous workshop .\nGiven these conditions, I have concluded that the following setup is the most minimal and portable.\n\nEverything is done in VSCode. Use Dev Containers Extension\nAn rocker-based image since R is always required\nPython is required because DVC is a Python package\nJulia is optional, depending on the project\nTinyTeX is enough for \\(\\LaTeX\\)\nR, Python, Julia, TinyTeX packages are cached in Docker Volumes\n\n\n\n\n\n\n\nWhy R is required? Why rocker-based?\n\n\n\nI think R is required in all the fields of data analysis for writing papers. This is not only because various estimation methods are provided in R in my field, economics, but also because there are no packages that can make graphs as beautiful as ggplot2 and tables as functional as kableExtra in other languages. If you are interested in how I make graphs and tables, please refer to my previous workshop \nAlso, why not Ubuntu or other images? This is because installing R and Rstudio on Linux is more complicated than installing Python or Julia. If you look at the Dockerfile in my template, you will see that installing Python and Julia is quite easy. Hence, I think it is best to use the rocker image since R is required anyway."
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#docker-environment",
    "href": "blog/2023/09/06/docker_template/index.html#docker-environment",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "Docker Environment",
    "text": "Docker Environment\nFROM rocker/rstudio\n\nRUN apt update && apt install -y \\\n    openssh-client libxt-dev \\\n    # Python\n    python3 python3-pip\n\n# R Package\nRUN R -e \"install.packages(c('renv'))\"\n\n# Julia\nENV JULIA_MINOR_VERSION=1.9\nENV JULIA_PATCH_VERSION=3\n\nRUN wget https://julialang-s3.julialang.org/bin/linux/x64/${JULIA_MINOR_VERSION}/julia-${JULIA_MINOR_VERSION}.${JULIA_PATCH_VERSION}-linux-x86_64.tar.gz && \\\n    tar xvf julia-${JULIA_MINOR_VERSION}.${JULIA_PATCH_VERSION}-linux-x86_64.tar.gz && \\\n    rm julia-${JULIA_MINOR_VERSION}.${JULIA_PATCH_VERSION}-linux-x86_64.tar.gz && \\\n    ln -s $(pwd)/julia-$JULIA_MINOR_VERSION.$JULIA_PATCH_VERSION/bin/julia /usr/bin/julia\n\n# DVC Path\nENV PATH $PATH:~/.pip/bin\n\n# Package Cahce & Permission\nRUN cd /home/rstudio && mkdir .pip .cache .cache/R .cache/R/renv .TinyTeX .julia && \\\n    chown rstudio:rstudio .pip .cache .cache/R .cache/R/renv .TinyTeX .julia\n\nR\nSince I cached R packages in Docker Volumes, I use rocker/rstudio for the base image, which is simplest in the other rocker images. However, it does not have renv, I manually install it in the Dockerfile. Only if you use geospatial packages, you may want to use rocker/geospatial instead.\nThe renv is the best package manager for R, in my opinion. You can record the packages you installed by renv::snapshot() in renv.lock file. Then, you can reproduce the same environment by renv::restore() in other computers. If you are interested in renv, please refer to my previous workshop.\n\n\nPython\nI usually use Python only for DVC, so I don‚Äôt care much about the version. I install the latest version that can be installed with apt. In case that I need to use Python for analysis (e.g., scraping or natural language processing), I manage the version of the packages by pip and requirements.txt.\n\npip install -r requirements.txt for installation\npip freeze &gt; requirements.txt for recording\n\n\n\n\n\n\n\nWhy do I manage the packages by requirements.txt?\n\n\n\nAs of September 2023, I think the virtual environment of Python is in chaos. For example, there are various tools such as venv, anaconda, pyenv, poetry, and rye, and I don‚Äôt know which one is the best and long-lasting. To be honest, I think pip install -r requirements.txt and pip freeze &gt; requirements.txt are enough because we are building the environment with Docker. However, I am not a researcher mainly using Python, so please let me know if there is any misunderstanding.\n\n\n\n\nJulia\nYou can specify the version of Julia in the Dockerfile by ENV JULIA_MINOR_VERSION=1.9 and ENV JULIA_PATCH_VERSION=3. From my experience, Julia has been updated to be faster, but I have not encountered any bugs. Therefore, I usually specify the latest version and keep updating it during the project.\nFor the package management of Julia, I use Project.toml. The workflow is as follows.\n\nCreate an empty Project.toml file\nActivate the environment by Pkg.activate()\nInstall the packages by Pkg.add(\"Package Name\"), which automatically updates Project.toml\nWhen you clone the project, activate the environment by Pkg.activate() and install the packages by Pkg.instantiate()\n\n\n\nOther Softwares & Settings\n\nopenssh-client is required for SSH communication with GitHub from the container\nSince DVC is a Python package, I add ~/.pip/bin to the PATH\nI change the permission of the cached packages. This is because when you mount Docker Volumes, the packages are created with root permission, and you cannot write them with user permission\n\n\n\n\n\n\n\nUsing Git & GitHub in the container\n\n\n\nSince I work in the container environment, I want to run git pull and git push in the container. To do so, you need to move the SSH key for the GitHub from the host environment to the container. This can be done by adding the key to ssh-agent. With the Remote Containers feature, you can use the key inside of the container automatically. The settings are different for each host OS, so I recommend reading the section ‚ÄúSharing Git credentials with your container‚Äù in the official documentation of Developping inside a container.\nI use Windows WSL as the host OS, so I add the following to ~/.bash_profile. The difference from the official documentation is that I added ssh-add at the end.\n\n\n~/.bash_profile\n\neval \"$(ssh-agent -s)\"\nif [ -z \"$SSH_AUTH_SOCK\" ]; then\n   # Check for a currently running instance of the agent\n   RUNNING_AGENT=\"`ps -ax | grep 'ssh-agent -s' | grep -v grep | wc -l | tr -d '[:space:]'`\"\n   if [ \"$RUNNING_AGENT\" = \"0\" ]; then\n        # Launch a new instance of the agent\n        ssh-agent -s &&gt; $HOME/.ssh/ssh-agent\n   fi\n   eval `cat $HOME/.ssh/ssh-agent`\nfi\nssh-add $HOME/.ssh/id_ed25519\n\n\n\n\n\ndocker-compose.yml\nservices:\n    rstudio:\n        build:\n            context: .\n        environment:\n            - TZ=Europe/Madrid\n            - DISABLE_AUTH=true\n            - PYTHONUSERBASE=/home/rstudio/.pip\n        volumes:\n            - .:/home/rstudio/work\n            - renv:/home/rstudio/.cache/R/renv\n            - pip:/home/rstudio/.pip\n            - julia:/home/rstudio/.julia\n            - TinyTeX:/home/rstudio/.TinyTeX\n            - fonts:/usr/share/fonts\nvolumes:\n  renv:\n    external: true\n  pip:\n    external: true\n  julia:\n    external: true\n  TinyTeX:\n    external: true\n  fonts:\n    external: true\nThe most important point is that I mount the renv cache to the host‚Äôs Docker Volumes. This means that once you install the R packages, they will be saved on the host side. Therefore, you don‚Äôt need to install R packages every time you build the Docker. Also, when you use Docker environments for multiple projects, you don‚Äôt need to install the same packages multiple times. The same is true for Julia, Python, and TinyTeX packages.\n\n\n\n\n\n\nWhat is Docker Volumes?\n\n\n\nDocker Volumes is a mechanism for storing Docker container data on the host side. This allows you to keep the data even if you delete the container. Unlike the binding mount, the data is stored in hidden folders on the host side and optimized for Docker, so it is faster than the binding mount. When you use this template for the first time, you need to create Docker Volumes by the following command.\ndocker volume create renv\ndocker volume create pip\ndocker volume create julia\ndocker volume create TinyTeX\ndocker volume create fonts\nIn some articles on the Internet (including my previous post), the author binding-mounts package caches into the host area directly, such as ~/.cache/R/renv. This is not recommended since the file system of MacOS and Windows (except WSL2) is different from Linux (Docker). The bind mounts may significantly slow down the execution of the package."
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#latex-environment",
    "href": "blog/2023/09/06/docker_template/index.html#latex-environment",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "\\(\\LaTeX\\) Environment",
    "text": "\\(\\LaTeX\\) Environment\nTo use \\(\\LaTeX\\) in Docker, you can install texlive with apt or use it as a separate service in docker-compose.yml. However, there is a very light and convenient package called tinytex in R2, so I will use it.\n\nWhat is TinyTeX?\nTinyTeX is a super lightweight distribution of \\(\\LaTeX\\). It automatically installs missing packages and compiles them, so you don‚Äôt need to install a large number of packages in advance to build a \\(\\LaTeX\\) environment. This is why TinyTeX is used by default when compiling PDFs with Rmarkdown or Quarto. This lightness is very compatible with the Docker environment, and it is also adopted in the rocker/verse image. In this template, I will use TinyTeX as the \\(\\LaTeX\\) compiler in VSCode. Also, the \\(\\LaTeX\\) packages installed at this time are cached in Docker Volumes.\n\n\nInstalling TinyTeX and Setting in VSCode\nWhen installing TinyTeX, there is an R command called tinytex::install_tinytex(). However, since I want to cache the packages installed with TinyTeX in Docker Volumes, I specify the installation folder as follows.\ntinytex::install_tinytex(dir = \"/home/rstudio/.TinyTeX\", force = TRUE)\nNote that once you install it in Docker Volumes, you don‚Äôt need to run this command again in other Docker projects.\nTo use TinyTeX as the \\(\\LaTeX\\) compiler in VSCode, edit settings.json as this. Note that if you set it in WORKSPACE_DIR/.vscode/settings.json, it will only be valid for this workspace. Since the .vscode/settings.json is often git-ignored in team projects, I have renamed it to _settings.json in the template.\n\n\n\n\n\n\nWhy I don‚Äôt use Overleaf?\n\n\n\nOverleaf is probably the first candidate for \\(\\LaTeX\\) editors, however, I don‚Äôt use Overleaf for the following reasons.\n\nIn the free version, Overleaf cannot be linked with GitHub\nGitHub branches cannot be separated\nIf I want to modify the appearance of figures and tables in slides and papers, I have to upload them every time\nThe number of files is limited to a maximum of 2000 files per project\nSometimes the service goes down. This is fatal if it is before the deadline\nIt is a waste of time to use an editor that cannot use GitHub Copilot or any other AIs ü´†\n\nI think the setup with TinyTeX and VSCode‚Äôs LaTeX Workshop extension is not so difficult, and the compilation is (usually) faster on your local computer."
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#vscode-extensions",
    "href": "blog/2023/09/06/docker_template/index.html#vscode-extensions",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "VSCode Extensions",
    "text": "VSCode Extensions\nThe settings for VSCode Remote Containers are as follows. It is almost intuitive, but I would like to explain some of the extensions.\n{\n    \"name\": \"${localWorkspaceFolderBasename}\",\n    \"dockerComposeFile\": \"../docker-compose.yml\",\n    \"service\": \"rstudio\",\n    \"remoteUser\": \"rstudio\",\n    \"extensions\": [\n        \"REditorSupport.r\",\n        \"quarto.quarto\",\n        \"znck.grammarly\",\n        \"julialang.language-julia\",\n        \"janisdd.vscode-edit-csv\",\n        \"James-Yu.latex-workshop\",\n        \"GitHub.copilot\"\n    ],\n    \"forwardPorts\": [8080, 8787],\n    \"workspaceFolder\": \"/home/rstudio/work\",\n    \"shutdownAction\": \"stopCompose\",\n}\n\nGramarly Extension\nAn unofficial extension of the English proofreading service Grammarly. Just by installing this, it will correct spelling mistakes, missing ‚Äús‚Äù in the third person singular, and articles. You can also use the paid version by logging in. Also, it can be used in .tex, .Rmd, and .qmd files. I would like you to refer to the help of the extension itself for details, but in short, you can add the extension name by adding the following to the config file.\n{\n  \"grammarly.files.include\": [\"**/README.md\", \"**/readme.md\", \"**/*.txt\", \"**/*.tex\", \"**/*.Rmd\", \"**/*.qmd\"]\n}\n\n\nEdit CSV\nThis is an extension that allows you to quickly preview and edit CSV and TSV files. Without this, you cannot preview or edit CSV files without using spreadsheet software such as Excel.\n\n\nGitHub Copilot\nAs of September 2023, it is a waste of time to code without GitHub Copilot."
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#workflows",
    "href": "blog/2023/09/06/docker_template/index.html#workflows",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "Workflows",
    "text": "Workflows\nI will introduce the workflow when starting a project using this template and when working. The administrator creates a project using this template, and the collaborators clone the project and work on it.\n\nAdministrator\n\nCreate Docker Volumes. (Only for the first time using this template)\n\ndocker volume create renv\ndocker volume create pip\ndocker volume create julia\ndocker volume create TinyTeX\ndocker volume create fonts\n\nCreate a new repository from this template on GitHub and clone it to your local computer\nOpen this repository in VSCode. (Remote Containers)\nCreate an R project. If you use Rstudio, access localhost:8787 and create a project.\nStart package management with renv::init()\nInstall DVC with pip install dvc dvc-gdrive. This command is not required after the second time because of the pip cache\nSet up the DVC environment\n\nCreate a folder on Google Drive and copy its ID\nRun dvc init && dvc remote add -d myremote gdrive://&lt;Google Drive folder ID&gt;\nShare the Google Drive folder with the collaborators (as a normal Google Drive folder)\n\nSet up VSCode settings for LaTeX\n\nFor the first time, run tinytex::install_tinytex(dir = \"/home/rstudio/.TinyTeX\", force = TRUE)\nCopy .vscode/_settings.json to .vscode/settings.json\n\nSet up Julia environment. Create an empty Project.toml file and activate it with Pkg.activate().\n\n\n\nCollaborators\n\nCreate Docker Volumes. (Only for the first time using this template)\nClone the repository created by the administrator on GitHub\nOpen this repository in VSCode. (Remote Containers)\nOpen the R project. (If you use Rstudio, access localhost:8787 and open the project.)\nInstall the R packages with renv::restore()\nInstall Python packages (including DVC) with pip install -r requirements.txt\nDownload the data with dvc pull\nSet up VSCode settings for LaTeX\n\nFor the first time, run tinytex::install_tinytex(dir = \"/home/rstudio/.TinyTeX\", force = TRUE)\nCopy .vscode/_settings.json to .vscode/settings.json\n\nInstall Julia packages with Pkg.activate(); Pkg.instantiate()\n\n\n\nDuring Work\n\nWhen you add an R package, record it with renv::snapshot()\nWhen you add a Julia package, add it with Pkg.add(\"Package Name\"). It will be automatically recorded in Project.toml\nWhen you add a Python package, add it with pip install Package Name and record it with pip freeze &gt; requirements.txt\nWhen you add data with DVC, add it with dvc add. Usually, just add the directory with dvc add data/\nAfter the above work, git add, git commit, and git push\nWhen you finish the work, upload the data with dvc push"
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#fin.",
    "href": "blog/2023/09/06/docker_template/index.html#fin.",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "Fin.",
    "text": "Fin.\nThe above is my template for a minimal and portable research environment and how to use it. Since everything is done in VSCode and Docker, you can reproduce exactly the same environment on other computers with very few steps. Also, since all the packages are cached, the build time of Docker is also significantly reduced, resulting in a lower maintenance cost. The best environment for me may not be the best environment for you, but I hope this article will help you in your research ü•Ç!"
  },
  {
    "objectID": "blog/2023/09/06/docker_template/index.html#footnotes",
    "href": "blog/2023/09/06/docker_template/index.html#footnotes",
    "title": "A Minimal & Portable Research Environment with Docker",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nYou need to install Docker and VSCode in advance. For the first project on the computer, you need to set up the Docker Volumes.‚Ü©Ô∏é\nTinyTeX can also be installed and used in an environment without R. For details, please refer to the official documentation.‚Ü©Ô∏é"
  },
  {
    "objectID": "blog/2023/04/30/quarto_multi_lang/index.html",
    "href": "blog/2023/04/30/quarto_multi_lang/index.html",
    "title": "Quarto Is Multi-lingual!",
    "section": "",
    "text": "A common misunderstanding about Quarto is that we cannot use multiple languages within a document. Indeed, Jupyter cannot use multiple languages within a document, and we usually use the jupyter engine for Python and Julia (and it is officially supported.)\nHowever, knitr has already been able to execute multiple languages tons of years ago, so why can‚Äôt we do it in Quarto?\nLet‚Äôs see the following example with palmerpenguins::penguins of Horst, Hill, and Gorman (2020)"
  },
  {
    "objectID": "blog/2023/04/30/quarto_multi_lang/index.html#tabset",
    "href": "blog/2023/04/30/quarto_multi_lang/index.html#tabset",
    "title": "Quarto Is Multi-lingual!",
    "section": "Tabset",
    "text": "Tabset\nI think, one of the most useful case is when you want to support multiple source codes in a textbook or lecture notes. Quarto supports Tabset layout and it‚Äôs so smart!\n\nRPythonJuliaStata\n\n\n\npenguins |&gt;\n  ggplot(aes(x = flipper_length_mm, y = body_mass_g,\n             color = species, shape = species)) +\n  geom_point(size = 3) +\n  scale_color_manual(values = c(\"darkorange\",\"purple\",\"cyan4\")) +\n  labs(x = \"Flipper Length (mm)\", y = \"Body Mass (g)\", color = NULL, shape = NULL) +\n  theme_minimal() +\n  theme(legend.position = c(0.9, 0.1),\n        panel.grid.major = element_blank())\n\n\n\n\n\n\n\n\n\n\n\nplt.clf()\n\nsns.scatterplot(data=penguins, x='flipper_length_mm', y='body_mass_g',\n                hue='species', style=\"species\",\n                palette=['#FF8C00', '#159090', '#A034F0'])\n\nplt.xlabel('Flipper Length (mm)')\nplt.ylabel('Body Mass (g)')\nplt.legend(title = \"\")\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n@df penguins scatter(\n  :flipper_length_mm,\n  :body_mass_g,\n  group = :species,\n  markersize = 5,\n  markershape = [:circle :utriangle :rect ],\n  markerstrokecolor = :white,\n  palette = [\"#FF8C00\", \"#159090\", \"#A034F0\"],\n  xaxis = \"Flipper Length (mm)\",\n  yaxis = \"Body Mass (g)\",\n  size = (480, 320),\n  dpi = 300,\n  legendfontsize = 8,\n  tickfontsize = 6,\n  guidefontsize = 10,\n  margin=Plots.Measures.Length(:mm, 2.0)\n)\n\n\n\n\n\n\n\n\n\n\n\nuse data/palmerpenguins, clear\n\nseparate body_mass_g, by(species)\ntwoway scatter body_mass_g? flipper_length_mm, ///\n   mcolor(orange emerald purple) mlab(\"\") ///\n   msymbol(O T S) ///\n   xtitle(\"Flipper Length (mm)\") ytitle(\"Body Mass (g)\") ///\n   legend(order(1 \"Adelie\" 2 \"Chinstrap\" 3 \"Gentoo\") pos(11) ring(0) col(1)) ///\n   plotregion(fcolor(white)) graphregion(fcolor(white))\nqui graph export \"figure/stata/scatter.svg\", replace\n\n` \n\n\n\nHave a happy Quarto life ü•Ç!"
  },
  {
    "objectID": "blog/2024/04/05/index.html",
    "href": "blog/2024/04/05/index.html",
    "title": "Researching as if to Blog",
    "section": "",
    "text": "Jupyter Notebook and R Markdown are very useful tools for communication with co-authors and supervisors during the trial and error stage of research. However, as these files accumulate, it becomes difficult to remember the contents and you have to open them one by one.\nTherefore, I thought about managing these analysis results like a blog. If you arrange daily reports in chronological order, it is natural to manage them in blog format. By using the functions of an existing blog, you can make it easier to find the content from the title or thumbnail, and manage it more efficiently with features such as tagging and search.\nIn this article, I will introduce how to manage research like a blog using Quarto. I myself show this type of blog during meetings with supervisors or co-authors to discuss the progress of the week. Also, I have provided a sample blog below, so you can get an idea. You can also check the source code on GitHub Repository.\nQuarto Research Blog - Researching as if to Blog \n\n\nThe extent to which research progress should be made public varies by project and field. Considering the balance between accessibility and security, there are three main ways to share:\n\nShare a blog (HTML files) compiled locally through GitHub\n\nPros: High security. Free\nCons: The recipient needs to git pull and open the HTML file locally\n\nHost on GitHub Pages\n\nPros: The recipient can view it in a browser. Free\nCons: Basically, it is open to the whole world. GitHub Enterprise can be used to make it private, but it is a bit expensive\n\nAdd Basic authentication to AWS S3 + CloudFront\n\nPros: The recipient can view it in a browser\nCons: AWS configuration is required. Costs tens of cents of dollars per month\n\n\nIn this article, I will introduce the most versatile third method. In fact, in my research project, I use the third method to share a private site that is somewhat private while minimizing the burden on the recipient (supervisors and co-authors). The aforementioned demo site is deployed using the second method. You can view the private site deployed with the third method from here (username: abcd, password: 1234)."
  },
  {
    "objectID": "blog/2024/04/05/index.html#make-jupyter-notebook-or-r-markdown-a-blog",
    "href": "blog/2024/04/05/index.html#make-jupyter-notebook-or-r-markdown-a-blog",
    "title": "Researching as if to Blog",
    "section": "",
    "text": "Jupyter Notebook and R Markdown are very useful tools for communication with co-authors and supervisors during the trial and error stage of research. However, as these files accumulate, it becomes difficult to remember the contents and you have to open them one by one.\nTherefore, I thought about managing these analysis results like a blog. If you arrange daily reports in chronological order, it is natural to manage them in blog format. By using the functions of an existing blog, you can make it easier to find the content from the title or thumbnail, and manage it more efficiently with features such as tagging and search.\nIn this article, I will introduce how to manage research like a blog using Quarto. I myself show this type of blog during meetings with supervisors or co-authors to discuss the progress of the week. Also, I have provided a sample blog below, so you can get an idea. You can also check the source code on GitHub Repository.\nQuarto Research Blog - Researching as if to Blog \n\n\nThe extent to which research progress should be made public varies by project and field. Considering the balance between accessibility and security, there are three main ways to share:\n\nShare a blog (HTML files) compiled locally through GitHub\n\nPros: High security. Free\nCons: The recipient needs to git pull and open the HTML file locally\n\nHost on GitHub Pages\n\nPros: The recipient can view it in a browser. Free\nCons: Basically, it is open to the whole world. GitHub Enterprise can be used to make it private, but it is a bit expensive\n\nAdd Basic authentication to AWS S3 + CloudFront\n\nPros: The recipient can view it in a browser\nCons: AWS configuration is required. Costs tens of cents of dollars per month\n\n\nIn this article, I will introduce the most versatile third method. In fact, in my research project, I use the third method to share a private site that is somewhat private while minimizing the burden on the recipient (supervisors and co-authors). The aforementioned demo site is deployed using the second method. You can view the private site deployed with the third method from here (username: abcd, password: 1234)."
  },
  {
    "objectID": "blog/2024/04/05/index.html#writing-a-blog-with-quarto",
    "href": "blog/2024/04/05/index.html#writing-a-blog-with-quarto",
    "title": "Researching as if to Blog",
    "section": "Writing a Blog with Quarto",
    "text": "Writing a Blog with Quarto\nQuarto is a tool that extends R Markdown, and since it runs in the background with knitr, you can use R Markdown features as they are. Also, by using jupyter as the background engine, you can handle other languages such as Python and Julia.1\nIn this article, I will explain the unique features of Quarto and how to set it up as a website. To learn more about Quarto Markdown syntax and basic features, please refer to the official documentation.\n\nDifferences from R Markdown\nQuarto can be written just like R Markdown, but the only difference is in the chunk options.\n\n\nR markdown\n\n```{r, include = FALSE}\nmdl &lt;- lm(mpg ~ wt, data = mtcars)\n```\n\n\n\nQuarto\n\n```{r}\n#| include: false\nmdl &lt;- lm(mpg ~ wt, data = mtcars)\n```\n\nI think this is a good notation because it is just a comment from the perspective of code execution, and it allows them to coexist with other languages such as Python and Julia.\nOther notable features include Tabset Panel and Callout Blocks, which make it easier to read. Also, the notation for citations has become easier to understand.\n\n\nSetting up the Website\n\n_quarto.yml\nThis is a project-level configuration file. For details, please refer to the official documentation. My configuration file looks like this.\nproject:\n  type: website\n  output-dir: docs\n  preview: \n    port: 5556\n    browser: true\n    watch-inputs: true\n    navigate: true\n\nwebsite:\n  title: \"Quarto Research Blog\"\n  favicon: favicon.svg\n  navbar:\n    right:\n      - icon: github\n        href: https://github.com/kazuyanagimoto/quarto-research-blog\nformat:\n  html:\n    theme:\n      - cosmo\n      - custom.scss\n\noutput-dir: docs: When hosting with GitHub Pages, you need to output HTML files to the docs directory. If you deploy with GitHub Actions, it doesn‚Äôt have to be docs\nfavicon: The favicon file. I often use the one from Icooon Mono\ntheme: You can choose a theme from Bootswatch\ncustom.scss: You can set the CSS. Quarto has pre-defined Sass Variables, so you can easily customize it\n\n\n\n\n\n\n\nProject‚Äôs Code Name\n\n\n\n\n\nResearch often goes in a different direction from the research question set at the beginning. Therefore, the name of the repository and the actual research may differ. Following Dr.¬†Andrew Heiss‚Äôs idea, I give the project a code name that has nothing to do with the research.\nFor example, the project I researched gender gaps in Japan has the code name common cheetah. This is generated using the codename R package.\nlibrary(codename)\ncodename_message()\n#&gt; code name generated by {codename} v.0.5.0. R version 4.2.2 (2022-10-31).\n\ncodename(seed = 210715, type = \"ubuntu\") # The day I started the project\n#&gt; [1] \"common cheetah\"\nBy the way, with this Ubuntu-styling, an animal name is always assigned, so it‚Äôs easy to decide on a favicon. I don‚Äôt know if the co-authors will find it interesting‚Ä¶\n\n\n\n\n\n_metadata.yml\nThis is a directory-level configuration file. For details, please refer to the official documentation.\nfreeze: auto\ntitle-block-banner: true\nlast-updated: last-modified\n\nexecute:\n  echo: false\n  warning: false\n  message: false\n\nformat:\n  html:\n    code-tools: true\n\nfreeze: auto: Saves the results of code cells. If there is a change in the code, it will automatically update. This speeds up the compilation of the blog and allows you to generate HTML without running the code, such as with GitHub Actions\necho, warning, message are hidden as they are not needed when reading the results as a blog\ncode-tools: true: This allows you to check the code from the top right of the page. This is useful for co-authors to quickly check the analysis content\n\n\n\nThumbnails\nIf you want to use an image file on your computer as a thumbnail, you can specify it with the image tag in the YAML header.\n---\ntitle: A Blog Post\nimage: path/to/image.jpg\n---\nIf you want to use a graph in the analysis as a thumbnail, you can set the chunk option classes: preview-image.\n\n```{.r}\n#| classes: preview-image\nplot(cars)\n```\n\n\n.gitignore\nWith the above settings, you can compile HTML files locally. Also, if you push it to GitHub as it is, you can publish it with GitHub Pages by setting docs/ as the root directory. However, managing automatically generated HTML files and libraries in Git is not an elegant way. It‚Äôs a hassle to resolve conflicts when they occur, and the repository size will increase. Therefore, ignore the docs/ directory in .gitignore and automatically generate HTML files with GitHub Actions as described below.\n\n\n.gitignore\n\n/.quarto/\n/_site/\n/docs/\n\n\n\n\n\n\n\nPublishing with GitHub Pages\n\n\n\n\n\nIf it is fine to publish with GitHub Pages, you can run the following command to generate HTML files in the gh-pages branch and publish them as GitHub Pages.\nquarto publish gh-pages --no-browser\nYou can run this command whenever you write an article, but you can automate it with the following GitHub Actions.\n\n\n.github/workflows/publish.yml\n\non:\n  workflow_dispatch:\n  push:\n    branches: main\n\nname: Quarto Publish\n\njobs:\n  build-deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - name: Check out repository\n        uses: actions/checkout@v4\n\n      - name: Set up Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n\n      - name: Render and Publish\n        uses: quarto-dev/quarto-actions/publish@v2\n        with:\n          target: gh-pages\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}"
  },
  {
    "objectID": "blog/2024/04/05/index.html#adding-basic-authentication-to-aws-s3-cloudfront",
    "href": "blog/2024/04/05/index.html#adding-basic-authentication-to-aws-s3-cloudfront",
    "title": "Researching as if to Blog",
    "section": "Adding Basic Authentication to AWS S3 + CloudFront",
    "text": "Adding Basic Authentication to AWS S3 + CloudFront\nBy using AWS S3 and CloudFront, you can publish a website with password authentication (Basic authentication) at a relatively low cost (about tens of cents per month). Please note that AWS specifications and pricing may change, so please follow the steps below at your own risk.\n\nCreate an S3 Bucket and Automatically Deploy with GitHub Actions\n\nStep 1: Create an S3 Bucket\nCreate a bucket from S3 in the AWS console. It is easy to understand if the bucket name is the same as the GitHub repository. The settings can be left as default. Since access is via CloudFront, block all public access to the bucket.\n\n\nStep 2: Create an IAM User and Get the Access Key\nCreate a user from IAM in the AWS console and give it full access to S3 (AmazonS3FullAccess) as the policy. Then, get the access key and save it in a safe place.\n\n\nStep 3: Register the Access Key in GitHub Secrets\nOpen the repository‚Äôs Settings from GitHub and register AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY as new repository secrets.\n\n\n\nStep 4: Deploy with GitHub Actions\nBy setting up GitHub Actions as follows, HTML files are automatically deployed to the S3 bucket when pushed to the main branch.\n\n\n.github/workflows/publish.yml\n\non:\n  workflow_dispatch:\n  push:\n    branches: main\n\nname: Quarto Publish\n\njobs:\n  build-deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - name: Check out repository\n        uses: actions/checkout@v4\n\n      - name: Set up Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n\n      - name: Render Quarto Project\n        uses: quarto-dev/quarto-actions/render@v2\n      \n      - name: Configure AWS Credentials\n        uses: aws-actions/configure-aws-credentials@v1\n        with:\n          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n          aws-region: us-west-2\n\n      - name: S3 sync\n        working-directory: docs\n        run: aws s3 sync . s3://quarto-research-blog --delete\n\n\n\n\nSet Basic Authentication with CloudFront\nYou can set a password with Basic authentication by accessing the S3 bucket via CloudFront.\n\nStep 1: Create a CloudFront Function\nFrom the AWS console, create a function from CloudFront ‚Üí Functions ‚Üí Create function.\nfunction handler(event) {\n  var request = event.request;\n  var headers = request.headers;\n  var uri = request.uri;\n\n  // echo -n user:pass | base64\n  var authString = \"Basic XXXXXXXXXXXXXXXXXXX\";\n\n  if (\n    typeof headers.authorization === \"undefined\" ||\n    headers.authorization.value !== authString\n  ) {\n    return {\n      statusCode: 401,\n      statusDescription: \"Unauthorized\",\n      headers: { \"www-authenticate\": { value: \"Basic\" } }\n    };\n  }\n  \n  // Check whether the URI is missing a file name.\n    if (uri.endsWith('/')) {\n        request.uri += 'index.html';\n    }\n    // Check whether the URI is missing a file extension.\n    else if (!uri.includes('.')) {\n        request.uri += '/index.html';\n    }\n  \n  return request;\n}\nIn the authString, set the base64-encoded username and password. For example, if you have a username abcd and password 1234 like the demo site, you can encode it with echo -n abcd:1234 | base64. You can encode it in CloudShell at the bottom left of the AWS console.\nIn the latter half of the code, index.html is added if the URL ends with / or if there is no extension. The index.html in the subdirectory is not displayed when accessing the S3 bucket via CloudFront.\n\n\n\n\n\n\nCaution\n\n\n\nDon‚Äôt forget to publish the function you created.\n\n\n\n\n\n\n\n\nIP Address Restrictions\n\n\n\n\n\nIf you want to increase security, you can restrict access by IP address. In the case of universities and companies, you often have a fixed IP address, so it should be relatively easy to set up. Enter the allowed IP addresses in IP_WHITE_LIST.\nfunction handler(event) {\n  var request = event.request;\n  var clientIP = event.viewer.ip;\n  var headers = request.headers;\n  var uri = request.uri;\n  \n  //-------------------\n  // Check IP\n  //-------------------\n  var IP_WHITE_LIST = [\n   'xxx.xxx.xxx.xxx',\n  ];\n    \n  var isPermittedIp = IP_WHITE_LIST.includes(clientIP);\n  \n  if (!isPermittedIp) {\n    var response = {\n        statusCode: 403,\n        statusDescription: 'Forbidden',\n    }\n    return response;\n  }\n  \n  //---------------------------\n  // Basic Authentication\n  //---------------------------\n  \n  // echo -n user:pass | base64\n  var authString = \"Basic XXXXXXXXXXXXXXXXXXX\";\n\n  if (\n    typeof headers.authorization === \"undefined\" ||\n    headers.authorization.value !== authString\n  ) {\n    return {\n      statusCode: 401,\n      statusDescription: \"Unauthorized\",\n      headers: { \"www-authenticate\": { value: \"Basic\" } }\n    };\n  }\n  \n  //--------------------------------------\n  // Correct Subdirectory index.html\n  //-------------------------------------\n  \n  // Check whether the URI is missing a file name.\n    if (uri.endsWith('/')) {\n        request.uri += 'index.html';\n    }\n    // Check whether the URI is missing a file extension.\n    else if (!uri.includes('.')) {\n        request.uri += '/index.html';\n    }\n  \n  return request;\n}\n\n\n\n\n\nStep 2: Create a CloudFront Distribution\nCreate a distribution from CloudFront in the AWS console.\n\nOrigin Domain Name: Select the S3 bucket you created earlier\nOrigin Access\n\nSelect Origin access control settings\nCreate a new OAC\n\nViewer: Select Redirect HTTP to HTTPS\nAssociate Function: Select CloudFront Functions and select the function you created earlier\nWeb Application Firewall (WAF): If enabled, it will incur a fee. I think it is unnecessary this time\nSupported HTTP Versions: I selected HTTP/2 and HTTP/3\nDefault Root Object: Select index.html\n\n\n\nStep 3: Change the S3 Bucket Policy\nAfter completing the above, you will be asked to update the S3 bucket policy.\n\nPress the Copy Policy button and copy the Policy Statement\nSelect the S3 bucket, edit the bucket policy from the Permissions tab, and paste the policy statement you copied earlier\n\n\n\nStep 4: Test\nCopy the distribution domain name from the CloudFront distribution and access it in your browser. You will be asked for a password, and by entering the username and password you set earlier, the blog should be displayed.\n\n\n\nOptional: Setting up a Subdomain\nIf you have your own domain, you can create a subdomain for free to have your own URL. I have a domain kazuyanagimoto.com that I acquired from Google Domains, so I can create up to 100 subdomains for free.\n\nStep 1: Create a Subdomain\nCreate a subdomain from the DNS settings of your domain. In the case of this demo site, create a CNAME record for the subdomain quarto-research-blog.kazuyanagimoto.com and set the CloudFront distribution domain name (without https://).\n\n\nStep 2: Create a Custom SSL Certificate\nCreate a custom SSL certificate from AWS Certificate Manager. Select the public certificate request. Add your domain and subdomain to the domain name. It is recommended to use a wildcard for the subdomain like *.kazuyanagimoto.com.\n\n\n\n\n\n\nCaution\n\n\n\nYou must use the us-east-1 region for AWS Certificate Manager to use it with CloudFront.\n\n\nIf you select DNS validation, you will need to add a DNS record to your domain‚Äôs DNS settings. A CNAME record starting with _ will be displayed, so add it to your domain‚Äôs DNS settings. After registration is complete, the status of the certificate should change to published.\n\n\nStep 3: Set the CloudFront Distribution Alternate Domain Name\nReturn to CloudFront and set the alternate domain name for the distribution. As the alternate domain name, enter the subdomain you created earlier, and select the custom SSL certificate you created earlier.\n\n\nStep 4: Test\nAccess the subdomain. You will be asked for a password, and by entering the username and password you set earlier, the blog should be displayed.\n\n\n\n\n\nQuarto Research Blog - Researching as if to Blog \nusername: abcd, password: 1234"
  },
  {
    "objectID": "blog/2024/04/05/index.html#conclusion",
    "href": "blog/2024/04/05/index.html#conclusion",
    "title": "Researching as if to Blog",
    "section": "Conclusion",
    "text": "Conclusion\nIn this article, I introduced how to manage research like a blog using Quarto. By using this method, you can not only look back on your past analysis but also communicate smoothly with co-authors and supervisors. I hope that this will help you make progress in your research.\nHave a happy Quarto life ü•Ç!"
  },
  {
    "objectID": "blog/2024/04/05/index.html#footnotes",
    "href": "blog/2024/04/05/index.html#footnotes",
    "title": "Researching as if to Blog",
    "section": "Footnotes",
    "text": "Footnotes\n\n\n Strictly speaking, knitr can handle multiple languages from the beginning, so if you use knitr as the background engine, you can share multiple languages in the same notebook. You can see an example of this in my past blog.‚Ü©Ô∏é"
  },
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "Blog",
    "section": "",
    "text": "April 26, 2025\n        \n        \n            Research Workflow with Quarto + {targets}\n            \n            \n                \n                \n                    Quarto\n                \n                \n                \n                    R\n                \n                \n                \n                    Julia\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#section",
    "href": "blog/index.html#section",
    "title": "Blog",
    "section": "",
    "text": "April 26, 2025\n        \n        \n            Research Workflow with Quarto + {targets}\n            \n            \n                \n                \n                    Quarto\n                \n                \n                \n                    R\n                \n                \n                \n                    Julia\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#section-1",
    "href": "blog/index.html#section-1",
    "title": "Blog",
    "section": "2024",
    "text": "2024\n\n\n    \n    \n                  \n            April 29, 2024\n        \n        \n            A Gamechanger of Creating Tables in R: tinytable\n            \n            \n                \n                \n                    R\n                \n                \n                \n                    Quarto\n                \n                \n                \n                    LaTeX\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n    \n                  \n            April 5, 2024\n        \n        \n            Researching as if to Blog\n            \n            \n                \n                \n                    R\n                \n                \n                \n                    Quarto\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#section-2",
    "href": "blog/index.html#section-2",
    "title": "Blog",
    "section": "2023",
    "text": "2023\n\n\n    \n    \n                  \n            September 6, 2023\n        \n        \n            A Minimal & Portable Research Environment with Docker\n            \n            \n                \n                \n                    R\n                \n                \n                \n                    Docker\n                \n                \n                \n                    VSCode\n                \n                \n                \n                    Julia\n                \n                \n                \n                    LaTeX\n                \n                \n                \n                    Python\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n    \n                  \n            June 10, 2023\n        \n        \n            Scientific Communication with Quarto: Economic Models\n            \n            \n                \n                \n                    Julia\n                \n                \n                \n                    Observable JS\n                \n                \n                \n                    Quarto\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n    \n                  \n            April 30, 2023\n        \n        \n            Quarto Is Multi-lingual!\n            \n            \n                \n                \n                    Julia\n                \n                \n                \n                    Python\n                \n                \n                \n                    R\n                \n                \n                \n                    Quarto\n                \n                \n                \n                    Stata\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#section-3",
    "href": "blog/index.html#section-3",
    "title": "Blog",
    "section": "2022",
    "text": "2022\n\n\n    \n    \n                  \n            December 28, 2022\n        \n        \n            Some Quarto Tips for Academic Presentation\n            \n            \n                \n                \n                    R\n                \n                \n                \n                    Quarto\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n    \n                  \n            May 24, 2022\n        \n        \n            My Docker Template for R\n            \n            \n                \n                \n                    R\n                \n                \n                \n                    Docker\n                \n                \n            \n            \n            \n        \n        \n        \n            \n        \n        \n    \n    \n\nNo matching items"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html",
    "href": "blog/2022/12/27/quarto_tips/index.html",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "",
    "text": "The other day, I used slides made with Quarto in a presentation at a conference. In the Economics community, 98% of people use Beamer of \\(\\LaTeX\\), and about 2% use PowerPoint for their presentations. I personally don‚Äôt like Beamer‚Äôs design, and I think PowerPoint has a problem with maintainability (i.e., can it be easily changed) in case of ongoing projects. I like Quarto for the following reasons:\n\nReasonably good design. And highly customizable.\nTime saving. Slides are written in the markdown notation, so you can make it with the same amount of effort as Beamer (unless you care about the designüòâ)\nEasily maintainable. Variables can be used in the text, so the numbers are automatically updated even if the model or analysis is slightly changed.\n\nHere, I write some tips on Quarto for academic presentations. For the basic slide creation in Quarto, please refer to the official documentation or Tom Mock‚Äôs slides at the RStudio conference. The slides used at the conference presentation are not yet ready for public release, so I prepare these example slides\n\n Slides ¬†  PDF ¬†  Code"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#are-you-a-beamer-fan",
    "href": "blog/2022/12/27/quarto_tips/index.html#are-you-a-beamer-fan",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "",
    "text": "The other day, I used slides made with Quarto in a presentation at a conference. In the Economics community, 98% of people use Beamer of \\(\\LaTeX\\), and about 2% use PowerPoint for their presentations. I personally don‚Äôt like Beamer‚Äôs design, and I think PowerPoint has a problem with maintainability (i.e., can it be easily changed) in case of ongoing projects. I like Quarto for the following reasons:\n\nReasonably good design. And highly customizable.\nTime saving. Slides are written in the markdown notation, so you can make it with the same amount of effort as Beamer (unless you care about the designüòâ)\nEasily maintainable. Variables can be used in the text, so the numbers are automatically updated even if the model or analysis is slightly changed.\n\nHere, I write some tips on Quarto for academic presentations. For the basic slide creation in Quarto, please refer to the official documentation or Tom Mock‚Äôs slides at the RStudio conference. The slides used at the conference presentation are not yet ready for public release, so I prepare these example slides\n\n Slides ¬†  PDF ¬†  Code"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#data",
    "href": "blog/2022/12/27/quarto_tips/index.html#data",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Data",
    "text": "Data\nI render tables and plots inside of slides. In other words, I am not using the image files for the article. This is because\n\nProper font sizes in the article are too small in presentation slides\nHighlighting is not easy. You need to create another figure/table or use complicated TikZ\nI want to unify the design of slides and figures&tables\n\nHence, I create and save a data frame in a separate file and load it just before plotting it.\nload(\"tb_hoge.rds\")\ntb_hoge |&gt;\n  ggplot(aes(x, y)) +\n  geom_point()\nYou can use this data frame to refer to its values in a slide text.\n\nIn 2021, `r tb_hoge$value[tb_hoge$year == 2021]`% of people‚Ä¶\n\nThis is convenient in case you change your analysis slightly and the values in tb_hoge.rds change.1 The values will be updated by re-rendering slides."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#theme",
    "href": "blog/2022/12/27/quarto_tips/index.html#theme",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Theme",
    "text": "Theme\nThere are 11 built-in themes provided for Reveal presentations. These are good designs, but to match them with figures&tables, I write custom.scss and make my own theme. Currently, it is like xaringanthemer‚Äôs style_mono_accent() theme. You can check about the customizable parts in the official document.\n\n\nCode\n/*-- scss:defaults --*/\n\n@import url(https://fonts.googleapis.com/css?family=Montserrat:300,300i&display=swap);\n@import url(https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap);\n@import url(https://fonts.googleapis.com/css?family=Fira+Mono&display=swap);\n\n// fonts\n$font-family-sans-serif: Montserrat, sans-serif !default;\n$font-family-monospace: \"Fira Mono\", monospace  !default;\n\n// colors\n$body-bg: #fff !default;\n$body-color: #272822 !default;\n$link-color: #055099 !default;\n\n// headings\n$presentation-heading-font: \"Josefin Sans\", sans-serif !default;\n$presentation-heading-color: #1C5253 !default;\n\n$h1-font-size: 1.6em !default;\n$h2-font-size: 1.3em !default;\n$h3-font-size: 1.15em !default;\n$h4-font-size: 1em !default;\n\n// code blocks\n$code-block-border-color: #93a1a1 !default;\n$code-color: $presentation-heading-color;\n\n//\n// Color system\n//\n\n// stylelint-disable\n$white:    #fff !default;\n$gray-100: #fdf6e3 !default;\n$gray-200: #eee8d5 !default;\n$gray-300: #dee2e6 !default;\n$gray-400: #ced4da !default;\n$gray-500: #adb5bd !default;\n$gray-600: #839496 !default;\n$gray-700: #495057 !default;\n$gray-800: #073642 !default;\n$gray-900: #002b36 !default;\n$black:    #000 !default;\n\n/*-- scss:rules --*/\n\n.title{\n    color: $white;\n    font-size: 2.5em;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    top: 20%\n}\n\n.subtitle{\n    color: $gray-100;\n    font-size: $h2-font-size;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    top: 33%\n}\n\n\n.author {\n    color: $white;\n    font-size: $h3-font-size;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    bottom: 10%;\n}\n\n.date {\n    color: $white;\n    font-size: $h4-font-size;\n    font-family: $presentation-heading-font;\n    position: absolute;\n    bottom: 5%;\n}\n\n\n.message{\n    color: $presentation-heading-color;\n    font-size: $h2-font-size;\n    font-family: $presentation-heading-font;\n    text-align: center;\n}\n\n.space-left {\n    margin-left: 5%;\n}\n\n\n.center-xy {\n    margin: 0;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -ms-transform: translateY(-50%), translateX(-50%);\n    transform: translateY(-50%), translateX(-50%);\n}\n\n\n.small {\n    font-size: 0.8em\n}\n\n.Large {\n    font-size: 1.6em\n}\n\nsection.has-dark-background a {\n    color: $white;\n    border-style: dashed;\n    border-bottom-width: 1px;\n}\n\nsection.has-dark-background a:hover {\n    color: $white;\n    border-bottom: solid\n}\n\n\n\nAd-hoc CSS\nI write frequently used CSS settings in custom.css, but sometimes I want to use a CSS environment on an ad-hoc basis (for example, to change the font size slightly.)\nIn these cases, you can write them in style= environment:\n::: {style=\"font-size: 0.68\"}\n\nSentences you want to make smaller\n\n:::\n\n\nFragments\nQuarto (or Reveal.js) allows some complicated animation. If you are interested, you might want to see Tom Mock‚Äôs this part of the slides.\nApart from this, as discussed here, the original fragment separator . . . does not correctly work in environments like columns. From my experience, fragment environment solves them."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#plots",
    "href": "blog/2022/12/27/quarto_tips/index.html#plots",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Plots",
    "text": "Plots\n\nTheme\nMinimizing elements is a starting point of slide design. For that purpose, it is important to use the same fonts and colors for figures (and tables) as the slides. This is the reason why I used to use xaringanthemer, which automatically generates the ggplot2 theme corresponding to the slides‚Äô theme. Unfortunately, there have been no packages for Quarto slides (as far as I know), I declare this theme_quarto() function.\n\n\nCode\nblend_colors &lt;- function(x, y, alpha = 0.5) {\n  x &lt;- colorspace::hex2RGB(x)\n  y &lt;- colorspace::hex2RGB(y)\n  z &lt;- colorspace::mixcolor(alpha, x, y)\n  colorspace::hex(z)\n}\ncolor_blender &lt;- function(x, y) function(alpha = 0.5) blend_colors(x, y, alpha)\ntheme_quarto &lt;- function(\n  text_color = color_text,\n  background_color = color_bg,\n  text_font = font_text,\n  text_font_size = 30,\n  accent_color = color_base,\n  title_font = font_title,\n  title_font_size = 30\n) {\n  blend &lt;- color_blender(text_color, background_color)\n  ggplot2::theme(\n    line = ggplot2::element_line(color = blend(0.2)),\n    rect = ggplot2::element_rect(fill = background_color),\n    title = ggplot2::element_text(\n      color = accent_color,\n      family = title_font,\n      size = title_font_size\n    ),\n    plot.background = ggplot2::element_rect(\n      fill = background_color,\n      color = background_color\n    ),\n    panel.background = ggplot2::element_rect(\n      fill = background_color,\n      color = background_color\n    ),\n    panel.grid.major = ggplot2::element_line(\n      color = blend(0.8),\n      inherit.blank = TRUE\n    ),\n    panel.grid.minor = ggplot2::element_line(\n      color = blend(0.9),\n      inherit.blank = TRUE\n    ),\n    axis.title = ggplot2::element_text(size = title_font_size * 0.8),\n    axis.ticks = ggplot2::element_line(color = blend(0.8)),\n    axis.text = ggplot2::element_text(\n      color = blend(0.4),\n      size = title_font_size * 0.7\n    ),\n    legend.key = ggplot2::element_rect(fill = \"transparent\", colour = NA),\n    legend.text = ggplot2::element_text(\n      size = title_font_size * 0.8,\n      family = title_font\n    ),\n    plot.caption = ggplot2::element_text(\n      size = text_font_size * 0.8,\n      color = blend(0.3)\n    )\n  )\n}\n\n\nWhile the original xaringanthemer::theme_xaringan() redefines the primary color of ggplot2::geom_* by ggplot2::update_geom_defaults, my function does not. I did not overwrite it because color palettes must be specified manually for 2+ color cases, anyway. You can use it like:\n\ncolor_base &lt;- \"#1C5253\"\ntb_hoge |&gt;\n  ggplot(aes(x, y)) +\n  geom_point(color = color_base) +\n  theme_quarto()\n\n\n\nHighlighting\nThe most famous way to highlight plots should be gghighlight. You can proceed with your stories smoothly and clearly by\n\n\n\nFirst Slide\n\np &lt;- tb_hoge |&gt;\n  ggplot(aes(x, y)) +\n  geom_col(color = color_base) +\n  theme_quarto()\n\np\n\n\n\n\n\nSecond Slide\n\np + gghighlight(x == \"Japan\")"
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#tables",
    "href": "blog/2022/12/27/quarto_tips/index.html#tables",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Tables",
    "text": "Tables\n\nmarkdown vs.¬†kableExtra vs.¬†gt?\nI think they are three popular ways to create tables in HTML slides. while each of them has pros and cons, I am using gt because\nMarkdown Table\n\nNo highlighting\nNo multirow nor multicol from \\(\\LaTeX\\)\n\nkableExtra\n\nSyntax is a little more complicated than gt (e.g., need to mutate a string column for percentages.)\nHighlighting is slightly more complicated than gt\n\nNote that I use kableExtra for tables in an article due to the following problem.\n\n\nProblems with Mathematic Expressions\nUnfortunately, it is difficult to use mathematical expressions in a table in Quarto. gt does not support \\(\\LaTeX\\) notation.2 Also, mathematical expressions of kableExtra are not rendered in Quarto (GitHub Issue). You can solve it by\nkableExtra::kbl(data, format=\"markdown\")\nbut it contains the abovementioned disadvantages of markdown tables.\nThen, I compromise by using\n\nUnicode Greek letters (Œ∏, œÑ, Œ¥, etc.)\nHTML tags (&lt;sup&gt; and &lt;sub&gt;)\n\nand evaluating them by gt::fmt_markdown(). Mathematical expressions in tables are usually simple, so I don‚Äôt have any problems so far.\n\ntibble(a = c(\"Œ∏ = 0\", \"œÑ&lt;sup&gt;Œ¥-1&lt;/sup&gt;\")) |&gt;\n  gt() |&gt;\n  fmt_markdown(columns = everything())\n\n\n\nHighlighting\nThe gt package itself can also highlight cells in a table with the function tab_style(). However, this requires redundant writing, so gtExtras::gt_highlight_rows() and gtExtras::gt_highlight_cols() are useful if you want to highlight row/column-wise."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#export",
    "href": "blog/2022/12/27/quarto_tips/index.html#export",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Export",
    "text": "Export\n\nHTML or PDF?\nAlthough I think you use a prepared PC for your presentation, since it is difficult to imagine a PC without a browser, the HTML format is also acceptable. If you write the following in the YAML header, only one self-contained HTML file will be output. So you can easily carry it around like a PDF file.3\nformat:\n  revealjs:\n    standalone: true\n    embed-resources: true\nHowever, you will be asked to submit your slides in PDF format in various situations. And whether or not you actually present your presentation in PDF format, it is a good idea to have PDF slides on hand for insurance purposes.\n\nOpen the HTML file in your browser and press E\nClick ‚ÄúPrint‚Äù on the browser, then ‚ÄúSave as PDF‚Äù\n\nIf you want to separate fragments, specify pdf-separate-fragments: true in YAML.\n\n\nProblems with Hyperlink\nA hyperlink that jumps to each slide is essentially a reference to an &lt;h2&gt; tag, so the link can be written as:\n## A Slide {#sec-slide}\n\n&lt;a href=\"#/sec-detail\"&gt;detail‚Üó&lt;/a&gt;\n\n## A Detail Slide {#sec-detail}\n\n&lt;a href=\"#/sec-slide\"&gt;‚Ü©Ô∏é&lt;/a&gt;\nHowever, as far as I know, the link is not reflected in the above PDF output. If anyone knows a solution to this problem, I would appreciate it if you could let me know."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#fin.",
    "href": "blog/2022/12/27/quarto_tips/index.html#fin.",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Fin.",
    "text": "Fin.\nThese are some of my ideas for using Quarto for academic presentations. I think that Quarto‚Äôs slides are quite suitable for academic presentations, because of their simple syntax, high degree of freedom in design, and high maintainability in numbers. I hope this is useful for you."
  },
  {
    "objectID": "blog/2022/12/27/quarto_tips/index.html#footnotes",
    "href": "blog/2022/12/27/quarto_tips/index.html#footnotes",
    "title": "Some Quarto Tips for Academic Presentation",
    "section": "Footnotes",
    "text": "Footnotes\n\n\n In economics, changing the age group of the sample or the parameters of the model sometimes lead to changes in the results. In addition, we sometimes found mistakes in cleaning the data.‚Ü©Ô∏é\n This issue has been raised in 2019, but it does not seem to be solved quickly.‚Ü©Ô∏é\n The option self-contained: true produces a deprecated warning.‚Ü©Ô∏é"
  }
]